        /* üî•„ÄêÂÖ≥ÈîÆ‰øÆÂ§ç„ÄëÂü∫Á°ÄÈ°µÈù¢Ê†∑Âºè - Á°Æ‰øùÊâãÊú∫ÊòæÁ§∫Ê≠£Á°Æ */
        html { 
            height: 100%; 
            overflow: hidden; 
        }
        body { 
            height: 100%; 
            overflow: hidden; 
            margin: 0; 
            padding: 8px; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            font-weight: normal; 
            background-color: #dcdcdc; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            box-sizing: border-box; 
        }
        
        /* ‰∏ªÈ¢òÁ≥ªÁªü - ÁÆÄÁ∫¶È£éÊ†º (ÈªòËÆ§) */
        :root {
            /* üî•„ÄêÂÖ≥ÈîÆ‰øÆÂ§ç„ÄëÊâãÊú∫Â±èÂπïÂ∞∫ÂØ∏ÂèòÈáè - ÊéßÂà∂ÊâãÊú∫Â§ßÂ∞è */
            --screen-width: 350px;
            --screen-height: 740px;
            --secondary-bg: #ffffff;
            --border-color: #e0e0e0;
            --text-primary: #1f1f1f;
            --text-secondary: #8a8a8a;
            --accent-color: #007bff;
            
            --theme-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --theme-font-weight: 400;
            --theme-line-height: 1.5;
            
            --theme-button-bg: rgba(74, 132, 193, 0.9);
            --theme-button-bg-hover: rgba(74, 132, 193, 1);
            --theme-button-color: white;
            --theme-button-border: none;
            --theme-button-radius: 20px;
            --theme-button-shadow: 0 2px 8px rgba(74, 132, 193, 0.3);
            
            --theme-button-secondary-bg: rgba(255, 255, 255, 0.8);
            --theme-button-secondary-bg-hover: rgba(255, 255, 255, 0.95);
            --theme-button-secondary-color: #555;
            --theme-button-secondary-border: rgba(0, 0, 0, 0.1);
            
            --theme-header-bg: rgba(247, 247, 247, 0.8);
            --theme-header-backdrop: blur(10px);
            
            --theme-form-bg: rgba(255, 255, 255, 0.8);
            --theme-input-border: rgba(0, 0, 0, 0.08);
            --theme-input-radius: 15px;
            --theme-input-focus: rgba(0, 123, 255, 0.5);
            --theme-input-focus-shadow: rgba(0, 123, 255, 0.1);
            
            --theme-avatar-bg-1: #f0f2f5;
            --theme-avatar-bg-2: #e8ebf0;
            --theme-avatar-text: #8b9dc3;
            --theme-avatar-border: rgba(255, 255, 255, 0.8);
            
            --theme-text-primary: #333;
            
            /* ÈªòËÆ§‰∏ªÈ¢òÁöÑËÉåÊôØËâ≤ */
            --body-bg: #ffffff;
            
            /* Èó¥Ë∑ùÁ≥ªÁªü */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 20px;
            --spacing-xl: 32px;
            
            /* Â∞∫ÂØ∏Á≥ªÁªü */
            --size-xs: 20px;
            --size-sm: 24px;
            --size-md: 30px;
            --size-lg: 40px;
            --size-xl: 50px;
            --size-xxl: 60px;
            
            /* Â≠ó‰ΩìÂ§ßÂ∞èÁ≥ªÁªü */
            --font-size-xs: 10px;
            --font-size-sm: 12px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-xxl: 20px;
            --font-size-xxxl: 24px;
            --font-size-huge: 32px;
            --font-size-giant: 80px;
            
            /* ÂúÜËßíÁ≥ªÁªü */
            --radius-xs: 4px;
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 15px;
            --radius-xxl: 18px;
            --radius-xxxl: 20px;
            --radius-huge: 25px;
            --radius-round: 50%;
            
            /* Ë°åÈ´òÁ≥ªÁªü */
            --line-height-tight: 1.3;
            --line-height-normal: 1.4;
            --line-height-relaxed: 1.5;
            --line-height-loose: 1.6;
            
            /* Z-indexÁ≥ªÁªü */
            --z-index-dropdown: 10;
            --z-index-sticky: 20;
            --z-index-fixed: 30;
            --z-index-modal-backdrop: 40;
            --z-index-modal: 50;
            --z-index-popover: 60;
            --z-index-tooltip: 70;
            --z-index-notification: 80;
            
            /* Âä®ÁîªÁ≥ªÁªü */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
            
            /* Èò¥ÂΩ±Á≥ªÁªü */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 4px 15px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 8px 25px rgba(0, 0, 0, 0.15);
            --shadow-phone: 0 20px 40px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.1);
            --shadow-special: 0 8px 30px rgba(0,0,0,0.3);
            --shadow-mixed: 0 12px 35px rgba(0, 0, 0, 0.2);
            --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.1);
            --shadow-neon-green: 0 0 10px rgba(0, 255, 136, 0.3);
            --shadow-neon-blue: 0 0 10px rgba(0, 212, 255, 0.4);
            --shadow-neon-green-small: 0 0 5px rgba(0, 255, 136, 0.2);
            --shadow-neon-green-large: 0 0 15px rgba(0, 255, 136, 0.4);
            --shadow-neon-green-8px: 0 0 8px rgba(0, 255, 136, 0.3);
            --shadow-neon-blue-8px: 0 0 8px rgba(0, 212, 255, 0.4);
            --shadow-form-mixed: 0 3px 8px rgba(0, 0, 0, 0.18);
            --shadow-light: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.15);
            --shadow-hover-alt: 0 6px 20px rgba(0, 0, 0, 0.15);
            --shadow-button: 0 2px 6px rgba(0, 0, 0, 0.08);
            
            /* ÊñáÂ≠óÈò¥ÂΩ± */
            --text-shadow-sm: 0 1px 3px rgba(0,0,0,0.5);
            --text-shadow-md: 0 3px 8px rgba(0,0,0,0.4);
            --text-shadow-light: 0 1px 3px rgba(0,0,0,0.1);
            
            /* ÈÄöÁî®ËÉåÊôØËâ≤ */
            --bg-white-30: rgba(255, 255, 255, 0.3);
            --bg-white-50: rgba(255, 255, 255, 0.5);
            --bg-white-70: rgba(255, 255, 255, 0.7);
            --bg-white-80: rgba(255, 255, 255, 0.8);
            --bg-white-90: rgba(255, 255, 255, 0.9);
            --bg-white-95: rgba(255, 255, 255, 0.95);
            --bg-white-10: rgba(255, 255, 255, 0.1);
            --bg-white-15: rgba(255, 255, 255, 0.15);
            --bg-black-05: rgba(0, 0, 0, 0.05);
            --bg-black-08: rgba(0, 0, 0, 0.08);
            --bg-black-10: rgba(0, 0, 0, 0.1);
            --bg-black-15: rgba(0, 0, 0, 0.15);
            --bg-black-18: rgba(0, 0, 0, 0.18);
            --bg-black-20: rgba(0, 0, 0, 0.2);
            --bg-default-05: rgba(74, 132, 193, 0.05);
            --bg-default-10: rgba(74, 132, 193, 0.1);
            --bg-default-shadow: rgba(74, 132, 193, 0.2);
            
            /* ËæπÊ°ÜÈ¢úËâ≤ */
            --border-light: rgba(255, 255, 255, 0.3);
            --border-dark: rgba(0, 0, 0, 0.08);
            --border-white-15: rgba(255, 255, 255, 0.15);
            --border-white-20: rgba(255, 255, 255, 0.2);
            --border-black-05: rgba(0, 0, 0, 0.05);
            
            /* ÊñáÂ≠óÈ¢úËâ≤ */
            --text-white-70: rgba(255, 255, 255, 0.7);
            --text-black-50: rgba(0, 0, 0, 0.5);
            
            /* ÁâπÊÆäËÉåÊôØ */
            --bg-header-default: rgba(247, 247, 247, 0.75);
            --bg-form-light: rgba(255, 255, 255, 0.6);
            --bg-black-50: rgba(0, 0, 0, 0.5);
            --bg-blue-05: rgba(0, 123, 255, 0.05);
            --bg-blue-10: rgba(0, 123, 255, 0.1);
            --bg-blue-20: rgba(0, 123, 255, 0.2);
            --bg-red-10: rgba(255, 59, 48, 0.1);
            --bg-red-20: rgba(255, 59, 48, 0.2);
            --bg-red-90: rgba(255, 59, 48, 0.9);
            --bg-white-100: rgba(255, 255, 255, 1);
            
            /* ÁâπÊÆäÈò¥ÂΩ± */
            --shadow-light-2: 0 2px 5px rgba(0, 0, 0, 0.1);
            --shadow-card-special: 0 4px 20px rgba(0, 0, 0, 0.15);
            --shadow-light-4: 0 2px 8px rgba(0, 0, 0, 0.04);
            --shadow-small: 0 2px 4px rgba(0, 0, 0, 0.2);
            --shadow-focus: 0 0 0 2px rgba(74, 132, 193, 0.2);
            --shadow-bottom: 0 -4px 20px rgba(0,0,0,0.15);
            --shadow-heavy: 0 4px 12px rgba(0, 0, 0, 0.3);
            
            /* ÁâπÊÆäËæπÊ°Ü */
            --border-black-10: rgba(0, 0, 0, 0.1);
            --border-black-60: rgba(0, 0, 0, 0.6);
            
            /* Â∏∏Áî®È¢úËâ≤ÂèòÈáè */
            --color-black: #000;
            --color-white: #fff;
            --color-green: #4cd964;
            --color-blue: #007AFF;
            --color-blue-light: #f0f8ff;
            --color-gray-light: #f0f0f0;
            --color-gray: #666;
            --color-gray-dark: #333;
            --color-gray-darker: #2c2c2c;
            --color-gray-medium: #999;
            --color-gray-border: #e0e0e0;
            --color-gray-bg: #f5f5f5;
            --color-gray-bg-light: #f8f8f8;
            --color-gray-bg-lighter: #fafafa;
            --color-border: #eee;
            --color-border-medium: #ddd;
            --color-border-gray: #ccc;
            --color-primary-green: #07C160;
            --color-text-light: #888;
            --color-text-lighter: #aaa;
            --color-wallpaper: #a8d4a8;
            --color-neon-green: #00ff88;
            --color-neon-blue: #00d4ff;
            --color-orange: #FF9500;
            --color-yellow: #FFCC00;
            --color-light-blue: #5AC8FA;
            --color-pink: #AF52DE;
            
            /* iOS Á≥ªÁªüÈ¢úËâ≤ */
            --color-ios-green: #34C759;
            --color-ios-purple: #5856D6;
            --color-ios-red: #FF2D55;
            --color-ios-gray: #8E8E93;
            
            /* Ê∏êÂèòËâ≤ */
            --gradient-blue: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-gray: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --gradient-pink: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            
            /* Ê∞îÊ≥°È¢úËâ≤ÂèòÈáè */
            --ai-bubble-color: #f0f0f0;
            --my-bubble-color: #007AFF;
            
            /* Ê∞îÊ≥°Ê†∑ÂºèÁ≥ªÁªü */
            --bubble-glass-bg-ai: rgba(240, 240, 240, 0.7);
            --bubble-glass-bg-user: rgba(0, 122, 255, 0.8);
            --bubble-glass-border-ai: rgba(255, 255, 255, 0.4);
            --bubble-glass-border-user: rgba(255, 255, 255, 0.3);
            --bubble-neon-bg-ai: rgba(240, 240, 240, 0.9);
            --bubble-neon-bg-user: rgba(0, 122, 255, 0.9);
            
            /* ÊÇ¨ÊµÆÊåâÈíÆ */
            --floating-btn-bg: rgba(74, 132, 193, 0.35);
            --floating-btn-bg-hover: rgba(74, 132, 193, 0.55);
            --floating-btn-secondary-bg: rgba(255, 255, 255, 0.35);
            --floating-btn-secondary-bg-hover: rgba(255, 255, 255, 0.55);
            
            /* Ê∞îÊ≥°È¢ÑËßàÂíåÊºîÁ§∫ */
            --bubble-demo-bg: rgba(255, 255, 255, 0.8);
            --setting-card-bg: rgba(248, 249, 250, 0.8);
            --custom-input-bg: rgba(248, 249, 250, 0.8);
            --schedule-item-bg: rgba(255, 255, 255, 0.8);
            
            /* Á∫∏Âº†Ê∞îÊ≥°ÁâπÊÆäÊïàÊûú */
            --paper-inset-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
            --paper-text-shadow: 0 0.5px 1px rgba(255, 255, 255, 0.3);
            --paper-border: 1px solid rgba(0, 0, 0, 0.08);
            
            /* ‰∏ªÈ¢òÂåñÊåâÈíÆËÉåÊôØ */
        --theme-button-bg-rgba: rgba(74, 132, 193, 0.9);
        --theme-button-secondary-bg-rgba: rgba(255, 255, 255, 0.8);
        
        /* ËæìÂÖ•Ê°ÜÂíåÊªëÂùó */
        --input-white-bg: rgba(255, 255, 255, 0.9);
        --slider-thumb-border: 2px solid rgba(255, 255, 255, 0.8);
        
        /* È¢ÑËßàÊ∞îÊ≥° */
        --preview-glass-ai: rgba(240, 240, 240, 0.7);
        --preview-glass-user: rgba(0, 122, 255, 0.8);
        --preview-glass-border: 1px solid rgba(255, 255, 255, 0.3);

        /* ÈÄöÁî®Â∑•ÂÖ∑Á±ª - ÊõøÊç¢Á°¨ÁºñÁ†ÅÊ†∑Âºè */
        .app-icon-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 18px;
        }
        
        .add-btn {
            position: absolute;
            right: var(--spacing-lg);
            top: 43px;
            width: var(--size-md);
            height: var(--size-md);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: var(--font-size-xxl);
            color: var(--color-gray-dark);
        }

         .header-action-btn {
            position: absolute;
            right: 60px; /* Âú®Âä†Âè∑ÊåâÈíÆÂ∑¶Ëæπ */
            top: 45px;
            width: 28px;
            height: 28px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            color: #666;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .header-action-btn:hover {
            background: rgba(0, 0, 0, 0.1);
            color: #333;
            transform: scale(1.05);
        }
        
        .hide {
            display: none;
        }
        
        .flex-row {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .flex-row-center {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
        }
        
        .persona-add-btn {
            width: var(--size-md);
            height: var(--size-md);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: var(--font-size-xxl);
            color: var(--color-blue);
            background: var(--bg-blue-10);
            border-radius: var(--radius-round);
            margin-right: var(--spacing-xs);
        }
        
        .worldbook-add-btn {
            position: absolute;
            right: var(--spacing-lg);
            top: 39px;
            width: var(--size-md);
            height: var(--size-md);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: var(--font-size-xxl);
            color: var(--color-gray-dark);
        }
        
        .save-btn-absolute {
            position: absolute;
            right: var(--spacing-lg);
            padding: var(--spacing-xs) var(--spacing-sm);
            background: none;
            border: none;
            font-size: var(--font-size-lg);
            color: var(--color-gray-dark);
            cursor: pointer;
        }
        
        .textarea-large {
            height: 400px;
        }
        
        .padding-none {
            padding: 0;
        }
        
        .padding-none-flex {
            padding: 0;
            display: flex;
            flex-direction: column;
        }
        
        .overflow-auto {
            overflow-y: auto;
        }
        
        .poke-settings-visible {
            display: flex;
        }
        
        .chat-menu-btn {
            position: absolute;
            right: var(--spacing-lg);
            top: 1.5px;
            width: var(--size-md);
            height: var(--size-md);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            color: var(--color-gray-dark);
        }
        
        .settings-icon-custom {
            background-color: var(--color-pink);
        }
        
        .theme-preview-simple {
            background: linear-gradient(135deg, #f7f7f7, #e8e8e8);
        }
        
        .theme-preview-cute {
            background: linear-gradient(135deg, #ffe6f0, #ffb6c1);
        }
        

        
        .check-icon {
            color: var(--color-blue);
        }
        
        /* Â≠óÂè∑Â§ßÂ∞èËÆæÁΩÆÊ†∑Âºè */
        .font-size-preview {
            padding: 20px;
            background: var(--bg-white-90);
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid var(--color-border);
        }
        
        .font-size-preview-text {
            font-size: 15px;
            line-height: 1.5;
            color: var(--color-gray-dark);
            text-align: center;
            transition: font-size 0.3s ease;
        }
        
        .font-size-slider-container {
            padding: 20px;
            background: var(--bg-white-90);
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid var(--color-border);
        }
        
        .font-size-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--color-gray);
        }
        
        .font-size-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--color-gray-light);
            outline: none;
            margin-bottom: 15px;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .font-size-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-blue);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        
        .font-size-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-blue);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        
        .font-size-value {
            text-align: center;
            font-size: 14px;
            color: var(--color-gray-dark);
            font-weight: 500;
        }
        
        .settings-item-margin {
            margin-top: var(--spacing-lg);
        }
        
        .small-desc {
            color: var(--color-gray);
            font-size: var(--font-size-sm);
            display: block;
            margin-top: var(--spacing-xs);
        }
        
        .api-form-flex {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
        }
        
        .api-select-hidden {
            display: none;
            flex: 1;
        }
        
        .fetch-btn {
            display: none;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-blue);
            color: var(--color-white);
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: var(--font-size-sm);
            white-space: nowrap;
        }
        
        .test-connection-btn {
            background-color: var(--color-ios-green);
            margin-top: var(--spacing-sm);
        }
        
        .color-option {
            width: var(--size-md);
            height: var(--size-md);
            border-radius: var(--radius-round);
            cursor: pointer;
            border: 2px solid transparent;
            transition: all var(--transition-fast) ease;
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.selected {
            border-color: var(--color-white);
            box-shadow: 0 0 0 2px var(--color-blue);
        }
        
        .color-red { background-color: var(--color-ios-red); }
        .color-orange { background-color: var(--color-orange); }
        .color-yellow { background-color: var(--color-yellow); }
        .color-green { background-color: var(--color-ios-green); }
        .color-light-blue { background-color: var(--color-light-blue); }
        .color-blue { background-color: var(--color-blue); }
        .color-purple { background-color: var(--color-ios-purple); }
        .color-pink { background-color: var(--color-pink); }
        .color-red-alt { background-color: var(--color-ios-red); }
        
        .wallpaper-option {
            width: var(--size-xxl);
            height: var(--size-xxl);
            border-radius: var(--radius-lg);
            cursor: pointer;
            border: 2px solid transparent;
            transition: all var(--transition-fast) ease;
        }
        
        .wallpaper-option:hover {
            transform: scale(1.05);
        }
        
        .wallpaper-option.selected {
            border-color: var(--color-blue);
        }
        
        .wallpaper-gradient1 {
            background-image: linear-gradient(135deg, #6e8efb, #a777e3);
        }
        
        .wallpaper-gradient2 {
            background-image: linear-gradient(135deg, #FF9A9E, #FAD0C4);
        }
        
        .wallpaper-gradient3 {
            background-image: linear-gradient(135deg, #A1C4FD, #C2E9FB);
        }
        
        .wallpaper-gradient4 {
            background-image: linear-gradient(135deg, #FFECD2, #FCB69F);
        }
        
        .upload-custom-item {
            margin-top: var(--spacing-lg);
        }
        
        .file-input-hidden {
            display: none;
        }
        
        .icon-user-blue {
            color: var(--color-blue);
        }
        
        .icon-users-green {
            color: var(--color-ios-green);
        }
        
        .memory-checkbox {
            margin-right: var(--spacing-sm);
        }
        
        .memory-desc {
            font-size: var(--font-size-md);
            color: var(--color-gray);
            margin-top: var(--spacing-xs);
        }
        
        .form-actions-flex {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .form-submit-flex {
            flex: 1;
        }
        
        .form-delete-red {
            background: var(--color-ios-red);
            color: var(--color-white);
            padding: var(--spacing-lg);
            border: none;
            border-radius: var(--theme-button-radius, var(--radius-xl));
            font-size: var(--font-size-xl);
            font-weight: 600;
            cursor: pointer;
            display: none;
        }
        
        .danger-color {
            color: var(--color-ios-red);
        }
        
        .danger-section-icon {
            color: var(--color-red-alt);
        }
        
        .danger-section-title {
            color: var(--color-red-alt);
        }
        
        /* Êõ¥Â§öÂ∑•ÂÖ∑Á±ª - ÁªßÁª≠ÊõøÊç¢Á°¨ÁºñÁ†Å */
        .checkbox-with-margin {
            margin-right: var(--spacing-sm);
        }
        
        .margin-top-20 {
            margin-top: var(--spacing-lg);
        }
        
        .margin-top-15 {
            margin-top: var(--spacing-lg);
        }
        
        .margin-top-10 {
            margin-top: var(--spacing-sm);
        }
        
        .margin-top-8 {
            margin-top: var(--spacing-sm);
        }
        
        .margin-top-5 {
            margin-top: var(--spacing-xs);
        }
        
        .flex-space-between {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-xs);
        }
        
        .flex-gap-15 {
            display: flex;
            gap: var(--spacing-lg);
        }
        
        .flex-1 {
            flex: 1;
        }
        
        .flex-gap-15-mb-15 {
            display: flex;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }
        
        .flex-gap-15-mb-10 {
            display: flex;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }
        
        .width-100 {
            width: 100%;
        }
        
        .max-height-200-auto {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid var(--color-border-medium);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm);
        }
        
        .max-height-300-auto {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--color-border-medium);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm);
        }
        
        .small-text {
            font-size: var(--font-size-md);
            color: var(--color-gray);
        }
        
        .tiny-text {
            font-size: var(--font-size-sm);
            color: var(--color-gray);
        }
        
        .tiny-text-gray {
            font-size: var(--font-size-sm);
            color: var(--color-gray-medium);
        }
        
        .label-small {
            font-size: var(--font-size-md);
            color: var(--color-gray);
        }
        
        .delete-btn-red {
            background: var(--color-ios-red);
            color: var(--color-white);
            border: none;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-xs);
            margin-right: var(--spacing-xs);
        }
        
        .cancel-btn-blue {
            background: var(--color-blue);
            color: var(--color-white);
            border: none;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-xs);
        }
        
        .selection-checkbox {
            width: var(--size-xs);
            height: var(--size-xs);
            border-radius: var(--radius-round);
            border: 2px solid var(--color-blue);
            margin-right: var(--spacing-sm);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .selection-checkbox.selected {
            background-color: var(--color-blue);
        }
        
        .check-icon-white {
            color: var(--color-white);
            font-size: var(--font-size-sm);
        }
        
        .group-member-count {
            font-size: var(--font-size-sm);
            color: var(--color-gray);
        }
        
        .italic-gray {
            color: var(--color-gray);
            font-style: italic;
        }
        
        .text-center-gray {
            text-align: center;
            color: var(--color-gray);
            padding: var(--size-lg);
        }
        
        .worldbook-item {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--color-border);
            cursor: pointer;
        }
        
        .worldbook-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .worldbook-title {
            font-weight: bold;
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-xs);
        }
        
        .avatar-group-green {
            background-color: var(--color-ios-green);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-white);
            font-weight: bold;
        }
        
        /* JavaScriptÂä®ÊÄÅÊ†∑ÂºèÁ±ª */
        .multiselect-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm) var(--spacing-lg);
            background-color: var(--color-gray-bg);
            border-bottom: 1px solid var(--color-border);
        }
        
        .contact-item.selected {
            background-color: var(--color-blue-light);
        }
        
        .empty-message {
            text-align: center;
            color: var(--color-gray);
            padding: var(--size-lg) var(--spacing-lg);
        }
        
        .empty-chat-state {
            text-align: center;
            color: var(--color-gray-medium);
            padding: var(--size-xl) var(--spacing-lg);
            font-size: var(--font-size-lg);
        }
        
        .character-info-flex {
            flex: 1;
        }
        

        
        .message-container.no-avatar .message-avatar {
            display: none;
        }
        
        /* Êõ¥Â§öJavaScriptÂä®ÊÄÅÊ†∑ÂºèÁ±ª */
        .empty-worldbook {
            text-align: center;
            color: var(--color-gray);
            padding: var(--size-lg);
        }
        
        .empty-playlist {
            text-align: center;
            color: var(--color-gray);
            padding: var(--spacing-lg);
        }
        
        .empty-personas {
            text-align: center;
            color: var(--color-gray);
            padding: var(--size-lg);
        }
        
        .empty-mount-chats {
            color: var(--color-gray);
            text-align: center;
            padding: var(--spacing-lg);
        }
        
        .song-title {
            font-weight: 500;
        }
        
        .song-artist {
            font-size: var(--font-size-sm);
            color: var(--color-gray);
        }
        
        .song-duration {
            font-size: var(--font-size-sm);
            color: var(--color-gray-medium);
        }
        
        .remove-character-btn {
            background: none;
            border: none;
            color: var(--color-ios-red);
            cursor: pointer;
            margin-left: var(--spacing-sm);
        }
        
        .mount-checkbox {
            margin-right: var(--spacing-sm);
        }
        
        .mount-avatar-small {
            width: var(--size-md);
            height: var(--size-md);
            border-radius: var(--radius-round);
            margin-right: var(--spacing-sm);
        }
        
        .mount-name {
            font-weight: 500;
        }
        
        .mount-type {
            font-size: var(--font-size-sm);
            color: var(--color-gray);
        }
        
        .worldbook-checkbox {
            margin-right: var(--spacing-md);
            margin-top: 2px;
        }
        
        .worldbook-content-flex {
            flex: 1;
        }
        
        .worldbook-title-text {
            font-weight: 600;
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-xs);
            color: var(--color-gray-dark);
        }
        
        .worldbook-desc-text {
    font-size: var(--font-size-md);
    color: var(--color-gray);
    line-height: var(--line-height-normal);
    margin-bottom: var(--spacing-sm);
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    max-height: 4.2em;
}
        
        .worldbook-date-text {
            font-size: var(--font-size-xs);
            color: var(--color-gray-medium);
        }
        
        .identity-avatar {
            width: var(--size-lg);
            height: var(--size-lg);
            border-radius: var(--radius-round);
            background: linear-gradient(135deg, var(--theme-avatar-bg-1), var(--theme-avatar-bg-2));
            margin-right: var(--spacing-md);
        }
        
        .identity-content-flex {
            flex: 1;
        }
        
        .identity-name {
            font-weight: 600;
            font-size: var(--font-size-lg);
            margin-bottom: 8px;
            line-height: 1.2;
        }
        
        .identity-desc {
            font-size: var(--font-size-sm);
            color: var(--color-gray);
            line-height: 1.4;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            max-height: 4.2em;
        }
        
        .identity-check-icon {
            color: var(--theme-button-bg, var(--color-blue));
            margin-left: var(--spacing-sm);
            align-self: flex-start;
            margin-top: 3px;
            flex-shrink: 0;
        }
        
        .delete-worldbook-btn {
            background: none;
            border: none;
            color: var(--color-ios-red);
            cursor: pointer;
            font-size: var(--font-size-lg);
            padding: var(--spacing-xs);
        }
        
        .mount-item {
            display: flex;
            align-items: center;
            padding: var(--spacing-sm);
            border-bottom: 1px solid var(--color-gray-light);
            cursor: pointer;
        }
        
        .mount-avatar-group {
            width: var(--size-md);
            height: var(--size-md);
            border-radius: var(--radius-round);
            background-color: var(--color-ios-green);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-white);
            font-weight: bold;
            margin-right: var(--spacing-sm);
        }
        
        .empty-emoji-grid {
            text-align: center;
            color: var(--color-gray);
            padding: var(--spacing-lg);
            grid-column: 1 / -1;
        }
        
        .worldbook-mount-item {
            align-items: flex-start;
            padding: var(--spacing-md);
            transition: background-color var(--transition-fast);
        }
        
        .worldbook-mount-item:hover {
            background-color: var(--color-gray-bg-light);
        }
        
        .identity-item {
            display: flex;
            align-items: flex-start;
            padding: var(--spacing-md);
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            cursor: pointer;
            margin-bottom: var(--spacing-sm);
            transition: all var(--transition-fast) ease;
            background-color: var(--color-gray-bg-light);
            min-height: 80px;
        }
        
        .identity-item.selected {
            border-color: var(--theme-button-bg, var(--color-blue));
            background-color: var(--bg-default-10);
        }
        
        .identity-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--color-gray-light);
            margin-right: var(--spacing-md);
            flex-shrink: 0;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-weight: bold;
            font-size: 18px;
        }
        
        .identity-content-flex {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        }

        /* ÂèØÁà±È£éÊ†º‰∏ªÈ¢ò */
        body[data-theme="cute"] {
            --theme-font-family: 'Varela Round', 'Quicksand', sans-serif;
            --theme-font-weight: 500;
            --theme-line-height: 1.6;
            --theme-title-font-size: 20px;
            --theme-title-font-weight: 700;
            --theme-setting-title-font: 'Fredoka One', 'Comfortaa', sans-serif;
            
            --theme-button-bg: rgba(255, 182, 193, 0.9);
            --theme-button-bg-hover: rgba(255, 182, 193, 1);
            --theme-button-color: white;
            --theme-button-border: none;
            --theme-button-radius: 25px;
            --theme-button-shadow: 0 3px 10px rgba(255, 105, 180, 0.4);
            --theme-button-font-size: 16px;
            --theme-button-font-weight: 600;
            --theme-button-letter-spacing: 0.5px;
            
            --theme-button-secondary-bg: rgba(255, 240, 245, 0.8);
            --theme-button-secondary-bg-hover: rgba(255, 240, 245, 0.95);
            --theme-button-secondary-color: #d44d5c;
            --theme-button-secondary-border: rgba(255, 182, 193, 0.3);
            
            --theme-header-bg: rgba(255, 230, 240, 0.8);
            --theme-header-backdrop: blur(10px);
            
            --theme-form-bg: rgba(255, 249, 252, 0.8);
            --theme-input-border: rgba(255, 204, 213, 0.4);
            --theme-input-radius: 20px;
            --theme-input-focus: rgba(255, 182, 193, 0.6);
            --theme-input-focus-shadow: rgba(255, 182, 193, 0.1);
            
            --theme-avatar-bg-1: #ffe6f2;
            --theme-avatar-bg-2: #ffd6e8;
            --theme-avatar-text: #d44d5c;
            --theme-avatar-border: rgba(255, 255, 255, 0.9);
            
            --theme-text-primary: #d44d5c;
            --theme-text-shadow: 0 1px 3px rgba(255, 182, 193, 0.2);
            
            /* ÂèØÁà±‰∏ªÈ¢òÁöÑËÉåÊôØËâ≤ */
            --body-bg: linear-gradient(135deg, #ffeef7, #ffe4f0);
            
            /* ÂèØÁà±‰∏ªÈ¢òÁöÑÊ∞îÊ≥°Ê†∑ÂºèÈáçÂÜô */
            --bubble-glass-bg-ai: rgba(255, 240, 245, 0.8);
            --bubble-glass-bg-user: rgba(255, 182, 193, 0.85);
            --bubble-glass-border-ai: rgba(255, 204, 213, 0.4);
            --bubble-glass-border-user: rgba(255, 182, 193, 0.3);
            --bubble-neon-bg-ai: rgba(255, 240, 245, 0.95);
            --bubble-neon-bg-user: rgba(255, 182, 193, 0.9);
            
            /* ÂèØÁà±‰∏ªÈ¢òÁöÑÊÇ¨ÊµÆÊåâÈíÆ */
            --floating-btn-bg: rgba(255, 182, 193, 0.35);
            --floating-btn-bg-hover: rgba(255, 182, 193, 0.55);
            
            /* ÂèØÁà±‰∏ªÈ¢òÁöÑÊåâÈíÆËÉåÊôØÈáçÂÜô */
            --theme-button-bg-rgba: rgba(255, 182, 193, 0.9);
            --theme-button-secondary-bg-rgba: rgba(255, 240, 245, 0.8);
            
            /* ÂèØÁà±‰∏ªÈ¢òÁöÑÈ¢ÑËßàÊ∞îÊ≥° */
            --preview-glass-ai: rgba(255, 240, 245, 0.8);
            --preview-glass-user: rgba(255, 182, 193, 0.85);
            --preview-glass-border: 1px solid rgba(255, 204, 213, 0.4);
        }
        
        /* ÂèØÁà±‰∏ªÈ¢òÁöÑÁâπÊÆäÊïàÊûú */
        body[data-theme="cute"] .settings-icon {
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(255, 182, 193, 0.3);
        }
        
        body[data-theme="cute"] .form-submit:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 6px 20px rgba(255, 182, 193, 0.4);
        }
        

        
        body[data-theme="cute"] .control-btn {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            box-shadow: 0 3px 10px rgba(255, 182, 193, 0.3);
        }
        
        body[data-theme="cute"] .control-btn:hover {
            transform: scale(1.1) rotate(5deg);
        }
        
        /* ÂèØÁà±‰∏ªÈ¢òÁöÑÂΩïÈü≥ÊåâÈíÆÊ†∑Âºè */
        body[data-theme="cute"] .tool-btn-mini.recording {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%) !important;
            color: white !important;
            border-color: #ff9a9e !important;
            box-shadow: 0 0 0 2px rgba(255, 154, 158, 0.3) !important;
        }
        
        body[data-theme="cute"] .app-title.chat-mode {
            background: linear-gradient(90deg, #ff6b9d, #ffa8cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* ËÅäÂ§©Ê∂àÊÅØÊ∞îÊ≥°Âü∫Á°ÄÊ†∑Âºè */
        .message-bubble { 
            word-break: break-word; 
            line-height: 1.5; 
            font-size: var(--global-font-size, 15px) !important;
            letter-spacing: var(--global-letter-spacing, 0px) !important;
            /* ÈªòËÆ§‰∏çËÆæÁΩÆfont-weightÂíåfont-familyÔºå‰ΩøÁî®ÊµèËßàÂô®ÈªòËÆ§ÂÄºÔºå‰∏ézhangyu.html‰øùÊåÅ‰∏ÄËá¥ */
        }
        
        /* ÂèØÁà±È£éÊ†ºÁöÑËÅäÂ§©Ê∂àÊÅØÊ†∑Âºè */
        body[data-theme="cute"] .message-bubble {
            font-family: 'Quicksand', sans-serif !important;
            font-weight: 500 !important;
        }
        
        /* Á°Æ‰øùÊâÄÊúâÊ∞îÊ≥°Ê†∑ÂºèÈÉΩÂ∫îÁî®ÂÖ®Â±ÄÂ≠ó‰ΩìÂ§ßÂ∞èÂíåÂ≠óË∑ù */
        .message-bubble,
        .bubble-style-default .message-bubble,
        .bubble-style-glass .message-bubble,
        .bubble-style-shadow .message-bubble,
        .bubble-style-tail .message-bubble,
        .bubble-style-gradient .message-bubble,
        .bubble-style-minimal .message-bubble,
        .bubble-style-neon .message-bubble,
        .bubble-style-paper .message-bubble {
            font-size: var(--global-font-size, 15px) !important;
            letter-spacing: var(--global-letter-spacing, 0px) !important;
        }

       

        html { 
            height: 100%; 
            overflow: hidden; 
        }
        
        body {
            height: 100%;
            overflow: hidden;
            margin: 0;
            padding: 8px;
            font-family: var(--theme-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif);
            font-weight: normal;
            background: var(--body-bg, #dcdcdc);
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            transition: all 0.3s ease;
            /* üî•„ÄêÁßªÂä®Á´Ø‰øÆÂ§ç„ÄëÈò≤Ê≠¢ËôöÊãüÈîÆÁõòÂΩ±ÂìçÂ∏ÉÂ±Ä */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        #phone-frame { 
            padding: 12px; 
            background-color: #fff; 
            border-radius: 50px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.25), inset 0 2px 4px rgba(0,0,0,0.1); 
            position: relative; 
            display: none; /* ÈªòËÆ§ÈöêËóèÔºåÁî±Â§ñËßÇËÆæÁΩÆÊéßÂà∂ */
        }
        

        
        #phone-screen {
            width: var(--screen-width);
            height: var(--screen-height);
            background-color: var(--color-black);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border-radius: 25px;
            box-shadow: var(--shadow-phone);
            /* üî•„ÄêÁßªÂä®Á´Ø‰øÆÂ§ç„ÄëÁ°Æ‰øùËôöÊãüÊâãÊú∫ÂßãÁªàÂ±Ö‰∏≠ */
            flex-shrink: 0;
            transform: translateZ(0); /* ÂêØÁî®Á°¨‰ª∂Âä†ÈÄü */
        }
        
        .wallpaper {
            width: 100%;
            height: 100%;
            background: var(--color-wallpaper);
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        #status-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 12px 20px 6px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            z-index: 10;
            font-size: 14px;
            box-sizing: border-box;
            pointer-events: none;
            background: transparent;
        }
        
        #status-bar-time {
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        #status-bar-time::after {
            content: var(--status-icon, "üêæ");
            margin-left: 4px;
            font-size: 12px;
        }
        
        .battery-container {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
        }
        
        .battery-icon {
            width: 20px;
            height: 10px;
            border: 1px solid white;
            border-radius: 4px;
            position: relative;
            padding: 1px;
        }
        
        .battery-icon::after {
            content: '';
            position: absolute;
            right: -2px;
            top: 2px;
            width: 1.5px;
            height: 4px;
            background-color: white;
            border-radius: 0 1px 1px 0;
        }
        
        .battery-level {
            height: 100%;
            background-color: white;
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        .battery-container.charging .battery-level {
            background-color: var(--color-green);
            animation: charge-breath 2s infinite;
        }
        
        .battery-container.charging .battery-text {
            color: var(--color-green);
        }
        
        @keyframes charge-breath {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        #clock-container {
            text-align: center;
            color: white;
            text-shadow: var(--text-shadow-md);
            margin-bottom: 50px;
            flex-shrink: 0;
            margin-top: 70px;
            padding-top: 15px;
        }
        
        #main-time {
            font-size: 80px;
            font-weight: 200;
        }
        
        #main-date {
            font-size: 18px;
            font-weight: 500;
        }
        

        
        /* ‰∏ªÂ±èÂπïÂõõÂùóÂ∏ÉÂ±Ä */
        #home-grid {
            position: absolute;
            top: 58%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 92%;
            aspect-ratio: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 12px;
            margin-top: 0px;
        }

        .home-section {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            padding: 6px;
        }

        /* Â∞èÁªÑ‰ª∂Ê†∑Âºè */
        .widget {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .widget:hover {
            transform: scale(1.02);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        /* ÂõæÁâáÂ∞èÁªÑ‰ª∂ */
        .photo-widget-content {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            border-radius: 16px;
        }

        .photo-placeholder {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            position: absolute;
            z-index: 2;
        }

        .photo-placeholder i {
            font-size: 32px;
            margin-bottom: 8px;
            display: block;
            color: rgba(255, 255, 255, 0.5);
        }

        .photo-widget-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 16px;
            position: absolute;
            top: 0;
            left: 0;
        }

        /* Á∫™ÂøµÊó•Â∞èÁªÑ‰ª∂ */
        .anniversary-widget-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 15px;
        }

        .anniversary-placeholder {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .anniversary-placeholder i {
            font-size: 28px;
            margin-bottom: 8px;
            display: block;
            color: rgba(255, 255, 255, 0.5);
        }

        .anniversary-display {
            width: 100%;
        }

        .anniversary-name {
            font-size: 16px;
            font-weight: 600;
            color: white;
            margin-bottom: 8px;
            text-shadow: var(--text-shadow-sm);
        }

        .anniversary-countdown {
            font-size: 20px;
            font-weight: 700;
            color: #ff69b4;
            margin-bottom: 4px;
            text-shadow: var(--text-shadow-sm);
        }

        .anniversary-date {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: var(--text-shadow-sm);
        }

        /* Âè≥‰∏äËßíÂõõ‰∏™Â∫îÁî®ÁΩëÊ†º */
        .apps-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 12px;
            width: 100%;
            height: 100%;
            padding: 10px;
        }

        /* ‰∏§‰∏™Â∫îÁî®ÁΩëÊ†º */
        .apps-grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr;
            gap: 12px;
            width: 100%;
            height: 100%;
            align-items: center;
        }

        .mini-app {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            text-shadow: var(--text-shadow-sm);
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s ease;
        }

        .mini-app:hover {
            transform: scale(1.05);
        }

        .mini-app:active {
            transform: scale(0.95);
        }

        .mini-app-icon {
            width: 50px;
            height: 50px;
            border-radius: 15px;
            background-color: var(--color-white);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            margin-bottom: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease;
            overflow: hidden;
        }

        .mini-app-icon i {
            font-size: 24px;
            color: var(--color-gray-dark);
        }

        .mini-app-icon .app-icon-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Â∑¶‰∏ãËßíÂ§ßÂ∫îÁî® */
        .large-app {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            text-shadow: var(--text-shadow-sm);
            font-size: 14px;
            font-weight: 500;
            text-align: center;
            text-decoration: none;
            width: 100%;
            height: 100%;
            transition: transform 0.2s ease;
        }

        .large-app:hover {
            transform: scale(1.02);
        }

        .large-app:active {
            transform: scale(0.98);
        }

        .large-app-icon {
            width: 60px;
            height: 60px;
            border-radius: 18px;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            margin-bottom: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            transition: transform 0.2s ease;
            color: white;
        }

        .large-app-icon i {
            font-size: 28px;
            color: white;
        }
        
        .app {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            color: white;
            text-shadow: var(--text-shadow-sm);
            font-size: 14px;
            font-weight: 500;
            text-align: center;
            text-decoration: none;
        }
        
        .app-icon {
            width: 60px;
            height: 60px;
            border-radius: 18px;
            background-color: var(--color-white);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 32px;
            margin-bottom: 8px;
            box-shadow: var(--shadow-lg);
            transition: transform 0.2s ease;
            overflow: hidden;
        }
        
        .app:active .app-icon {
            transform: scale(0.9);
        }
        
        .app-icon i {
            font-size: 30px;
            color: var(--color-gray-dark);
        }
        
        .app .label {
            color: white;
        }

        /* iPhoneÈ£éÊ†ºDockÊ†èÊ†∑Âºè */
        #dock-bar {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 300px;
            z-index: 100;
        }

        .dock-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 12px 20px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dock-app {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            color: white;
            text-shadow: var(--text-shadow-sm);
            font-size: 12px;
            font-weight: 500;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s ease;
        }

        .dock-app:hover {
            transform: translateY(-2px);
        }

        .dock-app:active {
            transform: translateY(0) scale(0.95);
        }

        .dock-app-icon {
            width: 50px;
            height: 50px;
            border-radius: 15px;
            background-color: var(--color-white);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            margin-bottom: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            transition: transform 0.2s ease;
            overflow: hidden;
        }

        .dock-app-icon i {
            font-size: 24px;
            color: var(--color-gray-dark);
        }

        .dock-app-icon .app-icon-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Â∫îÁî®È°µÈù¢Ê†∑Âºè */
        .app-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            display: none;
            flex-direction: column;
            color: black;
        }
        
        /* Â∫îÁî®ÁïåÈù¢Áä∂ÊÄÅÊ†è */
        .app-status-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 12px 20px 6px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: black;
            z-index: 1000;
            font-size: 14px;
            box-sizing: border-box;
            pointer-events: none;
            background: transparent;
            border-bottom: none;
        }
        
        .app-status-time {
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .app-status-time::after {
            content: var(--status-icon, "üêæ");
            margin-left: 4px;
            font-size: 12px;
        }
        
        .app-battery-container {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
        }
        
        .app-battery-icon {
            width: 20px;
            height: 10px;
            border: 1px solid black;
            border-radius: 4px;
            position: relative;
            padding: 1px;
        }
        
        .app-battery-icon::after {
            content: '';
            position: absolute;
            right: -2px;
            top: 2px;
            width: 1.5px;
            height: 4px;
            background-color: black;
            border-radius: 0 1px 1px 0;
        }
        
        .app-battery-level {
            height: 100%;
            background-color: black;
            border-radius: 2px;
            transition: width 0.5s ease;
            width: 100%;
        }
        
        .app-battery-container.charging .app-battery-level {
            background-color: var(--color-green);
            animation: charge-breath 2s infinite;
        }
        
        .app-battery-container.charging .battery-text {
            color: var(--color-green);
        }

        /* AIÂøÉÁéáÊòæÁ§∫Ê†∑Âºè */
        #ai-heartrate-display {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            color: #ff6b6b;
            display: none;
            z-index: 15;
            font-weight: normal;
            transition: all 0.3s ease;
        }

        #ai-heartrate-display .heartrate-number {
            color: #000;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        #ai-heartrate-display .heartrate-unit {
            color: #888;
            font-weight: normal;
        }

        /* ÂøÉÁéáËøáÈ´òÊó∂ÁöÑÁâπÊÆäÊïàÊûú */
        #ai-heartrate-display.high-heartrate {
            animation: heartbeat-pulse 1s infinite;
        }

        #ai-heartrate-display.high-heartrate .heartrate-number {
            color: #ff3366;
        }

        #ai-heartrate-display.very-high-heartrate {
            animation: heartbeat-intense 0.6s infinite;
        }

        #ai-heartrate-display.very-high-heartrate .heartrate-number {
            color: #ff1144;
            font-weight: 900;
        }

        @keyframes heartbeat-pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }

        @keyframes heartbeat-intense {
            0%, 100% { transform: translateX(-50%) scale(1); }
            25% { transform: translateX(-50%) scale(1.08); }
            75% { transform: translateX(-50%) scale(1.03); }
        }
        
        .app-header { 
            position: relative; 
            z-index: 15; 
            flex-shrink: 0; 
            padding: 12px 32px; 
            padding-top: 45px; 
            height: 84px;
            box-sizing: border-box;
            background-color: var(--theme-header-bg); 
            backdrop-filter: var(--theme-header-backdrop); 
            -webkit-backdrop-filter: var(--theme-header-backdrop); 
            border-bottom: 1px solid var(--color-border); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 18px; 
            font-weight: 600; 
            transition: var(--transition-normal);
            overflow: hidden; /* Èò≤Ê≠¢ÂÜÖÂÆπÊ∫¢Âá∫ */
        }

        .header { 
            position: relative; 
            z-index: 15; 
            flex-shrink: 0; 
            padding: 12px 32px; 
            padding-top: 45px;
            height: 84px;
            box-sizing: border-box;
            background-color: var(--theme-header-bg); 
            backdrop-filter: var(--theme-header-backdrop); 
            -webkit-backdrop-filter: var(--theme-header-backdrop); 
            border-bottom: 1px solid var(--color-border); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 18px; 
            font-weight: 600; 
            transition: var(--transition-normal);
            overflow: hidden;
        }

        /* üî•„ÄêÊñ∞Â¢û„Äë‰∏ìÈó®‰∏∫ËÅäÂ§©ÁïåÈù¢ÁöÑheaderÂÆπÂô®Ê∑ªÂä†Áä∂ÊÄÅÊòæÁ§∫ÊîØÊåÅ */
        #api-chat-screen .header {
            overflow: visible;
        }

        .app-title {
            font-weight: var(--theme-title-font-weight, bold);
            font-size: var(--theme-title-font-size, 18px);
            font-family: var(--theme-setting-title-font, var(--theme-font-family));
            text-align: center;
            flex: 1;
            color: var(--color-black);
            text-shadow: none;
            letter-spacing: var(--theme-title-letter-spacing, 0);
        }

        .header .header-actions { display: flex; align-items: center; gap: 10px; position: absolute; right: 20px; top: 70%; transform: translateY(-50%); }

        /* ËÆ∞ÂøÜÊü•ÁúãÂô®‰∏ìÁî®ÁöÑheader-actionsÊ†∑Âºè - Â≠¶‰π†chat appÁöÑÂÆö‰ΩçÊñπÂºè */
        #memory-viewer-screen .header-actions {
            display: flex;
            align-items: center;
            gap: 5px; /* Á®çÂæÆÂáèÂ∞ëÈó¥Ë∑ù‰ª•ÂÆπÁ∫≥3‰∏™ÊåâÈíÆ */
            position: absolute;
            right: 15px; /* Á®çÂæÆÂêëÂ∑¶ÁßªÂä® */
            top: 42px; /* Á®çÂæÆË∞É‰Ωé‰∏ÄÁÇπ */
        }

        /* ËÆ∞ÂøÜÊü•ÁúãÂô®Â∑¶‰æßÊåâÈíÆÁªÑÊ†∑Âºè */
        #memory-viewer-screen .header-left-actions {
            display: flex;
            align-items: center;
            gap: 4px;
            position: absolute;
            left: 50px; /* Âú®ËøîÂõûÊåâÈíÆÂè≥‰æß */
            top: 42px;
        }

        /* Á°Æ‰øùÊåâÈíÆÂ§ßÂ∞è‰∏échat app‰∏ÄËá¥ */
        #memory-viewer-screen .header-action-btn {
            width: 28px;
            height: 28px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            color: #666;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 50%;
            transition: all 0.2s ease;
            border: none;
        }
        .header .back-btn, .header .action-btn { font-size: 24px; cursor: pointer; width: 30px; text-align: center; color: #000000; display: flex; align-items: center; justify-content: center; background: none; border: none; padding: 0; }
        .header .action-btn#offline-mode-btn {
            font-size: 19px; 
        }
        .header .back-btn { position: absolute; left: 20px; }
        .header .header-title { text-align: center; flex: 1; color: #000000; }
        .header .action-btn img { height: 26px; }
        .header .save-btn { font-size: 16px; color: #000000; font-weight: 600; cursor: pointer; position: absolute; right: 20px; }
        
        .back-button {
            position: absolute;
            left: 20px;
            padding: 0;
            background: none;
            border: none;
            font-size: 24px;
            color: #000000;
            cursor: pointer;
            width: 30px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ËßíËâ≤Âç°ÂØºÂÖ•ÂØºÂá∫ÊåâÈíÆÊ†∑Âºè */
        .import-character-btn,
        .export-character-btn {
            position: absolute;
            right: 20px;
            top: 39.5px;
            width: 30px;
            height: 30px;
            background: none;
            border: none;
            font-size: 18px;
            color: #000000;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ÂÆåÂÖ®ÁßªÈô§ÂØºÂÖ•ÂØºÂá∫ÊåâÈíÆÁöÑÊâÄÊúâÊïàÊûú */
        .import-character-btn:hover,
        .export-character-btn:hover,
        .import-character-btn:active,
        .export-character-btn:active {
            transform: none !important;
            background: none !important;
            box-shadow: none !important;
            scale: none !important;
        }
        

        
        .app-content {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        /* ‰∏ñÁïå‰π¶Â∫îÁî®ÁâπÊÆäÂ§ÑÁêÜÔºöÁßªÈô§ÂÜÖËæπË∑ù */
        #worldbook-screen .app-content {
    padding: 0;
}

/* ‰∏ñÁïå‰π¶ÂàÜÁ±ªÈÄâÊã©Âô®Ê†∑Âºè */
.worldbook-category-selector {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.category-selector-content {
    background: white;
    border-radius: 12px;
    max-width: 300px;
    width: 90%;
    max-height: 70%;
    display: flex;
    flex-direction: column;
}

.category-selector-title {
    padding: 20px;
    border-bottom: 1px solid #eee;
    font-size: 16px;
    font-weight: 600;
    text-align: center;
}

.category-options {
    flex: 1;
    overflow-y: auto;
    padding: 10px 0;
}

.category-option {
    padding: 12px 20px;
    border-bottom: 1px solid #f5f5f5;
    cursor: pointer;
    transition: background-color 0.2s;
}

.category-option:hover {
    background-color: #f8f9fa;
}

.category-option:last-child {
    border-bottom: none;
}

.category-name {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 4px;
}

.category-count {
    font-size: 12px;
    color: #666;
}

.empty-category-message {
    padding: 40px 20px;
    text-align: center;
    color: #999;
    font-size: 14px;
    line-height: 1.5;
}

.category-selector-actions {
    padding: 15px 20px;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: center;
}

.category-cancel-btn {
    padding: 8px 24px;
    background: #f8f9fa;
    border: 1px solid #ddd;
    border-radius: 6px;
    color: #666;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
}

.category-cancel-btn:hover {
    background: #e9ecef;
    border-color: #ccc;
}

/* ‰∏ñÁïå‰π¶Êù•Ê∫êÊ†áËØÜÊ†∑Âºè */
.worldbook-source-text {
    font-size: 11px;
    color: #007AFF;
    margin-top: 2px;
    background: rgba(0, 122, 255, 0.1);
    padding: 2px 6px;
    border-radius: 3px;
    display: inline-block;
}
        
        /* ËÆæÁΩÆÂ∫îÁî®Ê†∑Âºè */
        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .settings-item:hover {
            background-color: rgba(0, 0, 0, 0.02);
            padding-left: 15px;
        }
        
        .settings-item-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .setting-label {
            font-weight: var(--theme-button-font-weight, 500);
            font-size: 16px;
            color: var(--theme-text-primary, #333);
            font-family: var(--theme-font-family);
            margin-bottom: 2px;
        }
        
        .setting-desc {
            font-size: 13px;
            color: #666;
            font-family: var(--theme-font-family);
        }
        
        .settings-icon {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            background-color: var(--color-blue);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            flex-shrink: 0;
        }
        
        .settings-icon.wifi { background-color: var(--color-blue); }
        .settings-icon.display { background-color: var(--color-blue); }
        .settings-icon.wallpaper { 
            background-color: var(--color-ios-green); 
            width: 30px !important;
            height: 30px !important;
            border-radius: 6px !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
        }
        .settings-icon.datetime { background-color: var(--color-ios-purple); }
        .settings-icon.notification { background-color: var(--color-ios-red); }
        .settings-icon.about { background-color: var(--color-ios-gray); }
        .settings-icon.data-management { background-color: var(--color-blue); }
        .settings-icon.export { background-color: var(--color-green); }
        .settings-icon.import { background-color: var(--color-blue); }
        .settings-icon.cleanup { background-color: var(--color-orange); }
        .settings-icon.compress { background-color: var(--color-purple); }
        .settings-icon.danger { background-color: var(--color-red); }

        /* Êï∞ÊçÆÁÆ°ÁêÜ‰∏ìÁî®Ê†∑Âºè */
        .data-section {
            margin-bottom: 30px;
        }

        .data-section-title {
            font-size: 14px;
            font-weight: 600;
            color: #666;
            margin-bottom: 15px;
            padding: 0 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .storage-usage {
            background: white;
            border-radius: 12px;
            margin: 0 20px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .storage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .storage-item:last-child {
            border-bottom: none;
        }

        .storage-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0 8px 0;
            border-top: 2px solid #007AFF;
            margin-top: 8px;
            font-weight: 600;
        }

        .storage-label {
            font-size: 15px;
            color: #333;
        }

        .storage-size {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .storage-total .storage-size {
            color: #007AFF;
            font-weight: 600;
        }

        .danger-section .data-section-title {
            color: #dc3545;
        }

        .danger-item {
            background: #fff5f5;
            border: 1px solid #fed7d7;
        }

        .danger-item:hover {
            background: #fef2f2;
        }


        
        /* Á°Æ‰øùÂ£ÅÁ∫∏ÊñáÂ≠óÊ≠£Â∏∏ÊòæÁ§∫ */
        .settings-item-left div:not(.settings-icon) {
            white-space: nowrap;
        }
        
        /* Â±èÂπïÂ∞∫ÂØ∏ÈÄâÊã©Ê†∑Âºè */
        .size-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .size-option:hover {
            background-color: rgba(0, 0, 0, 0.02);
            padding-left: 15px;
        }
        
        .size-option-left {
            flex: 1;
        }
        
        .size-name {
            font-weight: 600;
            font-size: 16px;
            color: #333;
            margin-bottom: 2px;
        }
        
        .size-desc {
            font-size: 13px;
            color: #666;
        }
        
        .size-preview {
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 70px;
        }
        
        .size-preview-rect {
            background-color: #333;
            border-radius: 3px;
            border: 1px solid #666;
        }
        
        .check-icon {
            color: var(--color-ios-green);
            font-size: 18px;
            position: absolute;
            right: 15px;
        }
        
        .settings-toggle {
            position: relative;
            width: 50px;
            height: 30px;
        }
        
        .settings-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .settings-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--color-border-gray);
            transition: .4s;
            border-radius: 34px;
        }
        
        .settings-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .settings-slider {
            background-color: var(--color-ios-green);
        }
        
        input:checked + .settings-slider:before {
            transform: translateX(20px);
        }
        
        /* APIËÆæÁΩÆÁïåÈù¢ */
        .api-settings {
            padding: 15px;
        }
        
        .api-form-group {
            margin-bottom: 15px;
        }
        
        .api-form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .api-form-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--color-border-medium);
            border-radius: 5px;
        }
        
        .api-form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--color-border-medium);
            border-radius: 5px;
        }
        
        .api-form-range {
            width: 100%;
        }
        
        .api-form-submit {
            background-color: var(--color-blue);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* Êó†Á∫øÂ±ÄÂüüÁΩëËÆæÁΩÆ */
        .wifi-settings {
            padding: 15px;
        }
        
        .wifi-network {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        
        .wifi-network:last-child {
            border-bottom: none;
        }
        
        .wifi-network-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .wifi-icon {
            width: 24px;
            height: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .wifi-strength {
            display: flex;
            align-items: center;
            gap: 2px;
        }
        
        .wifi-strength-bar {
            width: 3px;
            height: 10px;
            background-color: var(--color-border-gray);
            border-radius: 1px;
        }
        
        .wifi-strength-bar.active {
            background-color: var(--color-blue);
        }
        
        /* ‰∏ªÈ¢òÈÄâÊã©Âô®Ê†∑Âºè */
        .theme-option {
            display: flex;
            align-items: center;
            padding: 15px 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .theme-option:hover {
            background-color: var(--color-gray-bg);
        }
        
        .theme-option:last-child {
            border-bottom: none;
        }
        
        .theme-preview {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            margin-right: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }
        
        .theme-preview-header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: var(--bg-white-30);
            backdrop-filter: blur(5px);
        }
        
        .theme-preview-content {
            position: absolute;
            bottom: 8px;
            left: 8px;
            right: 8px;
            height: 25px;
            background: var(--bg-white-50);
            border-radius: 4px;
        }
        
        .theme-info {
            flex: 1;
        }
        
        .theme-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .theme-description {
            font-size: 13px;
            color: var(--color-gray);
        }
        
        /* ËÅäÂ§©ÂØπËØùÊ°Ü */
        .chat-dialog {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            height: 100%;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            padding-bottom: 100px; /* ‰∏∫Â∑•ÂÖ∑Ê†è+ËæìÂÖ•Ê°ÜÁïôÂá∫Êõ¥Â§öÁ©∫Èó¥ */
        }
        
        .message-container {
            display: flex;
            margin-bottom: 10px;
            align-items: flex-start;
            position: relative;
        }
        
        .message-container.received {
            justify-content: flex-start;
            padding-left: 5px;
        }
        
        .message-container.sent {
            justify-content: flex-end;
            padding-right: 5px;
        }
        
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--color-border-medium);
            margin-right: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
            position: relative;
            font-size: 14px;
        }
        
        /* Áî®Êà∑Ê∂àÊÅØÁöÑÂ§¥ÂÉèËÆæÁΩÆÂ∑¶ËæπË∑ùËÄå‰∏çÊòØÂè≥ËæπË∑ù */
        .message-container.sent .message-avatar {
            margin-right: 0;
            margin-left: 6px;
        }
        
        .message-bubble {
            max-width: 65%;
            padding: 8px 12px;
            border-radius: 16px;
            position: relative;
            min-width: 0;
            overflow-wrap: break-word;
            transition: all 0.2s ease;
            font-size: var(--global-font-size, 15px) !important;
            letter-spacing: var(--global-letter-spacing, 0px) !important;
        }
        
        /* ========== Ê∞îÊ≥°Ê†∑ÂºèÁ≥ªÁªü ========== */
        
        /* ÈªòËÆ§Ê†∑ÂºèÔºàÁªèÂÖ∏ÂúÜËßíÔºâ */
        .bubble-style-default .message-bubble {
            border-radius: 18px;
            box-shadow: var(--shadow-sm);
            border: none;
            transition: all 0.2s ease;
        }
        
        /* ÊØõÁéªÁíÉÊïàÊûú */
        .bubble-style-glass .message-bubble {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-xl), var(--shadow-md);
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .bubble-style-glass .received .message-bubble {
            background: var(--bubble-glass-bg-ai);
            border: 1px solid var(--bubble-glass-border-ai);
        }
        
        .bubble-style-glass .sent .message-bubble {
            background: var(--bubble-glass-bg-user);
            border: 1px solid var(--bubble-glass-border-user);
        }
        
        .bubble-style-glass .message-bubble:hover {
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            transform: translateY(-1px);
            box-shadow: var(--shadow-mixed), var(--shadow-xl);
        }
        
        /* ÁªèÂÖ∏Èò¥ÂΩ±Ê†∑Âºè */
        .bubble-style-shadow .message-bubble {
            border-radius: 16px;
            box-shadow: 
                var(--shadow-lg),
                var(--shadow-md),
                var(--shadow-sm);
            border: none;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        .bubble-style-shadow .message-bubble:hover {
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.18),
                var(--shadow-lg),
                var(--shadow-md);
            transform: translateY(-2px);
        }
        
        /* Â∏¶Â∞ñËßíÁöÑÁªèÂÖ∏Ê∞îÊ≥° */
        .bubble-style-tail .message-bubble {
            border-radius: 16px;
            position: relative;
            box-shadow: var(--shadow-md);
        }
        
        /* ËßíËâ≤Ê∂àÊÅØÁöÑÂ∞ñËßíÔºàÂ∑¶‰∏äËßíÔºâ - Âä®ÊÄÅÈ¢úËâ≤ÈÄöËøáJSËÆæÁΩÆ */
        .bubble-style-tail .received .message-bubble::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 8px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 8px 10px 0;
            border-color: transparent var(--ai-bubble-color, var(--color-gray-light)) transparent transparent;
        }
        
        /* Áî®Êà∑Ê∂àÊÅØÁöÑÂ∞ñËßíÔºàÂè≥‰∏äËßíÔºâ - Âä®ÊÄÅÈ¢úËâ≤ÈÄöËøáJSËÆæÁΩÆ */
        .bubble-style-tail .sent .message-bubble::before {
            content: '';
            position: absolute;
            right: -6px;
            top: 8px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 10px 8px 0 0;
            border-color: var(--my-bubble-color, var(--color-blue)) transparent transparent transparent;
        }
        
        /* Ê∏êÂèòÊ∞îÊ≥°Ê†∑Âºè */
        .bubble-style-gradient .received .message-bubble {
            background: var(--gradient-gray);
            color: var(--color-gray-dark);
        }
        
        .bubble-style-gradient .sent .message-bubble {
            background: var(--gradient-blue);
            color: white;
        }
        
        .bubble-style-gradient .message-bubble {
            border-radius: 20px;
            box-shadow: var(--shadow-md);
        }
        
        /* ÊûÅÁÆÄÁ∫øÊù°Ê†∑Âºè */
        .bubble-style-minimal .message-bubble {
            border-radius: 12px;
            border: 1.5px solid var(--color-gray-border);
            box-shadow: none;
            background: transparent;
        }
        
        .bubble-style-minimal .received .message-bubble {
            background: var(--color-gray-bg-lighter);
            border-color: var(--color-gray-border);
            color: var(--color-gray-dark);
        }
        
        .bubble-style-minimal .sent .message-bubble {
            background: var(--color-blue-light);
            border-color: var(--color-blue);
            color: var(--color-blue);
        }
        
        /* ÈúìËôπÂèëÂÖâÊ†∑Âºè */
        .bubble-style-neon .message-bubble {
            border-radius: 15px;
            border: 1px solid;
            animation: neonPulse 2s ease-in-out infinite alternate;
        }
        
        .bubble-style-neon .received .message-bubble {
            background: var(--bubble-neon-bg-ai);
            border-color: var(--color-neon-green);
            box-shadow: var(--shadow-neon-green);
            color: var(--color-gray-dark);
        }
        
        .bubble-style-neon .sent .message-bubble {
            background: var(--bubble-neon-bg-user);
            border-color: var(--color-neon-blue);
            box-shadow: var(--shadow-neon-blue);
            color: white;
        }
        
        @keyframes neonPulse {
            from {
                box-shadow: var(--shadow-neon-green-small);
            }
            to {
                box-shadow: var(--shadow-neon-green-large);
            }
        }
        
        /* Á∫∏Âº†Âç°ÁâáÊ†∑Âºè */
        .bubble-style-paper .message-bubble {
            border-radius: 6px;
            border: var(--paper-border);
            transition: all 0.3s ease;
            position: relative;
        }
        
        /* Á∫∏Âº†Ë¥®ÊÑüËÉåÊôØÁ∫πÁêÜ */
        .bubble-style-paper .received .message-bubble {
            position: relative;
            color: #2c2c2c;
            text-shadow: var(--paper-text-shadow);
        }
        
        /* Êé•Êî∂Ê∂àÊÅØÁöÑÊ∞îÊ≥°Êà≥ */
        .bubble-style-paper .received .message-bubble::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 6px 8px 6px 0;
            border-color: transparent var(--ai-bubble-color, var(--color-gray-light)) transparent transparent;
        }
        
        .bubble-style-paper .received .message-bubble::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 118, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(120, 119, 118, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(139, 134, 128, 0.03) 0%, transparent 50%);
            border-radius: 6px;
            pointer-events: none;
            z-index: 0;
        }
        
        .bubble-style-paper .message-bubble > * {
            position: relative;
            z-index: 2;
        }
        
        .bubble-style-paper .sent .message-bubble {
            position: relative;
            color: white;
            border-color: var(--border-white-15);
        }
        
        /* ÂèëÈÄÅÊ∂àÊÅØÁöÑÊ∞îÊ≥°Êà≥ */
        .bubble-style-paper .sent .message-bubble::before {
            content: '';
            position: absolute;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 6px 0 6px 8px;
            border-color: transparent transparent transparent var(--my-bubble-color, var(--color-blue));
        }
        
        .bubble-style-paper .sent .message-bubble::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
            border-radius: 6px;
            pointer-events: none;
            z-index: 0;
        }
        

        
        .bubble-style-paper .message-bubble:hover {
            transform: translateY(-1px) rotateX(1deg);
        }
        
        /* ========== Ê∞îÊ≥°Ê†∑ÂºèÈÄâÊã©Âô®UI ========== */
        
        .bubble-style-section {
            margin-bottom: 25px;
        }
        
        .bubble-style-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .bubble-style-option {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fafafa;
            text-align: center;
        }
        
        .bubble-style-option:hover {
            border-color: var(--theme-button-bg, #4a84c1);
            background: var(--bg-default-05);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .bubble-style-option.selected {
            border-color: var(--theme-button-bg, #4a84c1);
            background: var(--bg-default-10);
            box-shadow: 0 4px 15px var(--bg-default-shadow);
        }
        
        .style-preview {
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }
        
        .preview-bubble {
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 12px;
            max-width: 80px;
            text-align: center;
            word-break: break-word;
        }
        
        .sent-preview {
            background: #007AFF;
            color: white;
            align-self: flex-end;
        }
        
        .received-preview {
            background: #f0f0f0;
            color: #333;
            align-self: flex-start;
        }
        
        /* È¢ÑËßàÊ∞îÊ≥°ÁâπÊÆäÊ†∑Âºè */
        .bubble-style-glass .preview-bubble {
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            border: var(--preview-glass-border);
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
        }
        
        .bubble-style-glass .sent-preview {
            background: var(--preview-glass-user);
        }
        
        .bubble-style-glass .received-preview {
            background: var(--preview-glass-ai);
        }
        
        .bubble-style-shadow .preview-bubble {
            box-shadow: var(--shadow-form-mixed), var(--shadow-sm);
            border-radius: 14px;
        }
        
        .bubble-style-tail .preview-bubble {
            position: relative;
        }
        
        .bubble-style-tail .sent-preview::before {
            content: '';
            position: absolute;
            right: -5px;
            top: 6px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 8px 6px 0 0;
            border-color: var(--color-blue) transparent transparent transparent;
        }
        
        .bubble-style-tail .received-preview::before {
            content: '';
            position: absolute;
            left: -5px;
            top: 6px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 6px 8px 0;
            border-color: transparent #f0f0f0 transparent transparent;
        }
        
        .bubble-style-gradient .sent-preview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .bubble-style-gradient .received-preview {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }
        
        .bubble-style-minimal .preview-bubble {
            border: 1px solid #e0e0e0;
            background: transparent;
        }
        
        .bubble-style-minimal .sent-preview {
            background: #f0f8ff;
            border-color: var(--color-blue);
            color: var(--color-blue);
        }
        
        .bubble-style-minimal .received-preview {
            background: #fafafa;
            color: #333;
        }
        
        .bubble-style-neon .preview-bubble {
            border: 1px solid;
            box-shadow: var(--shadow-neon-green-8px);
        }
        
        .bubble-style-neon .sent-preview {
            border-color: var(--color-neon-blue);
            box-shadow: var(--shadow-neon-blue-8px);
        }
        
        .bubble-style-neon .received-preview {
            border-color: var(--color-neon-green);
            box-shadow: var(--shadow-neon-green-8px);
        }
        
        .bubble-style-paper .preview-bubble {
            border: var(--paper-border);
            border-radius: 6px;
            position: relative;
        }
        
        /* È¢ÑËßàÊ∞îÊ≥°ÁöÑÊ∞îÊ≥°Êà≥ */
        .bubble-style-paper .sent-preview::before {
            content: '';
            position: absolute;
            right: -4px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 4px 0 4px 5px;
            border-color: transparent transparent transparent var(--color-blue);
        }
        
        .bubble-style-paper .received-preview::before {
            content: '';
            position: absolute;
            left: -4px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 4px 5px 4px 0;
            border-color: transparent #f0f0f0 transparent transparent;
        }
        
        .bubble-style-paper .sent-preview {
            background: var(--color-blue);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .bubble-style-paper .received-preview {
            background: var(--color-gray-light);
            color: var(--color-gray-darker);
            text-shadow: 0 0.5px 1px rgba(255, 255, 255, 0.3);
        }
        
        .style-name {
            font-size: 13px;
            font-weight: 600;
            color: #666;
        }
        
        .bubble-style-option.selected .style-name {
            color: var(--theme-button-bg, #4a84c1);
        }
        
        .received .message-bubble {
            background-color: var(--color-gray-light);
            margin-left: 4px;
        }
        
        .sent .message-bubble {
            background-color: var(--color-blue);
            color: white;
            margin-right: 4px;
        }
        
        .message-image {
            max-width: 150px;  /* ‰ªé200pxÂáèÂ∞èÂà∞150px */
            max-height: 150px;  /* ‰ªé200pxÂáèÂ∞èÂà∞150px */
            border-radius: 10px;
            margin-top: 5px;
            cursor: pointer;
            transition: transform 0.2s ease;
            object-fit: cover;  /* Á°Æ‰øùÂõæÁâáÈÄÇÂ∫îÂÆπÂô® */
        }
        
        .message-image:hover {
            transform: scale(1.05);
        }
        
        .message-emoji {
            max-width: 100px;  /* ‰ªé120pxÂáèÂ∞èÂà∞100px */
            max-height: 100px;  /* ‰ªé120pxÂáèÂ∞èÂà∞100px */
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .message-emoji:hover {
            transform: scale(1.1);  /* ‰ªé1.05Â¢ûÂä†Âà∞1.1 */
        }
        
        /* Êó†Ê∞îÊ≥°ÁöÑË°®ÊÉÖÂåÖÊ†∑Âºè */
        .message-container.emoji-only .message-bubble {
            background: none !important;
            box-shadow: none !important;
            border: none !important;
            padding: 0 !important;
        }
        
        /* ÂõæÁâáÈ¢ÑËßàÊ®°ÊÄÅÊ°Ü */
        .image-preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            cursor: zoom-out;
            padding: 20px;
            box-sizing: border-box;
        }

        .image-preview-modal img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            cursor: zoom-out;
            transition: transform 0.3s ease;
        }

        .image-preview-modal img:hover {
            transform: scale(1.02);
        }

        /* ÁßªÂä®ËÆæÂ§á‰ºòÂåñ */
        @media (max-width: 768px) {
            .image-preview-modal {
                padding: 10px;
            }

            .image-preview-modal img {
                border-radius: 5px;
            }
        }
        
        /* ÁâπÊÆäÊ∂àÊÅØÁ±ªÂûãÊ†∑Âºè - ËØ≠Èü≥Ê∂àÊÅØ */
        .voice-message {
            display: flex;
            align-items: center;
            padding: 3px 7px;
            border-radius: 13px;
            min-width: 49px;
            max-width: 99px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .voice-message:hover {
            transform: translateY(-1px);
        }

        .message-container.sent .voice-message {
            flex-direction: row-reverse;
        }

        /* Ê≥¢ÂΩ¢Âä®ÁîªÂÆπÂô® */
        .voice-wave {
            display: flex;
            align-items: center;
            height: 13px;
            gap: 1px;
            flex-grow: 1;
            margin: 0 3px;
        }

        .voice-wave .wave-bar {
            width: 2px;
            background-color: currentColor;
            border-radius: 1px;
            animation: wave-quiet 1.5s ease-in-out infinite;
        }

        @keyframes wave-quiet {
            0%, 100% {
                height: 2px;
            }
            50% {
                height: 6px;
            }
        }

        .voice-wave .wave-bar:nth-child(2) { animation-delay: 0.2s; }
        .voice-wave .wave-bar:nth-child(3) { animation-delay: 0.4s; }
        .voice-wave .wave-bar:nth-child(4) { animation-delay: 0.6s; }
        .voice-wave .wave-bar:nth-child(5) { animation-delay: 0.8s; }

        .voice-duration {
            font-size: 10px;
            font-weight: 500;
            color: var(--color-text-secondary);
            white-space: nowrap;
        }

        .message-container.sent .voice-duration {
            color: rgba(255, 255, 255, 0.8);
        }

        .message-container.received .voice-duration {
            color: var(--color-text-secondary);
        }



        /* ËØ≠Èü≥Ê∂àÊÅØÂÆπÂô® */
        .voice-message-container {
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        /* Áî®Êà∑ËØ≠Èü≥Ê∂àÊÅØÂÆπÂô®Âè≥ÂØπÈΩê */
        .voice-message-container.sent {
            align-self: flex-end;
            align-items: flex-end;
        }

        /* AIËØ≠Èü≥Ê∂àÊÅØÂÆπÂô®Â∑¶ÂØπÈΩê */
        .voice-message-container.received {
            align-self: flex-start;
            align-items: flex-start;
        }

        /* ËØ≠Èü≥ÂÜÖÂÆπÂ±ïÂºÄÊ†∑Âºè */
        .voice-text-content {
            display: none;
            margin-top: 3px;
            padding: 5px 9px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 11px;
            font-size: 12px;
            line-height: 1.4;
            color: #333;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            word-break: break-word;
            width: fit-content;
            max-width: 145px;
            animation: voiceTextFadeIn 0.3s ease-in-out;
            border: 1px solid rgba(0,0,0,0.06);
            position: relative;
        }

        /* AIËØ≠Èü≥ÊñáÂ≠óÊ∞îÊ≥°Â∑¶ÂØπÈΩê - Ë∑üÈöèreceivedÊ∂àÊÅØÁöÑÂØπÈΩêÊñπÂºè */
        .voice-message-container.received .voice-text-content {
            align-self: flex-start;
            margin-left: 0;
            margin-right: auto;
        }

        /* Áî®Êà∑ËØ≠Èü≥ÊñáÂ≠óÊ∞îÊ≥°Âè≥ÂØπÈΩê - Ë∑üÈöèsentÊ∂àÊÅØÁöÑÂØπÈΩêÊñπÂºè */
        .voice-message-container.sent .voice-text-content {
            align-self: flex-end;
            margin-left: auto;
            margin-right: 0;
        }

        .voice-text-content.visible {
            display: block;
        }

        @keyframes voiceTextFadeIn {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ÂΩïÈü≥ÊåâÈíÆÊøÄÊ¥ªÁä∂ÊÄÅ */
        .tool-btn-mini.recording {
            background-color: var(--theme-button-bg, #4a84c1) !important;
            color: var(--theme-button-color, white) !important;
            border-color: var(--theme-button-bg, #4a84c1) !important;
            box-shadow: 0 0 0 2px var(--theme-button-shadow-color, rgba(74, 132, 193, 0.3));
        }
        
        /* Á≥ªÁªüÊ∂àÊÅØÊ†∑Âºè */
        .system-message {
            text-align: center;
            color: var(--color-gray-medium);
            font-size: var(--font-size-sm);
            padding: 4px 8px;
            margin: 0;
            background: transparent;
            border: none;
            display: inline-block;
            max-width: 80%;
            width: fit-content;
        }

        /* Êí§ÂõûÊ∂àÊÅØÊ†∑Âºè */
        .recalled-message {
            text-align: center;
            color: #999;
            font-size: 12px;
            margin: 5px 0;
            padding: 4px 8px;
            width: fit-content;
            max-width: 80%;
            background: transparent;
            border: none;
            animation: recallFadeIn 0.5s ease-in-out;
            position: relative; /* üî•„Äê‰øÆÂ§ç„Äë‰∏∫ÈÄâ‰∏≠Ê†áËÆ∞Êèê‰æõÂÆö‰ΩçÂü∫ÂáÜ */
        }
        
        .recalled-message .original-text {
            color: #999;
            font-size: 11px;
            margin-top: 4px;
            padding-top: 4px;
        }
        
        /* üî•„ÄêÊñ∞Â¢û„ÄëÊí§ÂõûÊ∂àÊÅØÈÄâ‰∏≠Áä∂ÊÄÅ - ÊòæÁ§∫ÂãæÈÄâÊ†áËÆ∞ */
        [data-message-id].selected .recalled-message::after {
            content: '‚úî';
            position: absolute;
            right: -25px;
            top: 50%;
            transform: translateY(-50%);
            background-color: var(--theme-button-bg, #4a84c1);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Êí§ÂõûÊ∂àÊÅØÂåÖË£ÖÂô® */
        .message-wrapper.system {
            display: flex;
            justify-content: center;
            width: 100%;
            margin: 5px 0;
        }

        /* Êí§ÂõûÂä®Áîª */
        @keyframes recallFadeIn {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(10px); }
        }
        
        /* üî•„ÄêÈáçÊñ∞ËÆæËÆ°„ÄëÊ∂àÊÅØ‰∏äÊñπÊåâÈíÆÊù°Ê†∑Âºè - ÁôΩÂ∫ïÈªëÂ≠ó */
        .message-action-bar {
            position: absolute;
            top: -45px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 22px;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 20px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            white-space: nowrap;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .message-action-bar.show {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(-5px);
        }

        .message-action-btn {
            color: #333;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 12px;
            transition: all 0.2s ease;
            background: transparent;
            border: none;
            min-width: 40px;
            text-align: center;
        }

        .message-action-btn:hover {
            background: rgba(0, 0, 0, 0.1);
            transform: scale(1.05);
        }

        .message-action-btn:active {
            transform: scale(0.95);
        }
        
        /* üî•„ÄêÊñ∞Â¢û„ÄëÊ∂àÊÅØÂÆπÂô®Áõ∏ÂØπÂÆö‰ΩçÔºåÁî®‰∫éÊîæÁΩÆÊåâÈíÆÊù° */
        .message-container {
            position: relative;
            /* üî•„ÄêÂ¢ûÂº∫„ÄëÂÖ®Èù¢Á¶ÅÁî®SafariÈïøÊåâËèúÂçïÂíåÊñáÊú¨ÈÄâÊã© */
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            /* üî•„ÄêÊñ∞Â¢û„ÄëÁ¶ÅÁî®SafariÁöÑÈïøÊåâ‰∏ä‰∏ãÊñáËèúÂçï */
            -webkit-context-menu: none;
            /* üî•„ÄêÊñ∞Â¢û„ÄëÁ¶ÅÁî®iOS SafariÁöÑÊñáÊú¨ÈÄâÊã©ÂíåÂ§çÂà∂Á≤òË¥¥ */
            -webkit-user-drag: none;
            -webkit-user-modify: read-only;
        }

        /* üî•„ÄêÁªü‰∏ÄÊ†∑Âºè„ÄëÊâÄÊúâ‰∏ªÈ¢ò‰∏ãÊåâÈíÆÊù°ÈÉΩ‰øùÊåÅÁôΩÂ∫ïÈªëÂ≠ó */

        /* üî•„ÄêÊñ∞Â¢û„ÄëËÆ∞ÂøÜÊü•ÁúãÂô®‰∏≠ÁöÑÊìç‰ΩúÊåâÈíÆÊ†∑Âºè */
        .memory-action-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 6px;
            padding: 6px 8px;
            margin: 0 3px;
            cursor: pointer;
            font-size: 12px;
            color: #333;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 28px;
            height: 28px;
        }

        .memory-action-btn:hover {
            background: rgba(0, 123, 255, 0.1);
            border-color: rgba(0, 123, 255, 0.3);
            color: #007bff;
            transform: scale(1.05);
        }

        .memory-action-btn.edit-btn:hover {
            background: rgba(40, 167, 69, 0.1);
            border-color: rgba(40, 167, 69, 0.3);
            color: #28a745;
        }

        .memory-action-btn.view-btn:hover {
            background: rgba(23, 162, 184, 0.1);
            border-color: rgba(23, 162, 184, 0.3);
            color: #17a2b8;
        }

        .memory-action-btn i {
            font-size: 11px;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÂâßÊÉÖÊÄªÁªìËÆ∞ÂøÜÈ°πÁöÑÁâπÊÆäÊ†∑Âºè */
        .memory-item-type.storyline {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .memory-item[data-memory-type="storyline"] {
            border-left: 4px solid #667eea;
        }

        .memory-item[data-memory-type="storyline"] .memory-item-content {
            background: rgba(102, 126, 234, 0.05);
            border-radius: 6px;
            padding: 12px;
            margin: 8px 0;
            max-height: 80px;
            overflow: hidden;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            line-clamp: 3;
        }

        /* Ê∂àÊÅØÁºñËæëÊåáÁ§∫Âô®Ê†∑Âºè */
        .message-edited-indicator {
            position: absolute;
            bottom: 4px;
            right: 8px;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.7);
            background: rgba(0, 0, 0, 0.2);
            padding: 2px 6px;
            border-radius: 8px;
            pointer-events: none;
            z-index: 1;
            font-weight: 500;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }

        /* Áî®Êà∑Ê∂àÊÅØÁöÑÁºñËæëÊåáÁ§∫Âô® */
        .message-container.sent .message-edited-indicator {
            color: rgba(255, 255, 255, 0.8);
            background: rgba(0, 0, 0, 0.15);
        }

        /* AIÊ∂àÊÅØÁöÑÁºñËæëÊåáÁ§∫Âô® */
        .message-container.received .message-edited-indicator {
            color: rgba(0, 0, 0, 0.6);
            background: rgba(255, 255, 255, 0.3);
        }

        /* Ê∑±Ëâ≤‰∏ªÈ¢òÈÄÇÈÖç */
        .dark-theme .message-container.received .message-edited-indicator {
            color: rgba(255, 255, 255, 0.7);
            background: rgba(0, 0, 0, 0.2);
        }

        /* ÁîµËØùÈÄöËØùÁïåÈù¢Ê†∑Âºè */
        .call-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, #2c3e50, #34495e);
    z-index: 0;
    opacity: 0.95;
}

/* ‰øÆÂ§çÈ°∂ÈÉ®Áä∂ÊÄÅÊ†è */
#phone-call-screen .app-status-bar,
#incoming-call-screen .app-status-bar {
    background: transparent;
    color: white;
    z-index: 10;
    position: relative;
}

        .call-background.incoming {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .call-content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 20px;
            padding-top: 60px;
        }

        .incoming-call-content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 20px;
            padding-top: 60px;
            justify-content: space-between;
        }

        .call-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        .call-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    overflow: hidden;
    margin-bottom: 15px;
    border: 2px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    background-color: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 5;
    animation: breathe 3s ease-in-out infinite;
}

        @keyframes breathe {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }
            50% { 
                transform: scale(1.03); 
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            }
        }

.call-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
}

        .call-avatar.large-avatar {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
        }

        .call-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .call-name {
            color: white;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .call-status {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .call-time {
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
        }

        .call-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            margin-top: 10px;
            text-align: center;
            max-width: 80%;
            align-self: center;
        }

        .call-message-container {
            flex: 1;
            overflow-y: auto;
            padding: 10px 20px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            max-height: 40vh; /* ÈôêÂà∂ÊúÄÂ§ßÈ´òÂ∫¶‰∏∫ËßÜÂè£È´òÂ∫¶ÁöÑ40% */
            min-height: 150px; /* Á°Æ‰øùÊúÄÂ∞èÊòæÁ§∫È´òÂ∫¶ */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }

        .call-message-container::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }

        .call-message {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            padding: 8px 14px;
            margin: 6px 0;
            color: white;
            max-width: 85%;
            align-self: center; /* Â±Ö‰∏≠ÊòæÁ§∫ */
            word-break: break-word;
            animation: messageSlideIn 0.5s ease-out;
            text-align: center; /* ÊñáÂ≠óÂ±Ö‰∏≠ */
            font-size: 14px;
            line-height: 1.3;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .call-message.sent {
            background-color: rgba(52, 152, 219, 0.4);
            align-self: center; /* ‰πüÂ±Ö‰∏≠ÊòæÁ§∫ */
        }

        .call-message.received {
            background-color: rgba(255, 255, 255, 0.15);
            align-self: center; /* ‰πüÂ±Ö‰∏≠ÊòæÁ§∫ */
        }

        /* AIÊ≠£Âú®ËØ¥ËØùÁöÑÊåáÁ§∫Âô® */
        .call-typing-indicator {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 12px 18px;
            margin: 8px 0;
            color: white;
            align-self: center;
            text-align: center;
            animation: messageSlideIn 0.3s ease-out;
        }

        .call-typing-dots {
            display: inline-flex;
            gap: 4px;
            align-items: center;
        }

        .call-typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.7);
            animation: callTypingPulse 1.4s infinite ease-in-out;
        }

        .call-typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .call-typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .call-typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes callTypingPulse {
            0%, 80%, 100% {
                opacity: 0.3;
                transform: scale(0.8);
            }
            40% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .call-input-area {
    display: flex;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 5px;
    margin-bottom: 15px;
    position: relative;
    z-index: 10;
}

.call-text-input {
    flex: 1;
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    color: white !important;
    padding: 10px 15px;
    font-size: 16px;
    outline: none !important;
    -webkit-appearance: none !important;
    appearance: none !important;
    box-shadow: none !important;
}

/* Èò≤Ê≠¢ËæìÂÖ•Ê°ÜÂú®iOSÂíåAndroid‰∏äÁöÑÈªòËÆ§Ê†∑Âºè */
input.call-text-input,
textarea.call-text-input {
    -webkit-appearance: none !important;
    appearance: none !important;
    background-color: transparent !important;
    background: transparent !important;
}

.call-text-input::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

.call-text-input:focus {
    background: transparent !important;
    background-color: transparent !important;
    color: white !important;
    outline: none !important;
    box-shadow: none !important;
    border: none !important;
    -webkit-appearance: none !important;
    appearance: none !important;
}

.call-text-input:focus-visible {
    background: transparent !important;
    background-color: transparent !important;
    outline: none !important;
    box-shadow: none !important;
}

/* Âº∫Âà∂Ë¶ÜÁõñËæìÂÖ•Ê°ÜÊ†∑Âºè */
.call-input-area input, 
.call-input-area textarea,
.call-input-area .call-text-input {
    background: transparent !important;
    background-color: transparent !important;
    color: white !important;
    border: none !important;
    box-shadow: none !important;
    -webkit-appearance: none !important;
    appearance: none !important;
}

        /* Èò≤Ê≠¢Ëá™Âä®Â°´ÂÖÖËÉåÊôØËâ≤ */
        .call-text-input:-webkit-autofill,
        .call-text-input:-webkit-autofill:hover,
        .call-text-input:-webkit-autofill:focus,
        .call-text-input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px transparent inset !important;
            -webkit-text-fill-color: white !important;
            background: transparent !important;
            background-color: transparent !important;
            transition: background-color 5000s ease-in-out 0s;
        }

        /* Êõ¥Âº∫ÂäõÁöÑËæìÂÖ•Ê°ÜÊ†∑ÂºèË¶ÜÁõñ */
        #call-input,
        input#call-input,
        .call-text-input,
        input.call-text-input {
            background: transparent !important;
            background-color: transparent !important;
            color: white !important;
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
            -webkit-appearance: none !important;
            appearance: none !important;
        }

        #call-input:focus,
        input#call-input:focus,
        .call-text-input:focus,
        input.call-text-input:focus {
            background: transparent !important;
            background-color: transparent !important;
            color: white !important;
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
        }

        .call-send-btn {
            background: transparent;
            border: none;
            color: white;
            width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s ease;
        }

        .call-send-btn:hover {
            color: #3498db;
        }

        .call-controls {
            display: flex;
            justify-content: center;
        }

        .call-control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .end-call-btn {
    background-color: #FF3B30;
    color: transparent; /* ÈöêËóèÂéüÊúâÂõæÊ†á */
    width: 60px;
    height: 60px;
    border-radius: 50%;
    box-shadow: 0 4px 8px rgba(255, 59, 48, 0.4);
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    position: relative;
    border: none;
    cursor: pointer;
}

.end-call-btn::before {
    content: "";
    position: absolute;
    width: 28px;
    height: 28px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'%3E%3Cpath d='M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29l-2.48-2.48c-.18-.18-.29-.43-.29-.71 0-.27.11-.52.29-.7C1.87 10.08 7.5 8 12 8s10.13 2.08 11.71 3.67c.18.18.29.43.29.7 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.73-1.68-1.36-2.66-1.85-.33-.16-.56-.51-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    transform: rotate(360deg);
}

        .speaker-btn {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .speaker-btn.active {
            background-color: #2ecc71;
            color: white;
        }

        .call-control-btn:hover {
            transform: scale(1.1);
        }

        .call-control-btn:active {
            transform: scale(0.95);
        }

        .incoming-call-controls {
            display: flex;
            justify-content: space-around;
            padding: 0 20px;
            margin-bottom: 40px;
        }

        .incoming-call-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: transparent;
            border: none;
            cursor: pointer;
        }

        .call-btn-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .reject-btn .call-btn-icon {
            background-color: #e74c3c;
            color: transparent; /* ÈöêËóèÂéüÊúâÂõæÊ†á */
            position: relative;
        }
        
        .reject-btn .call-btn-icon::before {
            content: "";
            position: absolute;
            width: 32px;
            height: 32px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'%3E%3Cpath d='M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29l-2.48-2.48c-.18-.18-.29-.43-.29-.71 0-.27.11-.52.29-.7C1.87 10.08 7.5 8 12 8s10.13 2.08 11.71 3.67c.18.18.29.43.29.7 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.73-1.68-1.36-2.66-1.85-.33-.16-.56-.51-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z'/%3E%3C/svg%3E");
            background-size: contain;
            background-repeat: no-repeat;
            transform: rotate(360deg);
            top: 50%;
            left: 50%;
            margin-left: -16px;
            margin-top: -16px;
        }

        .accept-btn .call-btn-icon {
            background-color: #2ecc71;
            color: white;
        }

        .call-btn-text {
            color: white;
            font-size: 16px;
        }

        .incoming-call-btn:hover .call-btn-icon {
            transform: scale(1.1);
        }

        .incoming-call-btn:active .call-btn-icon {
            transform: scale(0.95);
        }

        @keyframes ringing {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        .ringing-animation {
            /* ÁßªÈô§ÊôÉÂä®Âä®ÁîªÔºå‰ΩøÁî®ÂëºÂê∏ÊïàÊûú */
            animation: breathe 3s ease-in-out infinite;
        }

        /* ÈÄöËØùËÆ∞ÂΩïÊ∂àÊÅØÊ†∑Âºè */
        .call-record-message {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background-color: rgba(0, 0, 0, 0.03);
            border-radius: 12px;
            margin: 5px 0;
            font-style: italic;
            color: #666;
            font-size: 13px;
        }

        .call-record-message i {
            margin-right: 10px;
            font-size: 18px;
            color: #888;
        }

        .call-record-message.missed i {
            color: #e74c3c;
        }

        .call-record-message.completed i {
            color: #2ecc71;
        }

        .call-record-duration {
            margin-left: auto;
            font-size: 12px;
            color: #888;
            padding-left: 8px;
        }
        
        .ai-image-container {
            max-width: 200px;
        }
        
        .ai-image-container .message-image {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 5px;
        }
        
        .image-description {
            font-size: 12px;
            opacity: 0.8;
            padding: 5px 0;
            line-height: 1.3;
        }
        
        .transfer-message {
            display: flex;
            align-items: center;
            padding: 15px;
            background: var(--gradient-pink);
            border-radius: 12px;
            min-width: 150px;
            box-shadow: var(--shadow-md);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .transfer-message:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-hover);
        }
        
        .transfer-message i {
            font-size: 20px;
            margin-right: 12px;
            background: var(--bg-white-30);
            padding: 8px;
            border-radius: 50%;
        }
        
        .transfer-content {
            flex: 1;
        }
        
        .transfer-amount {
            font-size: 18px;
            font-weight: bold;
            color: var(--color-gray-dark);
            margin-bottom: 2px;
        }
        
        .transfer-note {
            font-size: 12px;
            color: var(--color-gray);
        }
        
        /* Ê≠£Âú®ËæìÂÖ•ÊèêÁ§∫ */
        .typing-indicator {
            text-align: center;
            padding: 8px 20px;
            margin: 5px 0;
            color: var(--color-gray);
            font-size: 13px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
            position: absolute;
            bottom: 70px;
            left: 0;
            right: 0;
        }
        
        .typing-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .typing-indicator .dots {
            display: inline-block;
        }
        
        .typing-indicator .dots::before {
            content: '...';
            font-size: 16px;
            color: var(--color-gray);
            animation: typing-dot 1.4s infinite ease-in-out;
        }
        
        .typing-indicator .dots::after {
            content: '';
        }
        
        .typing-indicator .dot3 {
            display: none;
        }
        
        @keyframes typing-dot {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 1;
            }
        }
        
        /* Êü•ÁúãÂéÜÂè≤Ê∂àÊÅØÊåâÈíÆ */
        .load-more-messages {
            text-align: center;
            padding: 15px 20px;
            margin: 10px 20px;
            background: var(--bg-white-90);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border-black-05);
            box-shadow: var(--shadow-md);
        }
        
        .load-more-messages:hover {
            background: var(--bg-white-95);
            transform: translateY(-1px);
            box-shadow: var(--shadow-hover);
        }
        
        .load-more-content {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-gray);
            font-size: 14px;
            font-weight: 500;
        }
        
        .load-more-content i {
            margin-right: 8px;
            font-size: 12px;
            opacity: 0.7;
        }
        
        /* Ê∂àÊÅØÂºïÁî®Ê†∑Âºè */
        .reply-reference {
            margin-bottom: 6px;
            padding: 6px 10px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 6px;
            border-left: 2px solid #007AFF;
            font-size: 12px;
            position: relative;
            max-width: 85%; /* ÈôêÂà∂ÊúÄÂ§ßÂÆΩÂ∫¶ÔºåÈò≤Ê≠¢Ë∂ÖÂá∫Â±èÂπï */
        }

        .reply-reference-line {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #007AFF;
            border-radius: 1px 0 0 1px;
        }

        .reply-reference-content {
            padding-left: 6px;
        }

        .reply-reference-sender {
            font-weight: 600;
            color: #007AFF;
            margin-bottom: 1px;
            font-size: 11px;
        }

        .reply-reference-message {
            color: #666;
            line-height: 1.2;
            word-break: break-word;
            font-size: 11px;
        }

        /* ÂèëÈÄÅÊ∂àÊÅØ‰∏≠ÁöÑÂºïÁî®Ê†∑ÂºèÔºàÁî®Êà∑Ê∂àÊÅØÔºâ */
        .message-container.sent .reply-reference {
            background: rgba(255, 255, 255, 0.2);
            border-left-color: rgba(255, 255, 255, 0.8);
        }

        .message-container.sent .reply-reference-line {
            background: rgba(255, 255, 255, 0.8);
        }

        .message-container.sent .reply-reference-sender {
            color: rgba(0, 0, 0, 0.8); /* Êîπ‰∏∫Ê∑±Ëâ≤Ôºå‰∏éÊ∂àÊÅØÂÜÖÂÆπ‰∏ÄËá¥ */
        }

        .message-container.sent .reply-reference-message {
            color: rgba(0, 0, 0, 0.7); /* üî•„Äê‰øÆÂ§ç„ÄëÊîπ‰∏∫Ê∑±Ëâ≤ÊñáÂ≠óÔºåÊõ¥Ê∏ÖÊ•ö */
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÊé•Êî∂Ê∂àÊÅØ‰∏≠ÁöÑÂºïÁî®Ê†∑ÂºèÊîπËøõ */
        .message-container.received .reply-reference {
            background: rgba(255, 255, 255, 0.2); /* üî•„Äê‰øÆÂ§ç„ÄëÊîπ‰∏∫ÁôΩËâ≤ÂçäÈÄèÊòéËÉåÊôØ */
            border-left-color: rgba(255, 255, 255, 0.8); /* üî•„Äê‰øÆÂ§ç„ÄëÊîπ‰∏∫ÁôΩËâ≤ËæπÊ°Ü */
        }

        .message-container.received .reply-reference-line {
            background: rgba(255, 255, 255, 0.8); /* üî•„Äê‰øÆÂ§ç„ÄëÊîπ‰∏∫ÁôΩËâ≤Á∫øÊù° */
        }

        .message-container.received .reply-reference-sender {
            color: rgba(0, 0, 0, 0.8); /* üî•„Äê‰øÆÂ§ç„ÄëÊîπ‰∏∫Ê∑±Ëâ≤ÂèëÈÄÅËÄÖÂêçÂ≠ó */
        }

        .message-container.received .reply-reference-message {
            color: rgba(0, 0, 0, 0.7); /* üî•„Äê‰øÆÂ§ç„ÄëÊîπ‰∏∫Ê∑±Ëâ≤Ê∂àÊÅØÂÜÖÂÆπ */
        }

        /* ÂºïÁî®È¢ÑËßàÊ†∑ÂºèÔºàËæìÂÖ•Êó∂ÊòæÁ§∫Ôºâ */
        .reply-preview {
            position: relative;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 8px 12px;
            margin-bottom: 6px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            animation: slideInUp 0.3s ease-out;
            z-index: 101;
            max-width: 90%; /* ÈôêÂà∂ÊúÄÂ§ßÂÆΩÂ∫¶ */
        }

        .reply-preview-content {
            display: flex;
            align-items: flex-start;
            position: relative;
        }

        .reply-preview-line {
            width: 2px;
            height: 100%;
            background: #007AFF;
            border-radius: 1px;
            margin-right: 8px;
            flex-shrink: 0;
        }

        .reply-preview-text {
            flex: 1;
            min-width: 0;
        }

        .reply-preview-sender {
            font-weight: 600;
            color: #666;
            margin-bottom: 2px;
            font-size: 11px;
        }

        .reply-preview-message {
            color: #666;
            font-size: 12px;
            line-height: 1.2;
            word-break: break-word;
        }

        .reply-preview-close {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 16px;
            height: 16px;
            border: none;
            background: #999;
            color: white;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .reply-preview-close:hover {
            background: #666;
            transform: scale(1.05);
        }

        /* Ê∑±Ëâ≤‰∏ªÈ¢òÊîØÊåÅ */
        body[data-theme="cute"] .reply-reference {
            background: rgba(255, 192, 203, 0.1);
            border-left-color: #ff69b4;
        }

        body[data-theme="cute"] .reply-reference-line {
            background: #ff69b4;
        }

        body[data-theme="cute"] .reply-reference-sender {
            color: #ff69b4;
        }

        body[data-theme="cute"] .reply-preview {
            background: rgba(255, 240, 245, 0.95);
            border-color: rgba(255, 105, 180, 0.3);
        }

        body[data-theme="cute"] .reply-preview-line {
            background: #ff69b4;
        }

        body[data-theme="cute"] .reply-preview-sender {
            color: #ff69b4;
        }

        /* Âä®ÁîªÊïàÊûú */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Êó∂Èó¥Êà≥Ê†∑Âºè */
        .timestamp {
            color: var(--color-gray-medium);
            font-size: 11px;
            margin: 2px 0;
            line-height: 1.2;
        }
        
        .timestamp-center {
            text-align: center;
            padding: 8px 0;
            margin: 5px 20px;
        }
        
        .timestamp-bubble {
            position: absolute;
            bottom: 0px;
            right: -30px;
            font-size: 10px;
            color: #999;
            white-space: nowrap;
            z-index: 1;
            pointer-events: none;
        }
        
        .message-container.sent .timestamp-bubble {
            right: auto;
            left: -30px;
        }
        
        .timestamp-avatar {
            position: absolute;
            top: 36px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            color: var(--color-gray-medium);
            white-space: nowrap;
            width: max-content;
        }

        .timestamp-inside {
            display: inline-block;
            margin-left: 6px;
            font-size: 9px;
            color: var(--text-white-70);
            white-space: nowrap;
            vertical-align: baseline;
            pointer-events: none;
            line-height: 1;
        }

        .message-container.received .timestamp-inside {
            color: var(--text-black-50);
        }

        /* ÈöêËóèÂ§¥ÂÉèÊó∂ÁöÑÊ†∑ÂºèË∞ÉÊï¥ */
        .message-container.no-avatar .message-bubble {
            margin-left: 0;
            margin-right: 0;
        }
        
        .message-container.no-avatar.sent .message-bubble {
            margin-left: 0;
        }
        
        .message-container.no-avatar.received .message-bubble {
            margin-right: 0;
        }
        
        .chat-input-area {
            background-color: var(--bg-header-default);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--color-gray-border);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
            box-sizing: border-box;
            padding: 8px;
        }
        
        .sender-name {
            font-size: 12px;
            color: #666;
            margin-bottom: 4px;
            margin-left: 60px;
            font-weight: normal;
        }
        
        /* Â±ïÂºÄÂ∑•ÂÖ∑Èù¢ÊùøÊ†∑Âºè */
        .tools-panel {
            background: var(--bg-white-95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            margin: 0 8px 8px 8px;
            padding: 16px;
            box-shadow: var(--shadow-lg);
            animation: toolsPanelSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }
        
        .tool-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: transparent;
            position: relative;
            overflow: hidden;
        }
        
        .tool-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-white-50);
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 12px;
        }
        
        .tool-item:hover::before {
            opacity: 1;
        }
        
        .tool-item:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-hover);
        }
        
        .tool-item:active {
            transform: translateY(-2px) scale(1.02);
            transition: all 0.1s ease;
        }
        
        .tool-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--theme-button-bg-rgba);
            color: var(--theme-button-color, white);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 6px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-button);
            position: relative;
            z-index: 2;
        }
        
        .tool-item:hover .tool-icon {
            transform: scale(1.1);
            box-shadow: var(--shadow-hover);
        }
        
        .tool-label {
            font-size: 11px;
            font-weight: 500;
            color: var(--theme-text-primary, #333);
            text-align: center;
            line-height: 1.2;
            position: relative;
            z-index: 2;
            font-family: var(--theme-font-family);
        }
        
        /* Â∑•ÂÖ∑Èù¢ÊùøÂ±ïÂºÄÂä®Áîª */
        @keyframes toolsPanelSlideUp {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        

        
        .tool-btn-mini {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--bg-white-80);
            border: 1px solid var(--border-black-05);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-shrink: 0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .tool-btn-mini:hover {
            background: var(--bg-white-95);
            border-color: var(--border-black-05);
            transform: scale(1.1);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
        }
        
        .tool-btn-mini:active {
            transform: scale(0.95);
        }
        
        .tool-btn-mini i {
            font-size: 13px;
            color: var(--color-gray);
            transition: color 0.2s ease;
        }
        
        .tool-btn-mini:hover i {
            color: var(--color-gray-darker);
        }
        
        /* ËæìÂÖ•ÊéßÂà∂Âå∫Âüü */
        .input-controls {
            display: flex;
            gap: 6px;
            align-items: center;
        }
        
        .chat-input {
            width: 100%;
            padding: 10px 12px;
            border: none;
            border-radius: 18px;
            background-color: var(--color-white);
            font-size: 16px;
            resize: none;
            max-height: 100px;
            outline: none;
            box-shadow: var(--text-shadow-light);
            box-sizing: border-box;
        }
        
        .send-button {
            height: 40px;
            padding: 0 12px;
            border-radius: 20px;
            background-color: var(--theme-button-bg, rgb(74, 132, 193));
            color: var(--theme-button-color, white);
            display: flex;
            justify-content: center;
            align-items: center;
            border: var(--theme-button-border, none);
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: var(--theme-button-shadow, var(--shadow-md));
            transition: all 0.2s ease;
            border-radius: var(--theme-button-radius, 20px);
            flex-shrink: 0;
            min-width: 50px;
        }
        
        .send-button:hover {
            background-color: var(--theme-button-bg-hover, rgba(72, 125, 178, 0.95));
            transform: translateY(-1px);
            box-shadow: var(--shadow-hover);
        }
        
        .chat-action-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--bg-white-80);
            color: var(--color-gray);
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            cursor: pointer;
            font-size: 18px;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid var(--border-black-05);
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .chat-action-btn:hover {
            background-color: var(--bg-white-95);
            transform: scale(1.1);
        }
        
        /* ËÅäÂ§©ÁïåÈù¢ */
        #chat-screen {
            display: none;
            flex-direction: column;
        }
        
        .chat-tabs {
            display: flex;
            justify-content: space-around;
            padding: 12px 0 8px 0;
            border-top: 1px solid var(--color-border-light);
            background: linear-gradient(180deg, rgba(248, 249, 250, 0.95) 0%, rgba(255, 255, 255, 0.98) 100%);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .chat-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #8E8E93;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 12px;
            position: relative;
            min-width: 50px;
        }
        
        .chat-tab.active {
            color: rgb(74, 132, 193);
        }
        
        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÊøÄÊ¥ªÈ¢úËâ≤ */
        body[data-theme="cute"] .chat-tab.active {
            color: #FF69B4;
        }
        
        .chat-tab i {
            font-size: 22px;
            margin-bottom: 4px;
            transition: all 0.3s ease;
        }
        
        .chat-tab:hover {
            transform: translateY(-2px);
        }
        
        .chat-tab:hover i {
            transform: scale(1.1);
        }
        
        .chat-tab span {
            font-weight: 500;
            letter-spacing: 0.3px;
        }
        
        /* Ê∂àÊÅØÂàóË°® */
        .message-list {
            flex: 1;
            overflow-y: auto;
        }
        
        .message-item {
            display: flex;
            align-items: center; /* ÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩê */
            padding: 10px;
            border-bottom: 1px solid var(--color-border-light);
            cursor: pointer;
            gap: 10px; /* Ê∑ªÂä†ÂÖÉÁ¥†Èó¥Ë∑ù */
        }
        
        .message-content {
            flex: 1;
            min-width: 0; /* ÂÖÅËÆ∏ÂÜÖÂÆπÁº©Â∞è */
            overflow: hidden; /* Èò≤Ê≠¢ÂÜÖÂÆπÊ∫¢Âá∫ */
        }
        
        .message-name {
            font-weight: bold;
            margin-bottom: 2px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .message-preview {
            color: var(--color-text-light);
            font-size: 14px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: calc(100% - 50px); /* ÂÜçÂ¢ûÂä†È¢ÑËßàÈïøÂ∫¶ÔºåÂ§ßÁ∫¶3‰∏™Â≠óÁ¨¶ÁöÑÁ©∫Èó¥ */
            flex: 1; /* ËÆ©È¢ÑËßàÊñáÂ≠óËÉΩÂ§üÁº©Êîæ */
            min-width: 0; /* ÂÖÅËÆ∏ÂÜÖÂÆπÁº©Â∞è */
        }
        
        .message-time {
            font-size: 12px;
            color: var(--color-text-lighter);
            flex-shrink: 0; /* Èò≤Ê≠¢Êó∂Èó¥Ë¢´Êå§Âéã */
            white-space: nowrap; /* Èò≤Ê≠¢Êó∂Èó¥Êç¢Ë°å */
            margin-left: auto; /* Â∞ÜÊó∂Èó¥Êé®Âà∞Âè≥‰æß */
        }
        
        /* ÈÄöËÆØÂΩï */
        .contact-list {
            flex: 1;
            overflow-y: auto;
        }
        
        .contact-section {
            margin-bottom: 15px;
        }
        
        .section-title {
            padding: 5px 15px;
            background-color: var(--color-gray-bg);
            color: var(--color-text-light);
            font-size: 14px;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid var(--color-border-light);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }


        
        .contact-info {
            flex: 1;
            margin-left: 10px;
            overflow: hidden;
        }
        
        .character-preview {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: calc(100vw - 140px);
        }
        
        /* Âä®ÊÄÅ */
        .moment-list {
            flex: 1;
            overflow-y: auto;
        }
        
        .moment-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .moment-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .moment-name {
            font-weight: bold;
        }
        
        .moment-content {
            margin-bottom: 10px;
        }
        
        .moment-images {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .moment-image {
            aspect-ratio: 1;
            background-color: #eee;
        }
        
        .moment-actions {
            display: flex;
            justify-content: space-between;
            color: #888;
            font-size: 14px;
        }
        
        /* ‰∏™‰∫∫È°µÈù¢ */
        .profile-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 0;
            background-color: #f8f8f8;
        }
        
        .profile-name {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .profile-id {
            color: #888;
            font-size: 14px;
        }
        
        .profile-menu {
            margin-top: 20px;
        }
        
        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .menu-item-left {
            display: flex;
            align-items: center;
        }
        
        .menu-icon {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            background-color: #07C160;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 10px;
        }
        
        /* ‰∫∫Áâ©Â∫îÁî® */
        .character-list {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 60px;
        }
        
        .character-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        
        .character-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #ddd;
            margin-right: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        .character-info {
            flex: 1;
        }
        
        .character-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .character-bio {
            color: #888;
            font-size: 14px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100%;
        }
        
        .add-character-header {
            position: absolute;
            right: 15px;
            top: 15px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #007AFF;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px;
            cursor: pointer;
        }
        
        /* ËßíËâ≤ÁºñËæëË°®Âçï */
        .character-form {
            padding: 25px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            margin: 15px;
            box-shadow: var(--shadow-card);
            border: 1px solid var(--border-white-20);
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--theme-text-primary, #333);
            font-size: 15px;
            letter-spacing: 0.3px;
        }
        
        .form-input {
            width: 100%;
            padding: 15px 18px;
            border: 2px solid var(--theme-input-border, rgba(0, 0, 0, 0.08));
            border-radius: var(--theme-input-radius, 15px);
            font-size: 16px;
            box-sizing: border-box;
            background: var(--theme-form-bg, rgba(255, 255, 255, 0.8));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all var(--transition-normal, 0.3s ease);
            color: var(--theme-text-primary, #333);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--theme-input-focus, rgba(0, 123, 255, 0.5));
            background: var(--theme-form-bg, rgba(255, 255, 255, 0.95));
            box-shadow: 0 0 0 3px var(--theme-input-focus-shadow, rgba(0, 123, 255, 0.1));
            transform: translateY(-1px);
        }
        
        .form-textarea {
            width: 100%;
            padding: 15px 18px;
            border: 2px solid var(--theme-input-border, rgba(0, 0, 0, 0.08));
            border-radius: var(--theme-input-radius, 15px);
            font-size: 16px;
            box-sizing: border-box;
            min-height: 120px;
            resize: vertical;
            background: var(--theme-form-bg, rgba(255, 255, 255, 0.8));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all var(--transition-normal, 0.3s ease);
            color: var(--theme-text-primary, #333);
            font-family: var(--theme-font-family);
        }
        
        .form-textarea:focus {
            outline: none;
            border-color: var(--theme-input-focus, rgba(0, 123, 255, 0.5));
            background: var(--theme-form-bg, rgba(255, 255, 255, 0.95));
            box-shadow: 0 0 0 3px var(--theme-input-focus-shadow, rgba(0, 123, 255, 0.1));
            transform: translateY(-1px);
        }
        
        .form-submit {
            width: 100%;
            padding: 16px;
            background: var(--theme-button-bg, rgba(0, 123, 255, 0.9));
            color: var(--theme-button-color, white);
            border: var(--theme-button-border, none);
            border-radius: var(--theme-button-radius, 15px);
            font-size: var(--theme-button-font-size, 17px);
            font-weight: var(--theme-button-font-weight, 600);
            font-family: var(--theme-font-family);
            cursor: pointer;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            box-shadow: var(--theme-button-shadow, 0 4px 15px rgba(0, 123, 255, 0.3));
            transition: all var(--transition-normal, 0.3s ease);
            letter-spacing: var(--theme-button-letter-spacing, 0.5px);
            text-shadow: var(--theme-text-shadow, none);
        }
        
        .form-submit:hover {
            transform: translateY(-2px);
            box-shadow: var(--theme-button-shadow, 0 6px 20px rgba(0, 123, 255, 0.4));
            background: var(--theme-button-bg-hover, rgba(0, 123, 255, 1));
        }
        
        .form-submit:active {
            transform: translateY(0);
            box-shadow: var(--theme-button-shadow, 0 2px 10px rgba(0, 123, 255, 0.3));
        }
        
        .avatar-upload {
            margin-bottom: 25px;
            padding: 20px;
            background: var(--theme-form-bg, rgba(255, 255, 255, 0.6));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 18px;
            border: 1px solid var(--theme-input-border, rgba(0, 0, 0, 0.05));
            text-align: center;
        }
        
        .avatar-preview {
            width: 85px;
            height: 85px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--theme-avatar-bg-1, #f0f2f5), var(--theme-avatar-bg-2, #e8ebf0));
            margin: 0 auto 15px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 3px solid var(--theme-avatar-border, rgba(255, 255, 255, 0.8));
            transition: all var(--transition-normal, 0.3s ease);
        }
        
        .avatar-preview.has-image {
            background: none !important;
        }
        
        .avatar-preview.has-image .avatar-preview-text {
            display: none !important;
        }
        
        .avatar-preview:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-hover-alt);
        }
        
        .avatar-preview-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: 700;
            color: var(--theme-avatar-text, #8b9dc3);
        }
        
        .upload-button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            background: var(--theme-button-secondary-bg, rgba(255, 255, 255, 0.8));
            border: 2px solid var(--theme-button-secondary-border, rgba(0, 0, 0, 0.1));
            border-radius: var(--theme-button-radius, 12px);
            cursor: pointer;
            color: var(--theme-button-secondary-color, #555);
            font-weight: 500;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all var(--transition-fast, 0.2s ease);
            box-shadow: 0 2px 8px var(--bg-black-05);
            text-align: center;
        }
        
        .upload-button:hover {
            background: var(--theme-button-secondary-bg-hover, rgba(255, 255, 255, 0.95));
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .upload-button:active {
            transform: translateY(0);
            box-shadow: var(--shadow-button);
        }
        
        /* ËÆ∫ÂùõÁïåÈù¢ */
        .forum-categories {
            padding: 15px;
        }
        
        .forum-category {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .forum-category:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .category-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
        }
        
        .forum-category:nth-child(1) .category-icon {
            background: linear-gradient(135deg, #ff6b6b, #ff8787);
            color: white;
        }
        
        .forum-category:nth-child(2) .category-icon {
            background: linear-gradient(135deg, #4ecdc4, #44a3aa);
            color: white;
        }
        
        .forum-category:nth-child(3) .category-icon {
            background: linear-gradient(135deg, #f06292, #ec407a);
            color: white;
        }
        
        .category-info {
            flex: 1;
        }
        
        .category-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .category-desc {
            font-size: 13px;
            color: #666;
        }
        
        .category-count {
            font-size: 20px;
            font-weight: 600;
            color: #999;
        }
        
        /* Ê∏∏ÊàèÁïåÈù¢ */
        .game-list {
            padding: 15px;
        }
        
        .game-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .game-item:hover:not(.coming-soon) {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .game-item.coming-soon {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .game-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-right: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .game-info {
            flex: 1;
        }
        
        .game-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .game-desc {
            font-size: 13px;
            color: #666;
        }
        
        .game-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }
        



        /* Èü≥‰πêÊí≠ÊîæÂô®Ê†∑Âºè */
        .music-status-display {
            position: absolute;
            left: 50%;
            top: 12px; /* ÂÆö‰ΩçÂú®Áä∂ÊÄÅÊ†èÁöÑÂûÇÁõ¥‰∏≠ÂøÉ */
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 15px; /* ÂáèÂ∞èÂúÜËßí */
            padding: 4px 10px; /* ÂáèÂ∞èÂÜÖËæπË∑ù */
            display: flex;
            align-items: center;
            gap: 6px; /* ÂáèÂ∞èÈó¥Ë∑ù */
            cursor: pointer;
            width: 140px; /* Âõ∫ÂÆöÂÆΩÂ∫¶Ôºå‰∏çÂÜç‰ΩøÁî®max-widthÂíåmin-width */
            z-index: 100; /* Á°Æ‰øùÁÅµÂä®Â≤õÂú®Áä∂ÊÄÅÊ†è‰πã‰∏ä */
            pointer-events: auto; /* Á°Æ‰øùÂèØ‰ª•ÁÇπÂáª */
        }

        .music-icon {
            color: #5A9FD4; /* Èôç‰ΩéËìùËâ≤È•±ÂíåÂ∫¶ */
            font-size: 12px; /* ÂáèÂ∞èÂõæÊ†áÂ§ßÂ∞è */
            flex-shrink: 0; /* Èò≤Ê≠¢ÂõæÊ†áË¢´ÂéãÁº© */
        }

        .music-lyrics-scroll {
            flex: 1;
            overflow: hidden;
            white-space: nowrap;
            color: white;
            font-size: 11px; /* ÂáèÂ∞èÂ≠ó‰ΩìÂ§ßÂ∞è */
            font-weight: 400; /* ÂáèËΩªÂ≠ó‰ΩìÁ≤óÁªÜ */
        }

        .music-lyrics-scroll span {
            display: inline-block;
            animation: scrollLyrics 8s linear infinite;
        }

        @keyframes scrollLyrics {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* Èü≥‰πêÊ®°ÊÄÅÊ°ÜÊ†∑Âºè - Áé∞‰ª£ÂåñËÆæËÆ° */
        .music-modal {
            position: fixed;
            z-index: 99999;
            display: block;
            pointer-events: none; /* ËÆ©ËÉåÊôØ‰∏çÈòªÊå°ÁÇπÂáª */
        }

        .music-modal-content {
            background: rgba(200, 200, 200, 0.25);
            backdrop-filter: blur(30px) saturate(1.5);
            -webkit-backdrop-filter: blur(30px) saturate(1.5);
            border-radius: 20px;
            width: 85%;
            height: 60%; /* Ë∞ÉÊï¥‰∏∫Â±èÂπïÈ´òÂ∫¶ÁöÑ60% */
            overflow: visible;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            pointer-events: auto; /* ÊÅ¢Â§çÊ®°ÊÄÅÊ°ÜÂÜÖÂÆπÁöÑÁÇπÂáª */
            position: absolute;
            top: 60px; /* Ë¥¥ÁùÄÁä∂ÊÄÅÊ†è‰∏ãÈù¢ */
            left: 50%;
            transform: translateX(-50%); /* Ê∞¥Âπ≥Â±Ö‰∏≠ */
        }

        .music-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px 8px; /* ÂáèÂ∞èÂÜÖËæπË∑ù‰ΩøÂ§¥ÈÉ®Êõ¥Á¥ßÂáë */
            color: #333;
            background: transparent;
            border-bottom: none;
        }

        .music-modal-close {
            background: rgba(0, 0, 0, 0.1);
            border: none;
            font-size: 16px;
            cursor: pointer;
            color: #666;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .music-modal-close:hover {
            background: rgba(0, 0, 0, 0.2);
            color: #333;
        }

        .music-header-title {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            text-align: center;
            flex: 1;
        }

        .music-view-toggle {
            background: rgba(0, 0, 0, 0.1);
            border: none;
            border-radius: 6px;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #666;
            transition: all 0.2s ease;
            font-size: 12px;
        }

        .music-view-toggle:hover {
            background: rgba(0, 0, 0, 0.2);
            color: #333;
        }

        .music-modal-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: 0 16px; /* ÁßªÈô§‰∏ä‰∏ãÂÜÖËæπË∑ù */
            align-items: center;
            justify-content: flex-start; /* Êîπ‰∏∫‰ªéÈ°∂ÈÉ®ÂºÄÂßãÂ∏ÉÂ±Ä */
        }

        /* Âî±ÁâáÊú∫Ê®°Âºè - Áé∞‰ª£ÂåñËÆæËÆ° */
        .vinyl-player {
            padding: 10px 16px; /* Ë∞ÉÊï¥ÂÜÖËæπË∑ù */
            text-align: center;
            position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Êîπ‰∏∫‰ªéÈ°∂ÈÉ®ÂºÄÂßãÂ∏ÉÂ±Ä */
            overflow: visible;
        }

        .vinyl-container {
            position: relative;
            width: 160px; /* Á®çÂæÆÂáèÂ∞èÂ∞∫ÂØ∏ */
            height: 160px;
            margin: 10px auto 15px; /* Â¢ûÂä†‰∏ä‰∏ãËæπË∑ù */
        }

        .vinyl-disc {
            position: relative;
            width: 160px; /* ‰∏éÂÆπÂô®Â∞∫ÂØ∏ÂåπÈÖç */
            height: 160px;
            border-radius: 50%;
            background: linear-gradient(45deg, #0a0a0a 0%, #1a1a1a 30%, #2a2a2a 70%, #0a0a0a 100%);
            margin: 0 auto;
            animation: vinylSpin 12s linear infinite paused;
            box-shadow:
                0 0 0 1px #333,
                0 0 0 2px #111,
                0 8px 20px rgba(0, 0, 0, 0.4),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            z-index: 1;
        }

        .vinyl-disc.playing {
            animation-play-state: running;
        }

        @keyframes vinylSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .vinyl-grooves {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: repeating-conic-gradient(
                from 0deg,
                transparent 0deg,
                rgba(255, 255, 255, 0.02) 0.5deg,
                transparent 1deg
            );
            z-index: 1;
        }

        .vinyl-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: #d3d3d3; /* Êîπ‰∏∫ÊµÖÁÅ∞Ëâ≤ */
            border-radius: 50%;
            box-shadow:
                inset 0 0 8px rgba(0, 0, 0, 0.2), /* ÂáèËΩªÈò¥ÂΩ± */
                0 2px 6px rgba(0, 0, 0, 0.2);
            z-index: 4;
        }

        .vinyl-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px; /* ÈÄÇÂ∫î180pxÂî±ÁâáÁõòÁöÑÂ∞∫ÂØ∏ */
            height: 100px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); /* ÊÅ¢Â§çÂéüÊù•ÁöÑËÉåÊôØ */
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 12px;
            box-sizing: border-box;
            box-shadow:
                inset 0 0 10px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
            z-index: 2;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .vinyl-label:hover {
            transform: translate(-50%, -50%) scale(1.02);
        }

        .album-cover-upload {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            z-index: 3;
        }

        .upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            z-index: 4;
            cursor: pointer;
        }

        .song-info {
            color: #333;
            text-align: center;
            margin-bottom: 5px; /* Ëøõ‰∏ÄÊ≠•ÂáèÂ∞è‰∏ãËæπË∑ù */
        }

        .song-title {
            font-size: 13px; /* Á®çÂæÆÂáèÂ∞èÂ≠ó‰Ωì */
            font-weight: 600;
            margin-bottom: 2px; /* ÂáèÂ∞è‰∏ãËæπË∑ù */
            color: #333;
            line-height: 1.1; /* ÂáèÂ∞èË°åÈ´ò */
        }

        .song-artist {
            font-size: 10px; /* ÂáèÂ∞èÂ≠ó‰Ωì */
            color: #666;
            margin-bottom: 1px; /* ÂáèÂ∞è‰∏ãËæπË∑ù */
        }

        .song-album {
            font-size: 9px; /* ÂáèÂ∞èÂ≠ó‰Ωì */
            color: #999;
        }

        .vinyl-label:hover .upload-overlay {
            display: flex;
        }

        .tonearm {
            position: absolute;
            top: 15px;
            right: 25px;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #666 0%, #999 50%, #666 100%);
            border-radius: 1px;
            transform-origin: right center;
            transform: rotate(15deg);
            transition: transform 0.5s ease;
            z-index: 4;
        }

        .tonearm.playing {
            transform: rotate(-2deg);
        }

        .tonearm::before {
            content: '';
            position: absolute;
            right: -5px;
            top: -4px;
            width: 10px;
            height: 10px;
            background: #333;
            border-radius: 50%;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .tonearm::after {
            content: '';
            position: absolute;
            left: -6px;
            top: -2px;
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
        }

        .vinyl-lyrics {
            margin-top: 15px; /* Â¢ûÂä†‰∏äËæπË∑ù */
            height: 25px; /* Ëøõ‰∏ÄÊ≠•ÂáèÂ∞èÈ´òÂ∫¶ */
            overflow: hidden;
            position: relative;
            background: transparent; /* ÂÆåÂÖ®ÈÄèÊòé */
            border-radius: 0; /* ÁßªÈô§ÂúÜËßí */
            padding: 0 15px; /* ‰øùÊåÅÂ∑¶Âè≥ÂÜÖËæπË∑ùÁ°Æ‰øùÊ≠åËØçÊòæÁ§∫ÂÆåÊï¥ */
            backdrop-filter: none; /* ÁßªÈô§Ê®°Á≥äÊïàÊûú */
            -webkit-backdrop-filter: none; /* ÁßªÈô§Ê®°Á≥äÊïàÊûú */
            width: 100%; /* Á°Æ‰øùÂÆΩÂ∫¶Âç†Êª° */
            box-sizing: border-box; /* ÂåÖÂê´ÂÜÖËæπË∑ùÂú®ÂÆΩÂ∫¶ËÆ°ÁÆó‰∏≠ */
        }

        .lyrics-container {
            position: relative;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .lyric-line {
            font-size: 14px;
            color: #333; /* Êîπ‰∏∫ÈªëËâ≤ */
            margin: 2px 0;
            min-height: 20px;
            transition: all 0.5s ease;
            text-align: center;
            line-height: 1.3;
            transform: translateY(0);
            opacity: 0.8; /* Á®çÂæÆÊèêÈ´òÈÄèÊòéÂ∫¶ */
        }

        .lyric-line.active {
            color: #000; /* ÂΩìÂâçÊ≠åËØçÊîπ‰∏∫Á∫ØÈªëËâ≤ */
            font-weight: 600;
            transform: translateY(0) scale(1.05);
            opacity: 1;
            text-shadow: none; /* ÁßªÈô§ËìùËâ≤Èò¥ÂΩ± */
        }



        /* ÂÆåÊï¥Ê≠åËØçÊ®°Âºè - Áé∞‰ª£ÂåñËÆæËÆ° */
        .lyrics-mode {
            padding: 20px 16px 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            color: #333;
        }

        .lyrics-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .lyrics-header .song-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
            color: #333;
        }

        .lyrics-header .song-artist {
            font-size: 13px;
            color: #666;
            margin-bottom: 2px;
        }

        .lyrics-header .song-album {
            font-size: 11px;
            color: #999;
        }

        .full-lyrics-container {
            flex: 1;
            overflow: hidden; /* Êîπ‰∏∫hiddenÔºå‰ΩøÁî®transformÊªöÂä® */
            padding: 0 16px; /* Â¢ûÂä†Â∑¶Âè≥paddingÔºåÈò≤Ê≠¢Ê≠åËØçË¢´ÂàáÂâ≤ */
            margin-bottom: 12px;
            max-height: 350px;
            min-height: 200px;
            position: relative;
            /* Ê∑ªÂä†Ê∏êÂèòÈÅÆÁΩ©ÊïàÊûú */
            -webkit-mask-image: linear-gradient(transparent, black 15%, black 85%, transparent);
            mask-image: linear-gradient(transparent, black 15%, black 85%, transparent);
        }

        .full-lyrics {
            text-align: center;
            line-height: 1.6;
            /* Ê∑ªÂä†transformËøáÊ∏°Âä®Áîª */
            transition: transform 0.6s cubic-bezier(0.25, 0.1, 0.25, 1);
            padding: 200px 0; /* Ëøõ‰∏ÄÊ≠•Â¢ûÂä†‰∏ä‰∏ãpaddingÔºåËÆ©ÂΩìÂâçÊ≠åËØçÁúüÊ≠£Â±Ö‰∏≠ */
        }

        .full-lyrics .lyric-line {
            font-size: 12px;
            color: rgba(0, 0, 0, 0.6);
            margin: 6px 0;
            padding: 3px 8px; /* Â¢ûÂä†Â∑¶Âè≥paddingÔºåÈò≤Ê≠¢ÈïøÊ≠åËØçË¢´ÂàáÂâ≤ */
            transition: all 0.5s ease;
            cursor: pointer;
            opacity: 0.7;
            transform: scale(0.95);
            line-height: 1.4;
            word-wrap: break-word; /* ÂÖÅËÆ∏ÈïøÂçïËØçÊç¢Ë°å */
            white-space: normal; /* ÂÖÅËÆ∏ÊñáÊú¨Êç¢Ë°å */
        }

        .full-lyrics .lyric-line:hover {
            color: rgba(0, 0, 0, 0.8);
        }

        .full-lyrics .lyric-line.active {
            color: #007AFF;
            font-weight: 600;
            font-size: 13px;
            opacity: 1;
            transform: scale(1.05);
            text-shadow: 0 0 8px rgba(0, 122, 255, 0.2);
        }

        /* Èü≥‰πêÊéßÂà∂Âå∫Âüü - Áé∞‰ª£ÂåñËÆæËÆ° */
        .music-modal-controls {
            padding: 8px 16px 12px; /* Ëøõ‰∏ÄÊ≠•ÂáèÂ∞èÂÜÖËæπË∑ù */
            background: transparent;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            border-top: none;
            flex-shrink: 0; /* Èò≤Ê≠¢ÊéßÂà∂Âå∫ÂüüË¢´ÂéãÁº© */
        }

        /* ÂΩìÂâçÊ≠åËØçÊòæÁ§∫Âå∫Âüü */
        .current-lyric-display {
            text-align: center;
            margin-bottom: 8px;
            min-height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .current-lyric-text {
            font-size: 14px;
            color: #333;
            font-weight: 400;
            line-height: 1.4;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .music-progress {
            margin-bottom: 12px; /* ÂáèÂ∞è‰∏ãËæπË∑ù */
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 2px;
            margin-bottom: 8px;
            position: relative;
            cursor: pointer;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #333; /* Êîπ‰∏∫ÈªëËâ≤ */
            border-radius: 2px;
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 8px;
            height: 100%;
            background: #333; /* Êîπ‰∏∫ÈªëËâ≤ */
            border-radius: 50%;
            transform: translateX(50%);
            box-shadow: 0 0 4px rgba(0, 0, 0, 0.3); /* Êîπ‰∏∫ÈªëËâ≤Èò¥ÂΩ± */
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #666;
            font-weight: 400;
        }

        .music-control-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 12px;
        }

        .control-btn {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.1);
            color: #666;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 14px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            position: relative;
        }

        .control-btn:hover {
            background: rgba(0, 0, 0, 0.2);
            color: #333;
            transform: scale(1.05);
        }

        /* ÂçïÊõ≤Âæ™ÁéØÊï∞Â≠óÊòæÁ§∫ */
        .control-btn {
            position: relative;
        }

        .control-btn .loop-number {
            position: absolute;
            bottom: 4px;
            right: 4px;
            font-size: 10px;
            font-weight: bold;
            color: #666; /* ÂíåÊåâÈíÆÂõæÊ†á‰∏ÄÊ†∑ÁöÑÁÅ∞Ëâ≤ */
            background: transparent;
            line-height: 1;
        }

        .control-btn.shuffle.active {
            background: rgba(0, 122, 255, 0.2);
            color: #007AFF;
        }

        .control-btn.repeat.active {
            background: rgba(0, 122, 255, 0.2);
            color: #007AFF;
        }

        .play-pause-btn {
            width: 48px;
            height: 48px;
            background: rgba(0, 0, 0, 0.1); /* ÂíåÂÖ∂‰ªñÊåâÈíÆ‰∏ÄÊ†∑ÁöÑËÉåÊôØ */
            border: none;
            border-radius: 50%;
            color: #666; /* ÂíåÂÖ∂‰ªñÊåâÈíÆ‰∏ÄÊ†∑ÁöÑÈ¢úËâ≤ */
            font-size: 16px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .play-pause-btn:hover {
            background: rgba(0, 0, 0, 0.2); /* ÂíåÂÖ∂‰ªñÊåâÈíÆ‰∏ÄÊ†∑ÁöÑÊÇ¨ÂÅúÊïàÊûú */
            color: #333;
            transform: scale(1.05);
        }

        .listening-time {
            text-align: center;
            font-size: 12px;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        /* Èü≥‰πêÊí≠ÊîæÂô®ÂÖ≥Èó≠ÊåâÈíÆ - Â∞èÂûãÂÖ≥Êú∫ÊåâÈíÆÊ†∑Âºè */
        .music-close-btn {
            position: absolute;
            bottom: 12px;
            left: 12px;
            width: 20px;
            height: 20px;
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            color: #666;
            font-size: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 10;
        }

        .music-close-btn:hover {
            background: rgba(255, 0, 0, 0.15);
            border-color: rgba(255, 0, 0, 0.3);
            color: #ff4444;
            transform: scale(1.05);
        }

        .music-close-btn:active {
            transform: scale(0.9);
        }



        /* Ë¥≠Áâ©ÁïåÈù¢ */
        .product-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 15px;
        }
        
        .product-item {
            background-color: #f9f9f9;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light-2);
        }
        
        .product-image {
            width: 100%;
            aspect-ratio: 1;
            background-color: #eee;
        }
        
        .product-info {
            padding: 10px;
        }
        
        .product-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .product-price {
            color: #FF2D55;
            font-weight: bold;
        }
        
        .product-seller {
            display: flex;
            align-items: center;
            margin-top: 5px;
            font-size: 12px;
            color: #888;
        }
        
        /* ÊµèËßàÂô®ÁïåÈù¢ */
        .browser-toolbar {
            display: flex;
            padding: 10px;
            background-color: #f8f8f8;
            border-bottom: 1px solid #ddd;
        }
        
        .browser-url-bar {
            flex: 1;
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid #ddd;
            background-color: white;
        }
        
        .browser-content {
            border: none;
            width: 100%;
            height: 100%;
        }
        

        
        /* Â£ÅÁ∫∏ËÆæÁΩÆ */
        .wallpaper-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 15px;
        }
        
        .wallpaper-option {
            aspect-ratio: 1;
            border-radius: 10px;
            background-size: cover;
            background-position: center;
            border: 2px solid transparent;
            cursor: pointer;
        }
        
        .wallpaper-option.selected {
            border-color: #007AFF;
        }
        
        /* Â£ÅÁ∫∏È¢ÑËßàÂÆπÂô® */
        .wallpaper-preview-container {
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 10px;
            margin-bottom: 15px;
            min-height: 250px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .wallpaper-preview-placeholder {
            text-align: center;
            color: #999;
        }
        
        .wallpaper-preview-placeholder i {
            font-size: 48px;
            margin-bottom: 10px;
            color: #ddd;
        }
        
        .wallpaper-preview-placeholder div {
            font-size: 14px;
        }
        
        .wallpaper-preview-image {
            width: 280px;
            height: 200px;
            border-radius: 12px;
            object-fit: contain;
            border: 3px solid #ddd;
            background-color: #fff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        /* Â∫îÁî®ÂõæÊ†áÈÄâÊã©Âô®Ê†∑Âºè */
        .app-list-section {
            margin-bottom: 20px;
        }

        .app-list-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .app-item-selector {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            border: 2px solid transparent;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .app-item-selector:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .app-item-selector.selected {
            border-color: #007AFF;
            background: rgba(0, 122, 255, 0.1);
        }

        .app-item-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 8px;
            background: #007AFF;
            color: white;
            font-size: 24px;
            overflow: hidden;
        }

        .app-item-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        .app-item-name {
            font-size: 12px;
            color: #333;
            font-weight: 500;
            text-align: center;
        }

        .icon-upload-section {
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .upload-area {
            border: 2px dashed #ddd;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .upload-area:hover {
            border-color: #007AFF;
            background: rgba(0, 122, 255, 0.05);
        }

        .upload-area.has-image {
            border-style: solid;
            border-color: #007AFF;
            background: rgba(0, 122, 255, 0.1);
        }

        .icon-preview-img {
            max-width: 100px;
            max-height: 100px;
            border-radius: 12px;
            object-fit: cover;
        }
        

        
        /* È¢úËâ≤ÈÄâÊã©Âô® */
        .color-picker {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
        }
        
        .color-option.selected {
            border-color: #000;
        }
        
        /* ÈÄèÊòéÂ∫¶ÊªëÂùó */
        .opacity-slider {
            width: 100%;
            padding: 0 15px;
            margin-top: 10px;
        }
        
        /* Êñ∞Âª∫ËÅîÁ≥ª‰∫∫Ê®°ÊÄÅÊ°Ü */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-black-50);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        /* Êí≠ÊîæÂàóË°®Ê®°ÊÄÅÊ°ÜÈúÄË¶ÅÊõ¥È´òÁöÑz-index */
        #playlist-modal {
            z-index: 100000 !important;
        }

        /* Êí≠ÊîæÂàóË°®Ê®°ÊÄÅÊ°Ü - ÁÆÄÊ¥ÅÊØõÁéªÁíÉÈ£éÊ†º */
        #playlist-modal .modal-content {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        #playlist-modal .modal-header {
            background: transparent;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            padding: 16px 20px;
        }

        #playlist-modal .modal-header h3 {
            color: #333;
            font-weight: 500;
            font-size: 18px;
            margin: 0;
        }

        #playlist-modal .close-btn {
            color: #666;
            background: rgba(0, 0, 0, 0.05);
            border: none;
            border-radius: 6px;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        #playlist-modal .close-btn:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        /* Ê∑ªÂä†Ê≠åÊõ≤Âå∫Âüü - ÁÆÄÊ¥ÅÈ£éÊ†º */
        .add-song-section {
            margin-bottom: 20px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.03);
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.08);
        }

        .add-song-section h4 {
            margin: 0 0 12px 0;
            color: #333;
            font-weight: 500;
            font-size: 16px;
        }

        .input-group {
            margin-bottom: 10px;
        }

        .input-row {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        .song-input {
            padding: 8px 10px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 6px;
            background: white;
            color: #333;
            font-size: 13px;
            transition: border-color 0.2s ease;
            min-width: 0;
        }

        .song-input.half-width {
            flex: 1 1 calc(50% - 4px);
            max-width: calc(50% - 4px);
            min-width: 0;
            width: calc(50% - 4px);
            box-sizing: border-box;
        }

        .song-input:focus {
            outline: none;
            border-color: #007AFF;
        }

        .song-input::placeholder {
            color: #999;
        }

        .file-label {
            display: block;
            color: #666;
            margin-bottom: 4px;
            font-size: 13px;
        }

        .file-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .file-input-wrapper.half-width {
            flex: 1 1 calc(50% - 4px);
            max-width: calc(50% - 4px);
            min-width: 0;
            width: calc(50% - 4px);
            box-sizing: border-box;
        }

        .lyrics-input-section {
            margin-top: 8px;
        }

        .lyrics-textarea {
            width: 100%;
            min-height: 80px;
            max-height: 120px;
            padding: 8px 10px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 6px;
            background: white;
            color: #333;
            font-size: 13px;
            font-family: inherit;
            resize: vertical;
            box-sizing: border-box;
        }

        .lyrics-textarea:focus {
            outline: none;
            border-color: #007AFF;
        }

        .lyrics-textarea::placeholder {
            color: #999;
        }

        .lyrics-input-section {
            margin-top: 8px;
        }

        .lyrics-textarea {
            width: 100%;
            min-height: 80px;
            max-height: 120px;
            padding: 8px 10px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 6px;
            background: white;
            color: #333;
            font-size: 13px;
            font-family: inherit;
            resize: vertical;
            box-sizing: border-box;
        }

        .lyrics-textarea:focus {
            outline: none;
            border-color: #007AFF;
        }

        .lyrics-textarea::placeholder {
            color: #999;
        }

        .file-input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-input-text {
            padding: 8px 10px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 6px;
            background: white;
            color: #999;
            font-size: 13px;
            min-width: 0;
            width: 100%;
            cursor: pointer;
            user-select: none;
            transition: border-color 0.2s ease;
        }

        .add-song-btn {
            width: 100%;
            margin-top: 12px;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* ÁªèÂÖ∏‰∏ªÈ¢ò - ÈõæÈúæËìù */
        .theme-classic .add-song-btn {
            background: rgba(135, 206, 235, 0.6);
            color: rgba(255, 255, 255, 0.9);
        }

        .theme-classic .add-song-btn:hover {
            background: rgba(135, 206, 235, 0.8);
            transform: translateY(-1px);
        }

        /* ÂèØÁà±‰∏ªÈ¢ò - ÈõæÈúæÁ≤â */
        .theme-cute .add-song-btn {
            background: rgba(255, 182, 193, 0.6);
            color: rgba(255, 255, 255, 0.9);
        }

        .theme-cute .add-song-btn:hover {
            background: rgba(255, 182, 193, 0.8);
            transform: translateY(-1px);
        }

        /* Èü≥‰πêÊí≠ÊîæÂô®‰∏ä‰º†ÊåâÈíÆÊ†∑Âºè */
        .upload-btn {
            background: rgba(200, 200, 200, 0.4);
            color: rgba(0, 0, 0, 0.7);
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .upload-btn:hover {
            background: rgba(200, 200, 200, 0.6);
            transform: scale(1.02);
        }

        .upload-btn i {
            font-size: 11px;
        }

        /* Êí≠ÊîæÂàóË°®Âå∫Âüü */
        .current-playlist h4 {
            margin: 0 0 12px 0;
            color: #333;
            font-weight: 500;
            font-size: 16px;
        }

        .playlist-items {
            max-height: 280px;
            overflow-y: auto;
        }

        /* ÁÆÄÊ¥ÅÊªöÂä®Êù° */
        .playlist-items::-webkit-scrollbar {
            width: 4px;
        }

        .playlist-items::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 2px;
        }

        .playlist-items::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 2px;
        }

        .playlist-items::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        /* Êí≠ÊîæÂàóË°®È°π - ÁÆÄÊ¥ÅÈ£éÊ†º */
        .playlist-item-modern {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
            gap: 12px;
        }

        .playlist-item-modern:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .song-number {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.08);
            border-radius: 50%;
            color: #666;
            font-size: 11px;
            font-weight: 500;
            flex-shrink: 0;
        }

        .song-info {
            flex: 1;
            min-width: 0;
            margin-left: 0;
        }

        .song-title {
            color: #333;
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .song-artist {
            color: #666;
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .song-actions {
            display: flex;
            gap: 6px;
            flex-shrink: 0;
        }

        /* Êí≠ÊîæÂàóË°®ÊåâÈíÆÊ†∑Âºè - ÈôêÂà∂‰ΩúÁî®Âüü */
        .playlist-item .play-btn,
        .playlist-item .delete-btn,
        #playlist-modal .play-btn,
        #playlist-modal .delete-btn {
            width: 28px;
            height: 28px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .playlist-item .play-btn,
        #playlist-modal .play-btn {
            background: rgba(200, 200, 200, 0.4);
            color: rgba(0, 0, 0, 0.7);
        }

        .playlist-item .play-btn:hover,
        #playlist-modal .play-btn:hover {
            background: rgba(200, 200, 200, 0.6);
            transform: scale(1.05);
        }

        .playlist-item-modern .delete-btn {
            background: rgba(200, 200, 200, 0.4) !important;
            color: rgba(100, 100, 100, 0.8) !important;
        }

        .playlist-item-modern .delete-btn i.fas.fa-trash {
            color: rgba(100, 100, 100, 0.8) !important;
        }

        /* Âè™ÈíàÂØπÊí≠ÊîæÂàóË°®ÁöÑÂà†Èô§ÊåâÈíÆ‰ΩøÁî®ÁÅ∞Ëâ≤ */
        .playlist-item .delete-btn {
            background: rgba(200, 200, 200, 0.4) !important;
            color: rgba(100, 100, 100, 0.8) !important;
        }

        .playlist-item .delete-btn i.fas.fa-trash {
            color: rgba(100, 100, 100, 0.8) !important;
        }

        /* Êí≠ÊîæÂàóË°®Âà†Èô§ÊåâÈíÆÁâπÊÆäÊ†∑Âºè */
        #playlist-modal .delete-btn {
            background: rgba(200, 200, 200, 0.4) !important;
            color: rgba(100, 100, 100, 0.8) !important;
        }

        #playlist-modal .delete-btn i {
            color: rgba(100, 100, 100, 0.8) !important;
        }

        /* Êí≠ÊîæÂàóË°®Âà†Èô§ÊåâÈíÆÊÇ¨ÂÅúÊïàÊûú */
        .playlist-item .delete-btn:hover,
        #playlist-modal .delete-btn:hover {
            background: rgba(200, 200, 200, 0.6) !important;
            transform: scale(1.05);
        }

        /* Á©∫Áä∂ÊÄÅ */
        .playlist-empty {
            text-align: center;
            padding: 30px 20px;
            color: #999;
            font-size: 14px;
        }

        .playlist-empty i {
            font-size: 32px;
            margin-bottom: 12px;
            opacity: 0.6;
        }

        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            width: 80%;
            max-width: 400px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .modal-header {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-weight: bold;
            font-size: 18px;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        /* ‰ªäÊó•Êó•ËÆ∞Ê®°ÊÄÅÊ°ÜÁâπÊÆäÊ†∑Âºè - ÁßªÈô§Â§ñÂ±ÇÊªöÂä®Êù° */
        #today-diary-modal .modal-body {
            padding: 15px;
            max-height: none;
            overflow-y: visible;
        }
        
        .modal-footer {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .modal-button {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }
        
        .modal-primary {
            background-color: var(--theme-button-bg, #007AFF);
            color: var(--theme-button-color, white);
            font-family: var(--theme-font-family);
            font-weight: var(--theme-button-font-weight, 500);
            letter-spacing: var(--theme-button-letter-spacing, 0);
            transition: all 0.2s ease;
        }
        
        .modal-primary:hover {
            background-color: var(--theme-button-bg-hover);
            transform: translateY(-1px);
            box-shadow: var(--theme-button-shadow);
        }
        
        .modal-secondary {
            background-color: var(--theme-button-secondary-bg, #eee);
            color: var(--theme-button-secondary-color, #333);
            font-family: var(--theme-font-family);
            font-weight: var(--theme-button-font-weight, 500);
            letter-spacing: var(--theme-button-letter-spacing, 0);
            transition: all 0.2s ease;
        }
        
        .modal-secondary:hover {
            background-color: var(--theme-button-secondary-bg-hover);
            transform: translateY(-1px);
        }
        
        /* üî•„Äê‰øÆÊîπ„ÄëÊ°åÈù¢Á´ØÊ∂àÊÅØÊìç‰ΩúËèúÂçï - Á∫ØÊñáÂ≠óÈ£éÊ†º */
        .message-menu {
            position: fixed;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            z-index: 1000;
            overflow: hidden;
            min-width: 140px;
            padding: 8px;
        }

        .message-menu-item {
            padding: 10px 16px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            border-radius: 8px;
            text-align: center;
            color: #333;
            background: transparent;
            border: none;
            margin: 2px 0;
        }

        .message-menu-item:hover {
            background: rgba(240, 240, 240, 0.5);
            transform: scale(1.02);
        }

        .message-menu-item.danger {
            color: #333;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÊ°åÈù¢Á´ØÊ∂àÊÅØËèúÂçïÊ∑±Ëâ≤‰∏ªÈ¢òÈÄÇÈÖç */
        .dark-theme .message-menu {
            background: rgba(45, 45, 45, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .dark-theme .message-menu-item {
            color: rgba(255, 255, 255, 0.9);
        }

        .dark-theme .message-menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .dark-theme .message-menu-item.danger {
            color: rgba(255, 255, 255, 0.9);
        }

        /* ÁºñËæëÊ∂àÊÅØÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .edit-message-modal {
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 20px 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .modal-footer {
            padding: 15px 20px 20px;
            display: flex;
            justify-content: flex-end;
            border-top: 1px solid #f0f0f0;
        }
        
        .edit-message-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            margin-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .message-sender {
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }
        
        .message-time {
            font-size: 12px;
            color: #888;
        }
        
        .edit-form-group {
            margin-bottom: 20px;
        }
        
        .edit-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }
        
        .edit-message-textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            font-family: inherit;
            background: white;
            color: #333;
            transition: border-color 0.2s ease;
            box-sizing: border-box;
        }
        
        .edit-message-textarea:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.1);
        }
        
        .edit-message-counter {
            text-align: right;
            margin-top: 5px;
            font-size: 12px;
            color: #888;
        }
        
        .edit-message-image {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .edit-message-image img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 6px;
        }
        
        .remove-image-btn {
            padding: 6px 12px;
            background: #ff3b30;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .remove-image-btn:hover {
            background: #e0261e;
        }
        
        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        
        .modal-cancel {
            background: #f5f5f5;
            color: #333;
            margin-right: 10px;
        }
        
        .modal-cancel:hover {
            background: #e8e8e8;
        }
        
        .modal-confirm {
            background: #007AFF;
            color: white;
        }
        
        .modal-confirm:hover {
            background: #0056b3;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* ÂÖ≥‰∫éÊàë‰ª¨È°µÈù¢ */
        .about-content {
            padding: 20px;
            text-align: center;
        }
        
        .about-title {
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .about-version {
            color: #888;
            margin-bottom: 30px;
        }
        
        .about-author {
            margin-top: 30px;
            font-style: italic;
        }
        
        /* Âä®ÊÄÅÊ†∑Âºè */
        .moments-page {
            height: 100%;
            overflow-y: auto;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        
        /* ËØÑËÆ∫ÂØπËØùÊ°ÜÊ†∑Âºè */
        .comments-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }
        
        .comments-dialog {
            background: white;
            border-radius: 15px 15px 0 0;
            width: 100%;
            max-width: 450px;
            max-height: 70vh;
            display: flex;
            flex-direction: column;
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .comments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .comments-header span {
            font-weight: 600;
            font-size: 16px;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
            padding: 5px;
        }
        
        .comments-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px 20px;
            max-height: 400px;
        }
        
        .comment-item {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .comment-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .comment-content {
            flex: 1;
        }
        
        .comment-text {
            background: #f5f5f5;
            padding: 8px 12px;
            border-radius: 12px;
            margin-bottom: 5px;
            line-height: 1.4;
        }
        
        .comment-name {
            color: #576b95;
            font-weight: 600;
            margin-right: 5px;
        }
        
        .reply-to {
            color: #999;
        }
        
        .reply-name {
            color: #576b95;
            font-weight: 600;
        }
        
        .comment-actions {
            display: flex;
            gap: 15px;
            align-items: center;
            font-size: 12px;
            color: #999;
            padding-left: 12px;
        }
        
        .comment-time {
            font-size: 12px;
            color: #999;
        }
        
        .reply-btn {
            background: none;
            border: none;
            color: #576b95;
            font-size: 12px;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        .reply-btn:hover {
            background: #f0f0f0;
        }
        
        .comments-input {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px 20px;
            border-top: 1px solid #f0f0f0;
            background: white;
        }
        
        .comments-input input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 14px;
            outline: none;
        }
        
        .comments-input input:focus {
            border-color: #576b95;
        }
        
        .comments-input button {
            background: #576b95;
            color: white;
            border: none;
            border-radius: 15px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .comments-input button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .no-comments {
            text-align: center;
            color: #999;
            font-size: 14px;
            padding: 40px 20px;
        }
        
        /* ÈÄâÊã©Ê®°ÂºèÊ†∑Âºè */
        .selection-bar {
            position: sticky;
            top: 0;
            background: white;
            border-bottom: 1px solid #f0f0f0;
            z-index: 100;
        }
        
        .selection-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
        }

        /* Âä®ÊÄÅÈ°µÈù¢ÈÄâÊã©Ê®°ÂºèÊåâÈíÆÊ†∑Âºè - ‰ΩøÁî®Êõ¥È´òÁâπÂºÇÊÄß */
        .selection-bar .selection-actions .cancel-btn {
            background: rgba(74, 132, 193, 0.85) !important;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 6px;
            color: white !important;
            font-size: 16px;
            cursor: pointer;
            padding: 5px 10px;
            width: auto !important;
            height: auto !important;
            display: inline-block !important;
            white-space: nowrap !important;
        }

        .cute-theme .selection-bar .selection-actions .cancel-btn {
            background: rgba(255, 182, 193, 0.85) !important;
        }

        .selection-count {
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }

        .selection-bar .selection-actions .delete-btn {
            background: rgba(255, 59, 48, 0.85) !important;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            color: white !important;
            border-radius: 6px;
            padding: 5px 10px;
            font-size: 16px;
            cursor: pointer;
            width: auto !important;
            height: auto !important;
            display: inline-block !important;
            white-space: nowrap !important;
        }

        .cute-theme .selection-bar .selection-actions .delete-btn {
            background: rgba(255, 182, 193, 0.85) !important;
        }

        .selection-bar .selection-actions .delete-btn:disabled {
            background: rgba(200, 200, 200, 0.6) !important;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .moment-checkbox {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
        }
        
        .moment-checkbox i {
            font-size: 16px;
            color: #576b95;
        }
        
        .moment-item.selection-mode {
            position: relative;
        }
        
        .moment-item.selected {
            background: rgba(87, 107, 149, 0.1);
            border-left: 3px solid #576b95;
        }
        
        /* ÁÇπËµûÁä∂ÊÄÅÊ†∑Âºè */
        .moment-action-btn.liked {
            color: #ff4757;
        }
        
        .moment-action-btn.liked i {
            color: #ff4757;
        }
        
        .moments-header {
            position: relative;
            margin: 0;
        }
        
        .moments-cover {
            position: relative;
            height: 260px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0;
            padding: 0;
        }
        
        .moments-cover:hover {
            filter: brightness(1.1);
        }
        
        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .cover-image-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 500;
            position: relative;
        }
        
        .cover-image-placeholder::after {
            content: "";
        }
        
        .cover-placeholder-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.8);
        }
        

        
        .moments-avatar {
            width: 70px;
            height: 70px;
            border-radius: 10px;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            position: absolute;
            top: 210px;
            right: 10px;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            z-index: 100;
        }
        
        .moments-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .moments-avatar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: inherit;
        }
        
        .moments-avatar:hover::before {
            opacity: 1;
        }
        
        .moments-avatar-icon {
            font-size: 30px;
            color: #ccc;
        }
        
        .moments-username {
            position: absolute;
            top: 230px;
            right: 90px;
            color: white;
            font-weight: 600;
            font-size: 16px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.7);
            cursor: pointer;
            z-index: 200;
            background: none;
            padding: 0;
            border: none;
            transition: all 0.3s ease;
        }
        
        .moments-username:hover {
            transform: scale(1.05);
            text-shadow: 0 2px 8px rgba(0,0,0,0.9);
        }
        

        
        .moments-list {
            background-color: white;
            min-height: calc(100vh - 260px);
            margin: 0;
            padding: 40px 0 0 0;
            position: relative;
            z-index: 10;
        }
        
        .moment-item {
            display: flex;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .moment-item:first-child {
            margin-top: 10px;
        }
        
        /* ÂèëÂ∏ÉÂä®ÊÄÅÈ°µÈù¢Ê†∑Âºè */
        .publish-moment-form {
            padding: 0;
        }
        
        .publish-btn {
            background: var(--color-primary-green);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .publish-btn:hover {
            background: #06a850;
            transform: scale(1.02);
        }
        
        .publish-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .moment-text-input {
            padding: 20px 15px;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
        }
        
        .moment-textarea {
            width: 100%;
            min-height: 120px;
            border: none;
            outline: none;
            font-size: 16px;
            line-height: 1.5;
            resize: none;
            font-family: inherit;
            background: transparent;
            color: #333;
        }
        
        .text-count {
            position: absolute;
            bottom: 8px;
            right: 15px;
            font-size: 12px;
            color: #999;
            background: rgba(255,255,255,0.9);
            padding: 2px 6px;
            border-radius: 4px;
        }        
        .moment-textarea::placeholder {
            color: #999;
        }
        
        .moment-images-section {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .moment-images-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .moment-image-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            background: #f5f5f5;
        }
        
        .moment-image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-image-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            background: rgba(0,0,0,0.6);
            color: white;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
        }
        
        .add-image-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #f8f8f8;
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #666;
        }
        
        .add-image-btn:hover {
            background: #f0f0f0;
            border-color: #ccc;
        }
        
        .add-image-btn i {
            font-size: 24px;
            margin-bottom: 8px;
            color: #999;
        }
        
        .add-image-btn span {
            font-size: 14px;
        }
        
        .publish-options {
            background: white;
        }
        
        .option-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .option-item:hover {
            background: #f8f8f8;
        }
        
        .option-item:last-child {
            border-bottom: none;
        }
        
        .option-item i:first-child {
            width: 20px;
            margin-right: 15px;
            color: #666;
        }
        
        .option-item span {
            flex: 1;
            font-size: 16px;
            color: #333;
        }
        
        .option-value {
            color: #999 !important;
            font-size: 14px !important;
            margin-right: 10px;
        }
        
        .option-item i:last-child {
            color: #ccc;
            font-size: 14px;
        }
        
        .moment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background-color: #f0f0f0;
            margin-right: 12px;
            flex-shrink: 0;
            overflow: hidden;
        }
        
        .avatar-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
        }
        
        .moment-content {
            flex: 1;
            min-width: 0;
        }
        
        .moment-username {
            font-weight: 600;
            color: #576b95;
            margin-bottom: 5px;
        }
        
        .moment-text {
            color: #333;
            line-height: 1.5;
            margin-bottom: 8px;
            word-wrap: break-word;
        }
        
        .moment-images {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3px;
            margin-bottom: 8px;
        }
        
        .moment-images img {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .moment-images img:hover {
            transform: scale(1.02);
        }
        
        .moment-image {
            aspect-ratio: 1;
            background-color: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .moment-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .moment-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }
        
        .moment-time-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .moment-time {
            font-size: 12px;
            color: #999;
        }
        
        .moment-actions {
            display: flex;
            gap: 15px;
        }
        
        .moment-action-btn {
            background: none;
            border: none;
            color: #576b95;
            font-size: 14px;
            cursor: pointer;
            padding: 5px;
        }
        
        .moment-interactions {
            background-color: #f7f7f7;
            border-radius: 4px;
            padding: 8px;
            margin-top: 8px;
            font-size: 13px;
            display: none;
        }
        
        .moment-interactions.show {
            display: block;
        }
        

        
        /* Èù¢ÂÖ∑Âå∫ÂüüÊ†∑Âºè */
        .persona-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 15px;
            background: var(--theme-header-bg);
            backdrop-filter: var(--theme-header-backdrop);
            border-bottom: 1px solid #eee;
        }
        
        .persona-title h2 {
            margin: 0;
            font-size: 20px;
            color: var(--theme-text-primary, #333);
            font-weight: 600;
        }
        
        .persona-title p {
            margin: 5px 0 0 0;
            font-size: 13px;
            color: #666;
        }
        
        .persona-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px 0;
        }
        
        .persona-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background-color 0.2s ease;
            position: relative;
        }
        
        .persona-item:hover {
            background-color: #f5f5f5;
        }
        
        .persona-item.active {
            background-color: var(--bg-blue-05);
            border-left: 3px solid #007AFF;
        }
        
        .persona-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--theme-avatar-bg-1, #f0f2f5), var(--theme-avatar-bg-2, #e8ebf0));
            margin-right: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--theme-avatar-text, #8b9dc3);
            font-weight: bold;
            font-size: 18px;
            background-size: cover;
            background-position: center;
            border: 2px solid var(--theme-avatar-border, rgba(255, 255, 255, 0.8));
            flex-shrink: 0;
        }
        
        .persona-info {
            flex: 1;
            min-width: 0;
        }
        
        .persona-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 5px;
            color: var(--theme-text-primary, #333);
        }
        
        .persona-description {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .persona-actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }
        
        .persona-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .persona-edit-btn {
            background: var(--bg-blue-10);
            color: #007AFF;
        }
        
        .persona-edit-btn:hover {
            background: var(--bg-blue-20);
        }
        
        .persona-delete-btn {
            background: var(--bg-red-10);
            color: #FF3B30;
        }
        
        .persona-delete-btn:hover {
            background: var(--bg-red-20);
        }
        
        .current-persona {
            border-top: 1px solid #eee;
            background: var(--theme-form-bg, rgba(255, 255, 255, 0.9));
            padding: 0;
        }
        
        .current-persona .menu-item {
            border-bottom: none;
            margin: 0;
        }
        
        .current-persona-name {
            font-weight: 500;
            color: #007AFF;
            font-size: 14px;
        }
        
        /* Â§öÈÄâÊ®°ÂºèÊ†∑Âºè */
        .contact-item.selected {
            background-color: rgba(0, 123, 255, 0.1);
            border-left: 3px solid #007AFF;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            transition: background-color 0.2s ease;
        }
        
        /* ËÅäÂ§©ÈÄâÈ°πÊ†∑Âºè */
        .chat-option-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background-color 0.2s ease;
            position: relative;
        }
        
        .chat-option-item:hover {
            background-color: #f5f5f5;
        }
        
        .chat-option-item:last-child {
            border-bottom: none;
        }
        
        /* Â∑≤Â≠òÂú®ÂØπËØùÁöÑËßíËâ≤Ê†∑Âºè */
        .chat-option-item.has-existing-chat {
            background-color: #fff8e1;
            border-left: 3px solid #ff9800;
        }
        
        .chat-option-item.has-existing-chat:hover {
            background-color: #fff3c4;
        }
        
        /* Â∑≤ÊúâÂØπËØùÊ†áËÆ∞ */
        .chat-exists-badge {
            background-color: #ff9800;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 8px;
            font-weight: 500;
        }

        /* === ÂàÜÁªÑÊ†∑Âºè === */

        .group-header {
            background: linear-gradient(135deg, #f8f9ff 0%, #e6f0ff 100%);
            padding: 12px 15px;
            border-bottom: 1px solid rgba(0, 122, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 122, 255, 0.08);
        }

        .group-header::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, #007AFF, #5AC8FA);
            border-radius: 0 2px 2px 0;
        }





        .group-title-area {
            display: flex;
            align-items: center;
            cursor: pointer;
            flex: 1;
            padding: 2px 0;
            border-radius: 4px;
            transition: all 0.2s ease;
        }



        .group-chevron {
            margin-right: 10px;
            color: #007AFF;
            font-size: 11px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: rgba(0, 122, 255, 0.1);
        }

        .group-title {
            font-weight: 600;
            font-size: 15px;
            color: #1a1a1a;
            margin-right: 8px;
            letter-spacing: 0.3px;
            display: flex;
            align-items: center;
        }



        .group-count {
            font-size: 11px;
            color: #007AFF;
            background: rgba(0, 122, 255, 0.1);
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 500;
            margin-left: auto;
            min-width: 24px;
            text-align: center;
        }

        .group-interaction-icon {
            color: #FF6B35;
            font-size: 12px;
            margin-left: 6px;
        }

        .group-manage-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .edit-group-btn, .delete-group-btn {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .edit-group-btn {
            background: rgba(0, 122, 255, 0.6);
            color: white;
        }

        .delete-group-btn {
            background: rgba(255, 59, 48, 0.6);
            color: white;
        }

        .edit-group-btn:hover {
            background: rgba(0, 122, 255, 0.8);
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(0, 122, 255, 0.3);
        }

        .delete-group-btn:hover {
            background: rgba(255, 59, 48, 0.8);
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(255, 59, 48, 0.3);
        }

        .group-characters {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin-bottom: 12px;
            padding-bottom: 8px;
        }



        .group-manage-header, .multiselect-header {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 12px 15px;
            border-bottom: 1px solid var(--color-border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .multiselect-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .multiselect-icon {
            color: #007AFF;
            font-size: 16px;
        }

        .multiselect-text {
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }

        .multiselect-actions {
            display: flex;
            gap: 8px;
        }

        .multiselect-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 60px;
            justify-content: center;
        }

        .multiselect-btn i {
            font-size: 11px;
        }

        .multiselect-btn span {
            font-size: 12px;
        }

        .move-btn {
            background: rgba(0, 122, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        .move-btn:hover {
            background: rgba(0, 122, 255, 0.8);
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0, 122, 255, 0.3);
        }

        /* ËßíËâ≤ÂàÜÁªÑÈ°µÈù¢Â§öÈÄâÊåâÈíÆÊ†∑Âºè - ‰ΩøÁî®Êõ¥È´òÁâπÂºÇÊÄß */
        .multiselect-header .multiselect-actions .multiselect-btn.delete-btn,
        .group-manage-header .group-manage-actions .multiselect-btn.delete-btn {
            background: rgba(255, 59, 48, 0.6) !important;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            color: white !important;
        }

        .multiselect-header .multiselect-actions .multiselect-btn.delete-btn:hover,
        .group-manage-header .group-manage-actions .multiselect-btn.delete-btn:hover {
            background: rgba(255, 59, 48, 0.8) !important;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 59, 48, 0.3);
        }

        .multiselect-header .multiselect-actions .multiselect-btn.cancel-btn,
        .group-manage-header .group-manage-actions .multiselect-btn.cancel-btn {
            background: rgba(74, 132, 193, 0.6) !important;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            color: white !important;
        }

        .cute-theme .multiselect-header .multiselect-actions .multiselect-btn.cancel-btn,
        .cute-theme .group-manage-header .group-manage-actions .multiselect-btn.cancel-btn {
            background: rgba(255, 182, 193, 0.6) !important;
        }

        .multiselect-header .multiselect-actions .multiselect-btn.cancel-btn:hover,
        .group-manage-header .group-manage-actions .multiselect-btn.cancel-btn:hover {
            background: rgba(74, 132, 193, 0.8) !important;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(74, 132, 193, 0.3);
        }

        .cute-theme .multiselect-header .multiselect-actions .multiselect-btn.cancel-btn:hover,
        .cute-theme .group-manage-header .group-manage-actions .multiselect-btn.cancel-btn:hover {
            background: rgba(255, 182, 193, 0.8) !important;
            box-shadow: 0 4px 12px rgba(255, 182, 193, 0.3);
        }

        .multiselect-header .multiselect-actions .multiselect-btn.move-btn {
            background: rgba(74, 132, 193, 0.6) !important;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            color: white !important;
        }

        .cute-theme .multiselect-header .multiselect-actions .multiselect-btn.move-btn {
            background: rgba(255, 182, 193, 0.6) !important;
        }

        .multiselect-header .multiselect-actions .multiselect-btn.move-btn:hover {
            background: rgba(74, 132, 193, 0.8) !important;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(74, 132, 193, 0.3);
        }

        .cute-theme .multiselect-header .multiselect-actions .multiselect-btn.move-btn:hover {
            background: rgba(255, 182, 193, 0.8) !important;
            box-shadow: 0 4px 12px rgba(255, 182, 193, 0.3);
        }

        .group-manage-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .group-manage-icon {
            color: #6C757D;
            font-size: 16px;
        }

        .group-manage-text {
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }

        .group-manage-actions {
            display: flex;
            gap: 8px;
        }

        .create-btn {
            background: #28A745;
            color: white;
        }

        .create-btn:hover {
            background: #1E7E34;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(40, 167, 69, 0.3);
        }

        .done-btn {
            background: #007AFF;
            color: white;
        }

        .done-btn:hover {
            background: #0056CC;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0, 122, 255, 0.3);
        }

        /* Â∞èÂ±èÂπïÈÄÇÈÖç */
        @media (max-width: 480px) {
            .multiselect-header, .group-manage-header {
                flex-direction: column;
                gap: 12px;
                align-items: stretch;
            }

            .multiselect-header .multiselect-actions,
            .group-manage-header .group-manage-actions {
                justify-content: center;
                flex-wrap: wrap;
            }

            .multiselect-btn {
                flex: 1;
                min-width: 80px;
                max-width: 100px;
            }

            .multiselect-text, .group-manage-text {
                font-size: 13px;
            }

            /* Á°Æ‰øùÂä®ÊÄÅÈ°µÈù¢ÈÄâÊã©Ê®°ÂºèÊåâÈíÆ‰øùÊåÅÊ∞¥Âπ≥Â∏ÉÂ±Ä */
            .selection-bar .selection-actions {
                display: flex !important;
                flex-direction: row !important;
                justify-content: space-between !important;
                align-items: center !important;
                flex-wrap: nowrap !important;
            }
        }

        .move-group-btn, .create-group-btn {
            background: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            margin-right: 8px;
            transition: all 0.2s ease;
        }

        .move-group-btn:hover, .create-group-btn:hover {
            background: #e0e0e0;
            border-color: #ccc;
        }

        .move-character-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: rgba(0, 123, 255, 0.1);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-left: 8px;
        }

        .move-character-btn:hover {
            background: rgba(0, 123, 255, 0.2);
            transform: scale(1.1);
        }

        .move-character-btn i {
            color: #007AFF;
            font-size: 12px;
        }

        .empty-group-message {
            padding: 20px;
            text-align: center;
            color: #999;
            font-size: 14px;
            background: linear-gradient(135deg, #f9f9f9 0%, #f5f5f5 100%);
            border: 1px dashed #ddd;
            border-radius: 8px;
            margin: 10px;
            position: relative;
        }

        .empty-group-message::before {
            content: 'üìù';
            display: block;
            font-size: 24px;
            margin-bottom: 8px;
            opacity: 0.6;
        }

        /* Ê¢¶ÂπªÁÖßÁâáÊ†∑Âºè */
        .dreamy-photo-container {
            position: relative;
            display: inline-block;
            cursor: pointer;
            max-width: 200px;
            border-radius: 12px;
            overflow: hidden;
            margin: 8px 0;
        }
        
        .dreamy-photo {
            position: relative;
            width: 200px;
            height: 150px;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .dreamy-photo:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .photo-misty-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.9) 0%, 
                rgba(240, 248, 255, 0.8) 30%, 
                rgba(230, 235, 250, 0.7) 60%, 
                rgba(255, 255, 255, 0.9) 100%);
            backdrop-filter: blur(2px);
        }
        
        .photo-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: transparent;
            backdrop-filter: none;
            border-radius: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 4;
            transition: all 0.3s ease;
            box-shadow: none;
        }
        
        .photo-badge i {
            font-size: 12px;
            color: #666;
            opacity: 0.7;
        }
        
        .dreamy-photo:hover .photo-badge {
            background: transparent;
            transform: scale(1.1);
        }
        
        .dreamy-photo:hover .photo-badge i {
            opacity: 1;
            color: #555;
        }
        
        .sparkle-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 2;
            transition: opacity 0.3s ease;
        }
        
        .sparkle {
            position: absolute;
            font-size: 14px;
            opacity: 0.6;
        }
        
        .sparkle-1 {
            top: 20%;
            left: 25%;
        }
        
        .sparkle-2 {
            top: 30%;
            right: 20%;
        }
        
        .sparkle-3 {
            bottom: 35%;
            left: 15%;
        }
        
        .sparkle-4 {
            bottom: 25%;
            right: 30%;
        }
        
        .sparkle-5 {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .photo-text-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3;
            transition: all 0.3s ease;
            border-radius: 12px;
        }
        
        .photo-description {
            padding: 16px;
            text-align: center;
            color: #333;
            font-size: 14px;
            line-height: 1.4;
            max-height: 90%;
            overflow-y: auto;
        }

        /* ÂàÜÁªÑÈÄâÈ°πÊ†∑Âºè */
        .group-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .group-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .group-option:hover {
            background-color: #f8f9fa;
        }

        .group-option:last-child {
            border-bottom: none;
        }

        .group-name {
            font-weight: 500;
            color: var(--color-text);
        }

        .group-option i {
            color: #ccc;
            font-size: 12px;
        }

        /* Ë°®ÂçïÊ†∑ÂºèÂ¢ûÂº∫ */
        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--color-text);
        }

        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);
        }

        .form-checkbox {
            margin-right: 8px;
        }

        .form-help-text {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
            margin-bottom: 0;
        }
        
        /* ÂØπËØùÁä∂ÊÄÅÊåáÁ§∫Âô® */
        .chat-status-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 10px;
            color: #ff9800;
            margin-left: auto;
            text-align: center;
        }
        
        .chat-status-indicator i {
            font-size: 16px;
            margin-bottom: 2px;
        }
        
        .chat-option-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            font-size: 18px;
        }
        
        .chat-option-text {
            flex: 1;
        }
        
        .chat-option-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 3px;
        }
        
        .chat-option-desc {
            font-size: 13px;
            color: #666;
        }
        
        /* Áæ§ËÅäÊàêÂëòÈÄâÊã©Ê†∑Âºè */
        .group-member-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .group-member-item:hover {
            background-color: #f5f5f5;
        }
        
        .group-member-item.selected {
            background-color: rgba(0, 123, 255, 0.1);
        }
        
        .group-member-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid #007AFF;
            border-radius: 3px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .group-member-checkbox.checked {
            background-color: #007AFF;
            color: white;
        }
        
        /* Êñ∞ËÅäÂ§©ËÆæÁΩÆÁïåÈù¢Ê†∑Âºè */
        .settings-container {
            padding: 0;
            background-color: #f8f9fa;
        }
        
        .settings-section {
            margin-bottom: 20px;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            background-color: #f8f9fa;
        }
        
        .section-icon {
            font-size: 16px;
            color: var(--theme-button-bg, #4a84c1);
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .setting-card {
            background: white;
            border-radius: 12px;
            margin: 0 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        
        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-item:hover {
            background-color: #f8f9fa;
        }
        
        .setting-item.danger-item:hover {
            background-color: #fff5f5;
        }
        
        .setting-left {
            flex: 1;
            min-width: 0;
        }
        
        .setting-right {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }
        
        .setting-label {
            font-size: 16px;
            font-weight: 500;
            color: #333;
            margin-bottom: 2px;
        }
        
        .setting-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
        }
        
        .setting-value {
            font-size: 14px;
            color: #666;
            margin-right: 5px;
        }
        
        .setting-select {
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            color: #333;
            min-width: 120px;
        }
        
        /* ÂºÄÂÖ≥ÊåâÈíÆÊ†∑Âºè */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 28px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background-color: var(--theme-button-bg, #4a84c1);
        }
        
        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(22px);
        }
        
        /* ËÅäÂ§©Ê®°ÂºèÂàáÊç¢Ê†∑Âºè */
        .chat-mode-switch {
            display: flex;
            background: var(--bg-white-50);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--bg-black-10);
            border-radius: 12px;
            padding: 4px;
            margin: 12px 20px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
        }
        
        .chat-mode-option {
            flex: 1;
            position: relative;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .chat-mode-option input[type="radio"] {
            display: none;
        }
        
        .chat-mode-option label {
            display: block;
            padding: 10px 16px;
            text-align: center;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: transparent;
            color: rgba(0, 0, 0, 0.6);
            position: relative;
            overflow: hidden;
        }
        
                .chat-mode-option input[type="radio"]:checked + label {
            background: var(--bg-white-90);
            color: var(--theme-button-bg, #4a84c1);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .chat-mode-option label:hover {
            background: var(--bg-white-50);
        }
        
        /* Á∫ø‰∏ãÊ®°ÂºèÂ≠óÊï∞ÊéßÂà∂ */
        .offline-length-control {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 12px 20px;
            padding: 8px 12px;
            background: var(--theme-form-bg);
            backdrop-filter: blur(5px);
            border-radius: 8px;
            border: 1px solid var(--bg-black-05);
            transition: all 0.3s ease;
        }
        
        .control-label, .control-unit {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }
        
        .offline-length-control input[type="number"] {
            width: 60px;
            padding: 4px 8px;
            border: 1px solid var(--theme-input-border);
            border-radius: 6px;
            background: var(--bg-white-80);
            font-size: 12px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .offline-length-control input[type="number"]:focus {
            outline: none;
            border-color: var(--theme-button-bg, #4a84c1);
            box-shadow: 0 0 0 2px rgba(74, 132, 193, 0.2);
        }
        
        /* ÂêéÂè∞‰∫íÂä®ËØ¶ÁªÜËÆæÁΩÆ */
        .background-interaction-details {
            border-top: 1px solid #f5f5f5;
            margin-top: 0;
            padding-top: 0;
        }
        
        .background-interaction-details .setting-item {
            border-bottom: 1px solid #f8f8f8;
        }
        
        .background-interaction-details .setting-item:last-child {
            border-bottom: none;
        }
        
        /* Á§æ‰∫§Âä®ÊÄÅËÆæÁΩÆËØ¶ÁªÜÈÄâÈ°π */
        .weibo-settings {
            border-top: 1px solid #f5f5f5;
            margin-top: 0;
            padding-top: 0;
        }
        
        /* ÂäüËÉΩËØ¥ÊòéÊ†∑Âºè */
        .setting-explanation {
            background: var(--setting-card-bg);
            backdrop-filter: blur(5px);
            border-radius: 8px;
            margin: 12px 20px;
            padding: 12px 16px;
            border: 1px solid var(--bg-black-05);
        }
        
        .explanation-text {
            font-size: 12px;
            color: #555;
            line-height: 1.5;
        }
        
        .explanation-text strong {
            color: #333;
            font-weight: 600;
        }
        
        /* Â§¥ÂÉèËÆæÁΩÆÊ†∑Âºè */
        .avatar-setting-group {
            margin-bottom: 25px;
        }
        
        .avatar-preview-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .avatar-preview-container .avatar-preview {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f0f2f5, #e8ebf0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: #999;
            background-size: cover;
            background-position: center;
            border: 3px solid var(--theme-avatar-border);
            box-shadow: var(--shadow-lg);
        }
        
        /* ËÉåÊôØÈ¢ÑËßàÊ†∑Âºè */
        .background-preview-container {
            margin-bottom: 20px;
        }
        
        .background-preview {
            width: 100%;
            height: 200px;
            border-radius: 12px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ddd;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }
        
        .preview-text {
            color: #999;
            font-size: 14px;
            font-weight: 500;
        }
        
        /* Â¢ûÂº∫ÁöÑÈ¢úËâ≤ÈÄâÊã©Âô®Ê†∑Âºè */
        .color-setting-group {
            margin-bottom: 25px;
            padding: 20px;
            background: var(--theme-form-bg);
            border-radius: 12px;
            border: 1px solid var(--bg-black-05);
        }
        
        /* Ëá™ÂÆö‰πâË°®ÊÉÖÂåÖÊ†∑Âºè */
        .custom-emoji-panel {
            position: fixed;
            bottom: 60px;
            left: 8px;
            right: 8px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
            padding: 15px;
            display: none;
            z-index: 999;
            max-height: 300px;
            overflow-y: auto;
            max-width: 344px;
            margin: 0 auto;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .emoji-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .emoji-tab {
            padding: 8px 12px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-size: 14px;
            color: #666;
            transition: all 0.2s ease;
        }
        
        .emoji-tab.active {
            color: #007AFF;
            border-bottom-color: #007AFF;
        }
        
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 15px;
            padding: 8px;
        }
        
        .custom-emoji-item {
            aspect-ratio: 1;
            border-radius: 8px;
            background-size: cover;
            background-position: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease;
            position: relative;
            overflow: visible !important;
        }
        
        .custom-emoji-item:hover {
            border-color: #007AFF;
            transform: scale(1.05);
        }
        
        .custom-emoji-item.placeholder {
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #999;
            border: 2px dashed #ddd;
            overflow: hidden;
        }
        
        .custom-emoji-item.placeholder:hover {
            background: #eee;
            border-color: #007AFF;
        }
        
        .emoji-delete-btn {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 14px;
            height: 14px;
            background: rgba(255, 255, 255, 0.9) !important;
            color: #666 !important;
            border-radius: 50% !important;
            border: none !important;
            cursor: pointer !important;
            font-size: 10px !important;
            font-weight: normal !important;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif !important;
            line-height: 1 !important;
            display: none !important;
            align-items: center !important;
            justify-content: center !important;
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.2s ease !important;
            z-index: 10 !important;
        }
        
        .custom-emoji-item:hover .emoji-delete-btn {
            display: flex !important;
        }
        
        .emoji-delete-btn:hover {
            background: rgba(255, 255, 255, 1) !important;
            color: #ff3b30 !important;
            transform: scale(1.1) !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
        }
        
        .emoji-delete-btn:active {
            transform: scale(0.9) !important;
            background: rgba(255, 59, 48, 0.1) !important;
        }
        
        /* ÁßªÂä®Á´ØÈÄÇÈÖç */
        @media (max-width: 768px) {
            .emoji-delete-btn {
                width: 16px !important;
                height: 16px !important;
                display: flex !important;
                font-size: 12px !important;
            }
            
            .emoji-delete-btn:active {
                background: rgba(255, 255, 255, 1) !important;
                color: #ff3b30 !important;
                transform: scale(0.9) !important;
            }
        }
        
        .color-picker-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .color-input {
            width: 60px;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .color-preview {
            width: 100px;
            height: 40px;
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .opacity-setting {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .opacity-setting label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }
        
        .opacity-setting input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .opacity-setting input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--theme-button-bg, #4a84c1);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        /* Ê∞îÊ≥°È¢ÑËßàÊºîÁ§∫ */
        .bubble-preview-demo {
            margin-top: 20px;
            padding: 20px;
            background: var(--bubble-demo-bg);
            border-radius: 12px;
            border: 1px solid var(--bg-black-05);
        }
        
        .demo-message {
            margin-bottom: 15px;
            display: flex;
        }
        
        .demo-message.my-message {
            justify-content: flex-end;
        }
        
        .demo-message.ai-message {
            justify-content: flex-start;
        }
        
        .demo-bubble {
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 14px;
            max-width: 200px;
            word-wrap: break-word;
        }
        
        /* ÂÆöÊó∂ÂèëÂ∏ÉÊó∂Èó¥ÁÇπÊ†∑Âºè */
        .schedule-time-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 8px 12px;
            background: var(--schedule-item-bg);
            border-radius: 8px;
            border: 1px solid var(--bg-black-05);
        }
        
        .schedule-time-item input[type="time"] {
            padding: 4px 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .schedule-time-item button {
            background: #ff3b30;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        /* Á§æ‰∫§ËÆæÁΩÆËØ¶ÁªÜÈÄâÈ°π */
        .social-settings {
            border-top: 1px solid #f5f5f5;
            margin-top: 0;
            padding-top: 0;
        }
        
        /* ‰∏ªÈ¢òÂåñÊªëÂùóÊ†∑Âºè */
        .theme-range {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(var(--theme-button-bg-rgb, 74, 132, 193), 0.2);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .theme-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--theme-button-bg, #4a84c1);
            cursor: pointer;
            box-shadow: var(--shadow-md);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: var(--slider-thumb-border);
            transition: all 0.3s ease;
        }
        
        .theme-range::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .theme-range::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--theme-button-bg, #4a84c1);
            cursor: pointer;
            border: var(--slider-thumb-border);
            box-shadow: var(--shadow-md);
        }
        
        /* ËÆæÁΩÆËåÉÂõ¥ÂÆπÂô® */
        .setting-range-container {
            margin: 15px 20px;
        }
        
        .range-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 12px;
            color: #666;
        }
        
        /* Ëá™ÂÆö‰πâËæìÂÖ•ÂÆπÂô® */
        .custom-input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 20px;
            padding: 12px 16px;
            background: var(--custom-input-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 10px;
            border: 1px solid var(--bg-black-05);
        }
        
        /* APIËÆæÁΩÆÊ®°ÂûãÈÄâÊã©Ê°ÜÊ†∑Âºè */
        #model-select {
            max-height: 200px !important;
            overflow-y: auto !important;
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
            width: 100% !important;
            max-width: calc(100vw - 160px) !important; /* È¢ÑÁïôÊãâÂèñÊ®°ÂûãÊåâÈíÆÁöÑÁ©∫Èó¥ */
            box-sizing: border-box !important;
        }
        
        /* Ê®°ÂûãÈÄâÊã©Ê°ÜÁöÑoptionÊ†∑Âºè */
        #model-select option {
            padding: 8px 12px !important;
            white-space: nowrap !important;
            overflow: hidden !important;
            text-overflow: ellipsis !important;
            max-width: 100% !important;
            box-sizing: border-box !important;
        }
        
        /* Á°Æ‰øùÊ®°ÂûãÈÄâÊã©Ê°ÜÁöÑÂÆπÂô®‰∏çË∂ÖÂá∫Â±èÂπï */
        #model-select[style*="flex: 1"] {
            min-width: 0 !important;
            flex-shrink: 1 !important;
        }
        
        #model-select::-webkit-scrollbar {
            width: 6px;
        }
        
        #model-select::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }
        
        #model-select::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 3px;
        }
        
        #model-select::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.5);
        }
        
        /* APIÈÖçÁΩÆÂç°ÁâáÊ†∑Âºè */
        .config-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            position: relative;
            overflow: hidden;
        }
        
        .config-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }
        
        .config-card:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
            border-color: rgba(74, 132, 193, 0.3) !important;
        }
        
        .config-card:hover::before {
            left: 100%;
        }
        
        .config-card:active {
            transform: translateY(-1px) !important;
            transition: transform 0.1s !important;
        }
        
        /* APIËÆæÁΩÆË°®ÂçïËæìÂÖ•Ê°ÜÁÑ¶ÁÇπÁä∂ÊÄÅ */
        input[type="text"]:focus,
        input[type="password"]:focus,
        select:focus {
            outline: none !important;
            border-color: var(--theme-input-focus, rgba(0, 123, 255, 0.5)) !important;
            background: var(--theme-form-bg, rgba(255, 255, 255, 0.95)) !important;
            box-shadow: 0 0 0 3px var(--theme-input-focus-shadow, rgba(0, 123, 255, 0.1)) !important;
            transform: translateY(-1px) !important;
        }
        
        /* Ê∏©Â∫¶ÊªëÂùóÊ†∑ÂºèÂ¢ûÂº∫ */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--theme-button-bg, #4a84c1);
            cursor: pointer;
            box-shadow: var(--shadow-md);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: var(--slider-thumb-border);
            transition: all 0.3s ease;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--theme-button-bg, #4a84c1);
            cursor: pointer;
            border: var(--slider-thumb-border);
            box-shadow: var(--shadow-md);
        }
        
        /* ÊåâÈíÆÊÇ¨ÂÅúÊïàÊûúÂ¢ûÂº∫ */
        button:hover {
            transform: translateY(-2px) !important;
        }
        
        button:active {
            transform: translateY(0) !important;
        }
        
        .input-label, .input-unit {
            font-size: 13px;
            color: #666;
            font-weight: 500;
        }
        
        .theme-input {
            width: 80px;
            padding: 6px 10px;
            border: 1px solid var(--theme-input-border);
            border-radius: 8px;
            font-size: 13px;
            background: var(--input-white-bg);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .theme-input:focus {
            outline: none;
            border-color: var(--theme-button-bg, #4a84c1);
            box-shadow: 0 0 0 2px rgba(var(--theme-button-bg-rgb, 74, 132, 193), 0.2);
            background: rgba(255, 255, 255, 1);
        }
        
        /* ‰∏ªÈ¢òÂåñÊåâÈíÆ */
        .theme-button {
            padding: 10px 20px;
            border-radius: var(--theme-button-radius, 8px);
            border: none;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .theme-button-primary {
            background: var(--theme-button-bg-rgba);
            color: var(--theme-button-color, white);
            border: 1px solid var(--border-light);
        }
        
        .theme-button-primary:hover {
            background: var(--theme-button-bg-hover, rgba(74, 132, 193, 1));
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
                .theme-button-secondary {
            background: var(--theme-button-secondary-bg-rgba);
            color: #666;
            border: 1px solid var(--bg-black-10);
        }

        .theme-button-secondary:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        /* CSSÂèòÈáèÊîØÊåÅ */
        :root {
            --theme-button-bg-rgb: 74, 132, 193;
        }
        
        body[data-theme="cute"] {
            --theme-button-bg-rgb: 255, 182, 193;
        }
        
        /* ÂèØÁà±‰∏ªÈ¢òÁöÑheaderÁâπÊÆäÊ†∑Âºè */
        body[data-theme="cute"] .app-header {
            border-bottom: 1px solid #ffccd5;
            background-color: rgba(255, 230, 240, 0.8) !important;
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
        }
        
        /* ÂèØÁà±‰∏ªÈ¢òÁöÑÂ∑•ÂÖ∑Èù¢ÊùøÊ†∑Âºè */
        body[data-theme="cute"] .tools-panel {
            background: var(--bg-white-95);
            border: 1px solid rgba(255, 182, 193, 0.3);
        }
        
        body[data-theme="cute"] .tool-icon {
            background: var(--theme-button-bg-rgba);
        }
        
        body[data-theme="cute"] .tool-item:hover::before {
            background: rgba(255, 182, 193, 0.2);
        }
        

        
        /* ÂìçÂ∫îÂºèËÆæËÆ°‰ºòÂåñ */
        @media (max-width: 400px) {
            .tools-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 12px;
            }
            
            .tool-item {
                padding: 10px 6px;
            }
            
            .tool-icon {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .tool-label {
                font-size: 10px;
            }
        }
        

        
        
        
        
        /* Êà≥‰∏ÄÊà≥Á≥ªÁªüÊ∂àÊÅØÊ†∑Âºè */
        .poke-system-message {
            text-align: center;
            color: #999;
            font-size: 13px;
            padding: 6px 12px;
            margin: 4px auto;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 12px;
            display: inline-block;
            max-width: 200px;
        }
        
        .poke-system-container {
            text-align: center;
            margin: 4px 0;
        }
        
        /* ÁßªÈô§ÈáçÂ§çÁöÑÈÄâ‰∏≠Ê†∑Âºè - Áé∞Âú®Âè™‰ΩøÁî®Â§¥ÂÉè‰∏äÁöÑÂãæÂè∑ */
        
        /* ÈÄâÊã©Ê®°Âºè‰∏ãÁöÑÊ∂àÊÅØÂÆπÂô®Ê†∑Âºè */
        .message-container.selected {
            /* ‰øùÊåÅÈÄâ‰∏≠Áä∂ÊÄÅÔºåÁî±ÂÖ∂‰ªñÊ†∑ÂºèÊéßÂà∂ÈÄâ‰∏≠ÊïàÊûú */
            background: none;
        }
        
        /* ‰∏ªÈ¢òÊ†∑ÂºèÂÆö‰πâÂú®ÂêéÈù¢Áªü‰∏ÄÂ§ÑÁêÜ */
        

        

        
        /* ËÅäÂ§©Ê∂àÊÅØÁïåÈù¢‰ΩøÁî®ÂíåÂÆåÊàê.html‰∏ÄÊ†∑ÁöÑheaderÊ†∑Âºè */
        #api-chat-screen .header {
            display: flex !important;
        }
        
        #api-chat-screen .header .default-controls, #api-chat-screen .header .selection-controls { 
            display: contents;
        }
        
        #api-chat-screen.selection-mode .default-controls { 
            display: none;
        }
        
        #api-chat-screen:not(.selection-mode) .selection-controls { 
            display: none;
        }
        
        #selection-cancel-btn, #selection-delete-btn {
            font-size: 13px;
            cursor: pointer;
            padding: 6px 12px;
            transition: all 0.2s ease;
            border-radius: 16px;
            font-weight: 500;
            min-width: 50px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* ÁÆÄÁ∫¶ÁªèÂÖ∏‰∏ªÈ¢ò - ÈõæÈúæËìùÂèñÊ∂àÊåâÈíÆ */
        #selection-cancel-btn {
            background: rgba(74, 132, 193, 0.6);
            color: white;
        }

        /* ÁÆÄÁ∫¶ÁªèÂÖ∏‰∏ªÈ¢ò - ÈõæÈúæÁ∫¢Âà†Èô§ÊåâÈíÆ */
        #selection-delete-btn {
            background: rgba(255, 59, 48, 0.6);
            color: white;
        }

        /* ÂèØÁà±È£é‰∏ªÈ¢ò - ÈõæÈúæÁ≤âÂèñÊ∂àÊåâÈíÆ */
        .cute-theme #selection-cancel-btn {
            background: rgba(255, 182, 193, 0.6);
            color: white;
        }

        /* ÂèØÁà±È£é‰∏ªÈ¢ò - ÈõæÈúæÁ∫¢Âà†Èô§ÊåâÈíÆ */
        .cute-theme #selection-delete-btn {
            background: rgba(255, 59, 48, 0.6);
            color: white;
        }

        #selection-count {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            padding: 0 8px;
            white-space: nowrap;
        }

        #selection-cancel-btn:hover {
            background: rgba(74, 132, 193, 0.8);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(74, 132, 193, 0.3);
        }

        .cute-theme #selection-cancel-btn:hover {
            background: rgba(255, 182, 193, 0.8);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 182, 193, 0.3);
        }

        #selection-delete-btn:hover {
            background: rgba(255, 59, 48, 0.8);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 59, 48, 0.3);
        }

        #selection-cancel-btn:active,
        #selection-delete-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        /* Ê∂àÊÅØÈÄâ‰∏≠Áä∂ÊÄÅÊ†∑Âºè */
        .message-container.selected .message-avatar::after { 
            content: '‚úî'; 
            position: absolute; 
            bottom: -5px; 
            right: -5px; 
            background-color: var(--theme-button-bg, #4a84c1); 
            color: white; 
            width: 20px; 
            height: 20px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 12px; 
            font-weight: bold; 
            z-index: 10; 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); 
        }
        
        .message-container.sent.selected .message-avatar::after { 
            bottom: -5px; 
            left: -5px; 
            right: auto;
        }
        
        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÈÄâ‰∏≠Ê†áËÆ∞ */
        body[data-theme="cute"] .message-container.selected .message-avatar::after {
            background-color: var(--theme-button-bg, #ffb6c1);
        }
        
        /* Ëá™ÁÑ∂‰∏ªÈ¢ò‰∏ãÁöÑÈÄâ‰∏≠Ê†áËÆ∞ */
        
        /* ÁßëÊäÄ‰∏ªÈ¢ò‰∏ãÁöÑÈÄâ‰∏≠Ê†áËÆ∞ */
        
        /* Ê¢¶Âπª‰∏ªÈ¢ò‰∏ãÁöÑÈÄâ‰∏≠Ê†áËÆ∞ */
        
        /* ÁßªÈô§Ê∂àÊÅØÂÆπÂô®ÈÄâ‰∏≠Êó∂ÁöÑËÉåÊôØ */
        .message-container.selected {
            background: none !important;
        }

        /* ÈöêËóèÂ§¥ÂÉèÊó∂ÁöÑÈÄâ‰∏≠Ê†áËÆ∞ */
        .message-container.selected.no-avatar::before {
            content: '‚úî';
            position: absolute;
            right: -25px;
            top: 50%;
            transform: translateY(-50%);
            background-color: var(--theme-button-bg, #4a84c1);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .message-container.sent.selected.no-avatar::before {
            right: auto;
            left: -25px;
        }
        
        .poke-icon {
            margin-right: 8px;
            color: #ff69b4;
            animation: pokeWave 1s ease-in-out;
        }
        
        @keyframes pokeShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }
        
        @keyframes pokeWave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }
        
        /* Â§¥ÂÉèÊà≥‰∏ÄÊà≥ÊèêÁ§∫ */
        .message-avatar {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .message-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Êó∂Èó¥Êà≥ËÆæÁΩÆÊ†∑Âºè */
        .timestamp-position-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
        }

        .radio-option:hover {
            border-color: var(--theme-button-bg, #007AFF);
            background: rgba(var(--theme-button-bg-rgb, 0, 122, 255), 0.05);
        }

        .radio-option input[type="radio"] {
            display: none;
        }

        .radio-custom {
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            margin-right: 12px;
            margin-top: 2px;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .radio-option input[type="radio"]:checked + .radio-custom {
            border-color: var(--theme-button-bg, #007AFF);
            background-color: var(--theme-button-bg, #007AFF);
        }

        .radio-option input[type="radio"]:checked + .radio-custom::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: white;
        }

        .option-content {
            flex: 1;
        }

        .option-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
            font-size: 15px;
        }

        .option-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
            white-space: pre-line;
            word-wrap: break-word;
            max-height: 4.2em; /* Á∫¶3Ë°åÁöÑÈ´òÂ∫¶ */
            overflow: hidden;
        }

        .radio-option input[type="radio"]:checked + .radio-custom + .option-content .option-label {
            color: var(--theme-button-bg, #007AFF);
        }

        /* ÊÇ¨ÊµÆÊåâÈíÆÊ†∑Âºè */
        .floating-actions {
            position: absolute;
            right: 20px;
            bottom: 80px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }

        .floating-btn {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            position: relative;
            overflow: hidden;
        }

        .floating-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            border-radius: 50%;
            z-index: -1;
        }

        .floating-btn:hover {
            transform: translateY(-2px) scale(1.08);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.18);
        }
        
        #regenerate-btn:hover {
            opacity: 0.65 !important;
        }
        
        #smart-reply-btn:hover {
            opacity: 0.65 !important;
        }

        .floating-btn:active {
            transform: translateY(0) scale(0.98);
            transition: all 0.15s ease;
        }

        /* ÈáçÊñ∞ÁîüÊàêÊåâÈíÆ */
        #regenerate-btn {
            background: var(--floating-btn-bg);
            color: var(--theme-button-color, white);
        }

        #regenerate-btn:hover {
            background: var(--floating-btn-bg-hover);
        }

        /* Êô∫ËÉΩÂõûÂ§çÊåâÈíÆ */
        #smart-reply-btn {
            background: var(--floating-btn-secondary-bg);
            color: var(--theme-button-secondary-color, #555);
            border: 1px solid var(--theme-button-secondary-border, rgba(0, 0, 0, 0.05));
        }

        #smart-reply-btn:hover {
            background: var(--floating-btn-secondary-bg-hover);
        }

        /* ‰∏ªÈ¢òÁâπÂÆöÊÇ¨ÊµÆÊåâÈíÆÊ†∑ÂºèÁé∞Âú®ÈÄöËøáCSSÂèòÈáèÁªü‰∏ÄÁÆ°ÁêÜ */

        /* ÊåâÈíÆÂõæÊ†áÂä®Áîª */
        #regenerate-btn i {
            transition: transform 0.3s ease;
        }

        #regenerate-btn:hover i {
            transform: rotate(180deg);
        }

        #smart-reply-btn i {
            transition: transform 0.3s ease;
        }

        #smart-reply-btn:hover i {
            transform: scale(1.1);
        }

        /* ÊÇ¨ÊµÆÊåâÈíÆÂá∫Áé∞Âä®Áîª */
        @keyframes floatIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .floating-btn {
            animation: floatIn 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
            opacity: 0;
            transform: translateY(20px) scale(0.8);
        }

        .floating-btn:not(.hidden) {
            opacity: 0.6;
            transform: translateY(0) scale(1);
        }

        /* Ê∂àÊÅØÊªëÂÖ•Âä®ÁîªÂÖ≥ÈîÆÂ∏ß - ÁÆÄÂçïËá™ÁÑ∂ÁöÑÊªëÂÖ•ÊïàÊûú */
        @keyframes messageSlideIn {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ÁîµÂΩ±Â≠óÂπïÊªöÂä®ÊïàÊûú - ‰∏ìÈó®Áî®‰∫éËØ≠Èü≥ÈÄöËØù */
        @keyframes subtitleFadeIn {
            0% {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            20% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            80% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0.7;
                transform: translateY(-10px) scale(0.98);
            }
        }

        /* ËÑâÂÜ≤Âä®ÁîªÁî®‰∫éÊô∫ËÉΩÂõûÂ§çÊåâÈíÆ */
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(74, 132, 193, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(74, 132, 193, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(74, 132, 193, 0);
            }
        }

        /* Ê∂àÊÅØÂÆπÂô®ÊªëÂÖ•Âä®ÁîªÁ±ª */
        .message-slide-in {
            animation: messageSlideIn 0.3s ease-out forwards;
        }

        /* Âª∂ËøüÂä®ÁîªÁ±ªÁî®‰∫éËøûÁª≠Ê∂àÊÅØ */
        .message-slide-in-delayed {
            animation: messageSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            animation-delay: 0.1s;
        }

        .floating-btn:nth-child(1) {
            animation-delay: 0.1s;
        }

        .floating-btn:nth-child(2) {
            animation-delay: 0.2s;
        }

        /* ÊÇ¨ÊµÆÊåâÈíÆÈöêËóèÁä∂ÊÄÅ */
        .floating-btn.hidden {
            opacity: 0;
            transform: translateY(20px) scale(0.8);
            pointer-events: none;
        }

        /* Á≠âÂæÖÁä∂ÊÄÅÁöÑÁâπÊÆäÊ†∑Âºè */
        .floating-btn.waiting {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 4px rgba(255, 193, 7, 0.3);
        }

        /* ËÑâÂÜ≤Âä®Áîª */
        @keyframes pulse {
            0% {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 0 var(--theme-button-secondary-border, rgba(0, 0, 0, 0.3));
            }
            50% {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 8px rgba(0, 0, 0, 0);
            }
            100% {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 0 rgba(0, 0, 0, 0);
            }
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 0 var(--theme-button-secondary-border, rgba(0, 0, 0, 0.3));
            }
            50% {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 8px rgba(0, 0, 0, 0);
            }
            100% {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 0 rgba(0, 0, 0, 0);
            }
        }

        /* ‰ªé index.html ÁßªÂä®ËøáÊù•ÁöÑÈùôÊÄÅÊ†∑Âºè */
        .moments-page-no-padding {
            margin: 0;
            padding: 0;
        }

        .size-preview-rect-xs {
            width: 20px;
            height: 35px;
        }

        .size-preview-rect-s {
            width: 25px;
            height: 52px;
        }

        .size-preview-rect-m {
            width: 27px;
            height: 58px;
        }

        .size-preview-rect-l {
            width: 28px;
            height: 60px;
        }

        .size-preview-rect-xl {
            width: 30px;
            height: 65px;
        }

        .clear-avatar-btn {
            background-color: #ff6b6b;
            margin-left: 10px;
        }

        /* ËØÑËÆ∫ÂõûÂ§çÊ†ºÂºèÈó¥Ë∑ù‰ºòÂåñ */
        .comment-reply-format {
            color: #576b95;
            font-weight: 600;
        }
        
        .comment-reply-text {
            word-spacing: 2px;
            letter-spacing: 0px;
        }

        
        /* ËΩ¨Ë¥¶ÂäüËÉΩÊ†∑Âºè */
        #transfer-modal, #transfer-confirm-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1001;
        }

        #transfer-modal.visible, #transfer-confirm-modal.visible {
            display: flex;
        }

        .transfer-content, .transfer-confirm-content {
            background: white;
            border-radius: 15px;
            padding: 20px;
            width: 260px;
            max-width: 260px;
            min-width: 260px;
            box-sizing: border-box;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .transfer-header, .transfer-confirm-title {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .transfer-input-group {
            margin-bottom: 15px;
        }

        .transfer-input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }

        .transfer-input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }

        .transfer-input-group input:focus {
            border-color: var(--theme-button-bg, #4a84c1);
            outline: none;
            box-shadow: 0 0 0 2px rgba(74, 132, 193, 0.2);
        }

        .transfer-actions, .transfer-confirm-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .transfer-actions button, .transfer-confirm-actions button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        #transfer-cancel-btn, #transfer-reject-btn {
            background-color: #f5f5f5;
            color: #666;
        }

        #transfer-cancel-btn:hover, #transfer-reject-btn:hover {
            background-color: #e0e0e0;
        }

        #transfer-confirm-btn, #transfer-accept-btn {
            background-color: var(--theme-button-bg, #4a84c1);
            color: white;
        }

        #transfer-confirm-btn:hover, #transfer-accept-btn:hover {
            background-color: var(--theme-button-hover, #3a74b1);
        }

        .transfer-confirm-info {
            text-align: center;
            margin: 20px 0;
        }

        .transfer-confirm-amount {
            font-size: 28px;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 10px;
        }

        .transfer-confirm-note {
            font-size: 14px;
            color: #666;
            word-break: break-all;
        }

        /* ËΩ¨Ë¥¶Âç°ÁâáÊ†∑Âºè */
        .transfer-card {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 12px;
            padding: 15px;
            margin: 5px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            min-width: 180px;
        }

        .transfer-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Â∑≤Á°ÆËÆ§Êî∂Ê¨æÁä∂ÊÄÅ - ÁÅ∞‰∏ÄÁÇπÁöÑÁ≤âËâ≤ */
        .transfer-card.accepted {
            background: linear-gradient(135deg, #d4a5a8 0%, #e6c8d2 100%);
            cursor: default;
        }

        .transfer-card.accepted:hover {
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Â∑≤ÊãíÁªù/ÈÄÄÂõûÁä∂ÊÄÅ - ÈõæÈúæËìù */
        .transfer-card.rejected {
            background: linear-gradient(135deg, #8fa3b0 0%, #b5c9d3 100%);
            cursor: default;
        }

        .transfer-card.rejected:hover {
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .transfer-title {
            font-size: 14px;
            color: #555;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .transfer-amount {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .transfer-note {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            word-break: break-all;
        }

        .transfer-status {
            font-size: 12px;
            color: #888;
            text-align: right;
            margin-top: 5px;
        }

        /* Áî®Êà∑Ê∂àÊÅØ‰∏≠ÁöÑËΩ¨Ë¥¶Âç°ÁâáÂÆΩÂ∫¶ÈôêÂà∂ */
        .message-container.sent .transfer-card {
            max-width: 240px;
            width: auto;
        }

        /* AIÊ∂àÊÅØ‰∏≠ÁöÑËΩ¨Ë¥¶Âç°ÁâáÂÆΩÂ∫¶ÈôêÂà∂ */
        .message-container.received .transfer-card {
            max-width: 240px;
            width: auto;
        }

        /* ËΩ¨Ë¥¶Ê∂àÊÅØÂÆπÂô®ÂØπÈΩêÊ†∑Âºè - Á±ª‰ººËØ≠Èü≥Ê∂àÊÅØÂÆπÂô® */
        .transfer-message-container {
            display: flex;
            flex-direction: column;
            max-width: 65%;
        }

        /* Áî®Êà∑ËΩ¨Ë¥¶Ê∂àÊÅØÂÆπÂô®Âè≥ÂØπÈΩê */
        .transfer-message-container.sent {
            align-self: flex-end;
            align-items: flex-end;
            margin-left: auto;
        }

        /* AIËΩ¨Ë¥¶Ê∂àÊÅØÂÆπÂô®Â∑¶ÂØπÈΩê */
        .transfer-message-container.received {
            align-self: flex-start;
            align-items: flex-start;
            margin-right: auto;
        }

        /* ‰ΩçÁΩÆÂàÜ‰∫´Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
        .location-modal-content {
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .location-input-section {
            margin-bottom: 20px;
        }

        .location-input-section label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        #location-address {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }

        #location-address:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .location-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .location-suggestion {
            padding: 6px 12px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #495057;
        }

        .location-suggestion:hover {
            background: #e9ecef;
            border-color: #dee2e6;
            transform: translateY(-1px);
        }

        .virtual-map-container {
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            overflow: hidden;
            background: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .map-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 16px;
            text-align: center;
        }

        .map-location-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .map-coordinates {
            font-size: 12px;
            opacity: 0.9;
            font-family: 'Courier New', monospace;
        }

        .virtual-map {
            position: relative;
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #e8f5e8 0%, #f0f8f0 50%, #e8f5e8 100%);
            overflow: hidden;
        }

        .map-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(76, 175, 80, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(33, 150, 243, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 60% 20%, rgba(255, 193, 7, 0.1) 0%, transparent 50%);
        }

        .map-roads {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .road {
            position: absolute;
            background: #ddd;
            z-index: 1;
        }

        .road-horizontal {
            height: 3px;
        }

        .road-vertical {
            width: 3px;
        }

        .map-buildings {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .building {
            position: absolute;
            background: linear-gradient(135deg, #90a4ae 0%, #78909c 100%);
            border-radius: 2px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .map-marker {
            position: absolute;
            top: 45%;
            left: 60%;
            z-index: 5;
            transform: translate(-50%, -50%);
        }

        .marker-pin {
            display: flex;
            align-items: center;
            justify-content: center;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .marker-pin svg {
            width: 28px;
            height: 28px;
        }

        .marker-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: rgba(255, 0, 0, 0.3);
            border-radius: 50%;
            animation: markerPulse 2s ease-in-out infinite;
        }

        .map-current-location {
            position: absolute;
            bottom: 20%;
            left: 30%;
            z-index: 4;
        }

        .current-location-dot {
            width: 8px;
            height: 8px;
            background: #007AFF;
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(0, 122, 255, 0.5);
        }

        .current-location-ring {
            position: absolute;
            top: -4px;
            left: -4px;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(0, 122, 255, 0.3);
            border-radius: 50%;
            animation: currentLocationPulse 2s ease-in-out infinite;
        }

        .map-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 16px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }

        .map-scale {
            font-size: 12px;
            color: #6c757d;
            font-family: 'Courier New', monospace;
        }

        .map-control-btn {
            padding: 4px 8px;
            background: #007AFF;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .map-control-btn:hover {
            background: #0056CC;
        }

        /* ‰ΩçÁΩÆÂàÜ‰∫´Âä®Áîª */
        @keyframes markerBounce {
            0%, 100% {
                transform: translate(-50%, -50%) translateY(0);
            }
            50% {
                transform: translate(-50%, -50%) translateY(-3px);
            }
        }

        @keyframes markerPulse {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }

        @keyframes currentLocationPulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.5);
                opacity: 0.5;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* ‰ΩçÁΩÆÊ∂àÊÅØÊ†∑Âºè */
        .location-message-container {
            display: flex;
            flex-direction: column;
            max-width: 200px;
        }

        .location-message-container.sent {
            align-self: flex-end;
            align-items: flex-end;
            margin-left: auto;
        }

        .location-message-container.received {
            align-self: flex-start;
            align-items: flex-start;
            margin-right: auto;
        }

        .location-card {
            background: white;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 5px 0;
            width: 180px;
        }

        .location-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);
        }

        .location-card-header {
            background: #f8f9fa;
            color: #2c3e50;
            padding: 8px 10px;
            font-size: 13px;
            font-weight: 500;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        .location-title {
            background: #f8f9fa;
            color: #2c3e50;
            padding: 8px 10px;
            font-size: 13px !important;
            font-weight: 500;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
            line-height: 1.2;
            letter-spacing: normal;
        }

        .location-card-map {
            height: 80px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #f1f3f4 100%);
            position: relative;
            overflow: hidden;
        }

        /* ÁÆÄÂåñÁöÑÂú∞ÂõæÂÖÉÁ¥† - ÁªøÁôΩÁÅ∞ÈÖçËâ≤ */
        .location-card .map-background {
            background: linear-gradient(45deg, #f8f9fa 0%, #e8f5e8 30%, #f0f0f0 70%, #f8f9fa 100%);
        }

        .location-card .map-roads {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .location-card .road {
            background: #dee2e6;
            position: absolute;
        }

        .location-card .road-horizontal {
            height: 2px;
        }

        .location-card .road-vertical {
            width: 2px;
        }

        .location-card .map-buildings {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Ê≤≥ÊµÅÊ†∑Âºè */
        .location-card .river {
            position: absolute;
            background: linear-gradient(45deg, #40a9ff 0%, #1890ff 50%, #096dd9 100%);
            border-radius: 50px;
            opacity: 0.8;
            z-index: 1;
        }

        /* Ê≤≥ÊµÅÂºØÊõ≤ÈÉ®ÂàÜ */
        .location-card .river-curve {
            position: absolute;
            background: linear-gradient(45deg, #40a9ff 0%, #1890ff 50%, #096dd9 100%);
            border-radius: 50px;
            opacity: 0.8;
            z-index: 1;
        }

        /* Êõ¥ÁúüÂÆûÁöÑÂª∫Á≠ëÁâ©Ê†∑Âºè */
        .location-card .building {
            position: absolute;
            z-index: 2;
            border-radius: 1px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .location-card .building.house {
            background: linear-gradient(135deg, #f0f0f0 0%, #d9d9d9 100%);
            border: 1px solid #bfbfbf;
        }

        .location-card .building.office {
            background: linear-gradient(135deg, #e6f7ff 0%, #bae7ff 100%);
            border: 1px solid #91d5ff;
        }

        .location-card .building.shop {
            background: linear-gradient(135deg, #fff1f0 0%, #ffd8d6 100%);
            border: 1px solid #ffaaa5;
        }

        /* Ê†ëÊú®ÂíåÁªøÂåñ */
        .location-card .tree {
            position: absolute;
            z-index: 3;
            border-radius: 50%;
        }

        .location-card .tree.big {
            background: radial-gradient(circle, #52c41a 0%, #389e0d 70%, #237804 100%);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
        }

        .location-card .tree.small {
            background: radial-gradient(circle, #73d13d 0%, #52c41a 70%, #389e0d 100%);
            box-shadow: 0 0.5px 1px rgba(0, 0, 0, 0.1);
        }

        /* ÂÖ¨Âõ≠ÁªøÂú∞ */
        .location-card .park {
            position: absolute;
            background: linear-gradient(135deg, #f6ffed 0%, #d9f7be 50%, #b7eb8f 100%);
            border-radius: 3px;
            opacity: 0.6;
            z-index: 1;
        }

        .location-card .map-marker {
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
        }

        .location-card .marker-pin {
            display: flex;
            align-items: center;
            justify-content: center;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
        }

        .location-card .marker-pin svg {
            width: 20px;
            height: 20px;
        }

        .virtual-map .river {
            position: absolute;
            background: linear-gradient(45deg, #40a9ff 0%, #1890ff 50%, #096dd9 100%);

/* ÂéÜÂè≤Âú∞ÁÇπÊ†∑Âºè */
.location-history {
    margin-top: 15px;
}

.location-history-title {
    font-size: 14px;
    color: #666;
    margin-bottom: 8px;
    font-weight: 500;
}

.location-history-items {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    max-height: 120px;
    overflow-y: auto;
}

.location-history-item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 16px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #333;
    font-weight: 500;
    position: relative;
    user-select: none;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.location-history-item:hover {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(0, 0, 0, 0.15);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.location-history-item .location-text {
    flex: 1;
    min-width: 0;
}

.location-history-item .delete-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px !important;
    height: 16px !important;
    border-radius: 50% !important;
    background: rgba(0, 0, 0, 0.1) !important;
    color: #666 !important;
    font-size: 10px !important;
    line-height: 1 !important;
    opacity: 0;
    transition: all 0.2s ease;
    cursor: pointer;
    flex-shrink: 0;
    margin-left: 4px;
    padding: 0 !important;
    border: none !important;
}

.location-history-item:hover .delete-btn {
    opacity: 1;
}

.location-history-item .delete-btn:hover {
    background: rgba(0, 0, 0, 0.2) !important;
    color: #333 !important;
    transform: scale(1.1);
}

.location-history-item.deleting {
    background: #fff2f0;
    border-color: #ffccc7;
    color: #ff4d4f;
    animation: shake 0.5s ease-in-out;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-2px); }
    75% { transform: translateX(2px); }
}

/* Á©∫Áä∂ÊÄÅÊ†∑Âºè */
.location-history-empty {
    color: #999;
    font-size: 12px;
    text-align: center;
    padding: 15px;
    background: #fafafa;
    border-radius: 8px;
    border: 1px dashed #d9d9d9;
}

/* ‰ΩçÁΩÆÂéÜÂè≤Âà†Èô§ÊåâÈíÆ - ‰ΩøÁî®ÊúÄÂº∫ÁâπÂºÇÊÄß */
.location-history-items .location-history-item .delete-btn {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 16px !important;
    height: 16px !important;
    border-radius: 50% !important;
    background: rgba(0, 0, 0, 0.1) !important;
    color: #666 !important;
    font-size: 10px !important;
    line-height: 1 !important;
    opacity: 0 !important;
    transition: all 0.2s ease !important;
    cursor: pointer !important;
    flex-shrink: 0 !important;
    margin-left: 4px !important;
    padding: 0 !important;
    border: none !important;
    text-decoration: none !important;
}

.location-history-items .location-history-item:hover .delete-btn {
    opacity: 1 !important;
}

.location-history-items .location-history-item .delete-btn:hover {
    background: rgba(0, 0, 0, 0.2) !important;
    color: #333 !important;
    transform: scale(1.1) !important;
}
}





/* ‰ΩçÁΩÆÂéÜÂè≤ËÉ∂ÂõäÊ∞îÊ≥°Ê†∑ÂºèË¶ÜÁõñ */
.location-history-items .location-history-item {
    display: inline-block !important;
    position: relative !important;
    padding: 6px 20px 6px 12px !important;
    margin: 0 8px 8px 0 !important;
    background: rgba(255, 255, 255, 0.9) !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    border-radius: 16px !important;
    font-size: 13px !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    color: #333 !important;
    font-weight: 500 !important;
    user-select: none !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    gap: 0 !important;
    align-items: stretch !important;
    flex-direction: row !important;
}

.location-history-items .location-history-item:hover {
    background: rgba(255, 255, 255, 0.95) !important;
    border-color: rgba(0, 0, 0, 0.15) !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.location-history-items .location-history-item .location-text {
    display: block !important;
    flex: none !important;
    min-width: auto !important;
}

.location-history-items .location-history-item .delete-btn {
    position: absolute !important;
    top: -4px !important;
    right: -4px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 14px !important;
    height: 14px !important;
    border-radius: 50% !important;
    background: rgba(255, 255, 255, 0.9) !important;
    color: #999 !important;
    font-size: 10px !important;
    line-height: 1 !important;
    opacity: 0.6 !important;
    transition: all 0.2s ease !important;
    cursor: pointer !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
    text-decoration: none !important;
    z-index: 10 !important;
    margin: 0 !important;
    padding: 0 !important;
    flex-shrink: 0 !important;
}

.location-history-items .location-history-item:hover .delete-btn {
    opacity: 1 !important;
}

.location-history-items .location-history-item .delete-btn:hover {
    background: #ff4757 !important;
    color: white !important;
    transform: scale(1.1) !important;
    border-color: #ff4757 !important;
}

/* ÊâãÊú∫Á´ØÊ†∑Âºè‰ºòÂåñ */
@media (max-width: 768px) {
    .location-history-items .location-history-item .delete-btn {
        opacity: 0.7 !important;
        width: 16px !important;
        height: 16px !important;
        font-size: 11px !important;
        top: -5px !important;
        right: -5px !important;
    }
    
    .location-history-items .location-history-item .delete-btn:active {
        background: #ff4757 !important;
        color: white !important;
        transform: scale(0.95) !important;
        border-color: #ff4757 !important;
    }
    
    .location-history-items .location-history-item {
        padding: 7px 22px 7px 12px !important;
        margin: 0 8px 8px 0 !important;
    }
}

/* ‰ªøQQ/ÂæÆ‰ø°Áæ§ËÅäËÆæÁΩÆÁïåÈù¢Ê†∑Âºè */

/* Áæ§ËÅä‰ø°ÊÅØÂç°Áâá */
.group-info-card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    margin: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    gap: 15px;
}

.group-avatar-section {
    position: relative;
    cursor: pointer;
}

.group-avatar-large {
    width: 80px;
    height: 80px;
    border-radius: 20px;
    object-fit: cover;
    border: 3px solid #f0f0f0;
    transition: all 0.3s ease;
}

.group-avatar-section:hover .group-avatar-large {
    border-color: #007AFF;
    transform: scale(1.05);
}

.group-avatar-edit-hint {
    position: absolute;
    bottom: -5px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 122, 255, 0.9);
    color: white;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 8px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.group-avatar-section:hover .group-avatar-edit-hint {
    opacity: 1;
}

.group-basic-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.group-name {
    font-size: 18px;
    font-weight: 600;
    color: #333;
    cursor: pointer;
    padding: 5px 8px;
    border-radius: 6px;
    transition: background-color 0.2s ease;
}

.group-name:hover {
    background-color: #f5f5f5;
}

.group-member-count {
    font-size: 14px;
    color: #666;
    margin-bottom: 5px;
}

.group-description {
    font-size: 13px;
    color: #888;
    line-height: 1.4;
    cursor: pointer;
    padding: 5px 8px;
    border-radius: 6px;
    transition: background-color 0.2s ease;
    max-width: 200px;
    word-wrap: break-word;
}

.group-description:hover {
    background-color: #f5f5f5;
}

/* Áæ§ÊàêÂëòÂ±ïÁ§∫Âå∫Âüü */
.group-members-section {
    background: white;
    border-radius: 12px;
    margin: 15px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.group-members-section .section-title {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 15px;
    padding-bottom: 8px;
    border-bottom: 1px solid #f0f0f0;
}

.group-members-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    gap: 15px;
    max-height: 300px;
    overflow-y: auto;
}

.member-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.member-item:hover {
    transform: translateY(-2px);
}

.member-avatar {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    object-fit: cover;
    background: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 5px;
    transition: all 0.3s ease;
}

.member-item.add-member .member-avatar,
.member-item.remove-member .member-avatar {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 2px solid #dee2e6;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.member-item.add-member:hover .member-avatar {
    background: linear-gradient(135deg, #34c759 0%, #30d158 100%);
    border-color: #34c759;
    transform: scale(1.05);
}

.member-item.add-member:hover .member-avatar i {
    color: white;
}

.member-item.remove-member:hover .member-avatar {
    background: linear-gradient(135deg, #ff3b30 0%, #ff453a 100%);
    border-color: #ff3b30;
    transform: scale(1.05);
}

.member-item.remove-member:hover .member-avatar i {
    color: white;
}

.member-item.add-member .member-avatar i,
.member-item.remove-member .member-avatar i {
    font-size: 16px;
    color: #8e8e93;
    transition: color 0.3s ease;
}

.member-item.add-member .member-name,
.member-item.remove-member .member-name {
    color: #8e8e93;
    font-size: 12px;
    transition: color 0.3s ease;
}

.member-item.add-member:hover .member-name {
    color: #34c759;
}

.member-item.remove-member:hover .member-name {
    color: #ff3b30;
}

.member-avatar i {
    font-size: 20px;
}

.member-name {
    font-size: 12px;
    color: #666;
    text-align: center;
    max-width: 50px;
    word-wrap: break-word;
    line-height: 1.2;
}

/* Áæ§Â∫îÁî®‰∏≠ÂøÉ */
.group-apps-section {
    background: white;
    border-radius: 12px;
    margin: 15px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.group-apps-section .section-title {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 15px;
    padding-bottom: 8px;
    border-bottom: 1px solid #f0f0f0;
}

.group-apps-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 15px;
}

.app-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px 10px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: #f8f9fa;
}

.app-item:hover {
    background: #e9ecef;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.app-icon {
    font-size: 24px;
    margin-bottom: 8px;
    color: #007AFF;
}

.app-name {
    font-size: 12px;
    color: #333;
    font-weight: 500;
}

/* ÁâπÂÆöÂ∫îÁî®ÂõæÊ†áÈ¢úËâ≤ */
.app-item:nth-child(1) .app-icon { color: #FF9500; } /* ÊäïÁ•® */
.app-item:nth-child(2) .app-icon { color: #34C759; } /* Áæ§Ê¥ªÂä® */
.app-item:nth-child(3) .app-icon { color: #5856D6; } /* Áæ§‰ªªÂä° */
.app-item:nth-child(4) .app-icon { color: #8E8E93; } /* Êõ¥Â§ö */

/* Èù¢ÂÖ∑ÈÄâÊã©ÁïåÈù¢Ê†∑Âºè */
.persona-selection-item {
    display: flex;
    align-items: center;
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 10px;
    background: rgba(255, 255, 255, 0.8);
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
}

.persona-selection-item:hover {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(0, 123, 255, 0.3);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.persona-selection-item.selected {
    border-color: var(--color-blue);
    background: rgba(0, 123, 255, 0.1);
    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2);
}

.persona-selection-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 18px;
    margin-right: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.persona-selection-info {
    flex: 1;
}

.persona-selection-name {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
}

.persona-selection-desc {
    font-size: 14px;
    color: #666;
    line-height: 1.4;
    white-space: pre-line;
    word-wrap: break-word;
    max-height: 4.2em; /* Á∫¶3Ë°åÁöÑÈ´òÂ∫¶ */
    overflow: hidden;
}

.persona-selection-check {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--color-blue);
    color: white;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}

.persona-selection-item.selected .persona-selection-check {
    display: flex;
}

.selection-description {
    color: #666;
    font-size: 14px;
    margin-bottom: 20px;
    text-align: center;
    line-height: 1.5;
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
    .group-info-card {
        flex-direction: column;
        text-align: center;
        gap: 12px;
    }
    
    .group-basic-info {
        align-items: center;
    }
    
    .group-members-grid {
        grid-template-columns: repeat(5, 1fr);
        gap: 10px;
    }
    
    .group-apps-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
    }
    
    .app-item {
        padding: 10px 5px;
    }
}

/* ËÆæÁΩÆÈ°πÊ†∑Âºè‰ºòÂåñ */
.group-chat-settings .setting-item {
    transition: background-color 0.2s ease;
}

.group-chat-settings .setting-item:hover {
    background-color: #f8f9fa;
}




/* ËßíËâ≤ÈÄâÊã©Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
.character-selection-modal {
    z-index: 10001;
}

.character-selection-modal .modal-content {
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow: hidden;
}

.character-selection-modal .modal-body {
    max-height: 60vh;
    overflow-y: auto;
    padding: 20px;
}

.selection-description {
    color: #666;
    font-size: 14px;
    margin-bottom: 20px;
    text-align: center;
}

.character-selection-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.character-selection-item {
    display: flex;
    align-items: center;
    padding: 15px;
    border: 2px solid #f0f0f0;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    background: white;
}

.character-selection-item:hover {
    border-color: #007AFF;
    background: #f8f9ff;
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 122, 255, 0.1);
}

.character-selection-item.selected {
    border-color: #007AFF;
    background: linear-gradient(135deg, #e6f3ff 0%, #f0f8ff 100%);
    box-shadow: 0 4px 16px rgba(0, 122, 255, 0.2);
}

.character-selection-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    overflow: hidden;
    margin-right: 15px;
    flex-shrink: 0;
    border: 3px solid #f0f0f0;
    transition: border-color 0.3s ease;
}

.character-selection-item.selected .character-selection-avatar {
    border-color: #007AFF;
}

.character-selection-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.character-selection-info {
    flex: 1;
    min-width: 0;
}

.character-selection-name {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
}

.character-selection-bio {
    font-size: 13px;
    color: #666;
    line-height: 1.4;
    word-wrap: break-word;
}

.character-selection-check {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: 15px;
    transition: all 0.3s ease;
    opacity: 0;
}

.character-selection-item.selected .character-selection-check {
    background: #007AFF;
    opacity: 1;
    transform: scale(1.1);
}

.character-selection-check i {
    font-size: 12px;
    color: white;
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
    .character-selection-modal .modal-content {
        width: 95%;
        margin: 20px auto;
    }
    
    .character-selection-item {
        padding: 12px;
    }
    
    .character-selection-avatar {
        width: 50px;
        height: 50px;
        margin-right: 12px;
    }
    
    .character-selection-name {
        font-size: 15px;
    }
    
    .character-selection-bio {
        font-size: 12px;
    }
}

/* Áæ§ÂÖ¨ÂëäÁºñËæëÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
.group-notice-form {
    padding: 5px 0;
}

.group-notice-textarea {
    min-height: 120px;
    max-height: 200px;
    resize: vertical;
    font-family: var(--theme-font-family);
    line-height: 1.5;
}

.notice-char-count {
    text-align: right;
    font-size: 12px;
    color: #999;
    margin-top: 5px;
    padding-right: 5px;
}

.notice-char-count #notice-char-current {
    color: #007AFF;
    font-weight: 500;
}

.notice-tips {
    background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);
    border: 1px solid #e6f0ff;
    border-radius: 8px;
    padding: 15px;
    margin-top: 15px;
}

.tips-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
    font-weight: 600;
    color: #333;
}

.tips-header i {
    color: #FFD700;
    font-size: 16px;
}

.tips-content {
    font-size: 13px;
    color: #666;
    line-height: 1.6;
    margin-left: 24px;
}

/* Áæ§ÂÖ¨ÂëäÁºñËæëÊ®°ÊÄÅÊ°ÜÂä®Áîª */
#group-notice-modal .modal-content {
    animation: groupNoticeSlideIn 0.3s ease-out;
}

@keyframes groupNoticeSlideIn {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* üî•„ÄêÊñ∞Â¢û„ÄëÁæ§ÊàêÂëòÂ§¥ÂÉèÊõ¥Êç¢ÂäüËÉΩÊ†∑Âºè */

/* Â§¥ÂÉèÊÇ¨ÂÅúÊèêÁ§∫ */
.member-avatar-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.clickable-avatar {
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.clickable-avatar:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.avatar-hover-hint {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.7);
    color: white;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
    font-size: 12px;
}

.member-avatar-wrapper:hover .avatar-hover-hint {
    opacity: 1;
}

/* Áæ§ÊàêÂëòÂ§¥ÂÉèÊõ¥Êç¢Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
.member-avatar-form {
    padding: 10px 0;
}

.current-member-info {
    text-align: center;
    margin-bottom: 25px;
}

.member-name-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--theme-text-primary, #333);
    margin: 0 0 8px 0;
    font-family: var(--theme-font-family);
}

.member-info-desc {
    font-size: 14px;
    color: #666;
    margin: 0;
    line-height: 1.4;
}

.avatar-upload-section {
    text-align: center;
    margin-bottom: 25px;
}

.avatar-preview-large {
    margin-bottom: 20px;
}

.preview-image {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--theme-avatar-border, rgba(255, 255, 255, 0.8));
    box-shadow: var(--shadow-lg);
    transition: all 0.3s ease;
}

.preview-image:hover {
    transform: scale(1.05);
}

.upload-buttons {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
}

.upload-btn {
    padding: 12px 20px;
    border: none;
    border-radius: var(--theme-button-radius, 12px);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: var(--shadow-md);
    font-family: var(--theme-font-family);
}

.upload-btn.primary {
    background: var(--theme-button-bg, rgba(0, 123, 255, 0.9));
    color: var(--theme-button-color, white);
    border: 1px solid var(--theme-button-border, transparent);
}

.upload-btn.primary:hover {
    background: var(--theme-button-bg-hover, rgba(0, 123, 255, 1));
    transform: translateY(-2px);
    box-shadow: var(--theme-button-shadow, 0 6px 20px rgba(0, 123, 255, 0.4));
}

.upload-btn.secondary {
    background: var(--theme-button-secondary-bg, rgba(255, 255, 255, 0.8));
    color: var(--theme-button-secondary-color, #666);
    border: 1px solid var(--theme-button-secondary-border, rgba(0, 0, 0, 0.1));
}

.upload-btn.secondary:hover {
    background: var(--theme-button-secondary-bg-hover, rgba(255, 255, 255, 0.95));
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
}

.upload-btn:active {
    transform: translateY(0);
}

.avatar-tips {
    background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);
    border: 1px solid #e6f0ff;
    border-radius: 12px;
    padding: 20px;
    margin-top: 20px;
}

.tips-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    font-weight: 600;
    color: #333;
    font-size: 15px;
}

.tips-header i {
    color: #007AFF;
    font-size: 16px;
}

.tips-content {
    font-size: 13px;
    color: #666;
    line-height: 1.6;
    margin-left: 24px;
}

/* Ê®°ÊÄÅÊ°ÜÊåâÈíÆÊ†∑Âºè */
.modal-button {
    padding: 12px 24px;
    border: none;
    border-radius: var(--theme-button-radius, 12px);
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: var(--shadow-md);
    font-family: var(--theme-font-family);
}

.modal-button.modal-primary {
    background: var(--theme-button-bg, rgba(0, 123, 255, 0.9));
    color: var(--theme-button-color, white);
    border: 1px solid var(--theme-button-border, transparent);
}

.modal-button.modal-primary:hover {
    background: var(--theme-button-bg-hover, rgba(0, 123, 255, 1));
    transform: translateY(-2px);
    box-shadow: var(--theme-button-shadow, 0 6px 20px rgba(0, 123, 255, 0.4));
}

.modal-button.modal-secondary {
    background: var(--theme-button-secondary-bg, rgba(255, 255, 255, 0.8));
    color: var(--theme-button-secondary-color, #666);
    border: 1px solid var(--theme-button-secondary-border, rgba(0, 0, 0, 0.1));
}

.modal-button.modal-secondary:hover {
    background: var(--theme-button-secondary-bg-hover, rgba(255, 255, 255, 0.95));
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
}

.modal-button:active {
    transform: translateY(0);
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
    .avatar-hover-hint {
        opacity: 0.8;
        width: 25px;
        height: 25px;
        font-size: 10px;
    }
    
    .upload-buttons {
        flex-direction: column;
        align-items: center;
    }
    
    .upload-btn {
        width: 100%;
        max-width: 200px;
    }
    
    .preview-image {
        width: 80px;
        height: 80px;
    }
}
/* --- ÊÇ®‰πãÂâç‰∏∫‰∫ÜÊòæÁ§∫ÊòµÁß∞Ê∑ªÂä†ÁöÑÊ†∑Âºè --- */
.message-container {
    display: flex;
    align-items: flex-start !important;
    width: 100%; /* Á°Æ‰øùÊ∂àÊÅØÂÆπÂô®Âç†Êª°ÂèØÁî®ÂÆΩÂ∫¶ */
}

.message-avatar {
    margin-right: 8px;
    flex-shrink: 0;
}

/* ‰∏∫ÂèëÈÄÅÁöÑÊ∂àÊÅØÊ∑ªÂä†Âè≥ÂØπÈΩê */
.message-container.sent {
    justify-content: flex-end;
}

.message-container.sent .bubble-wrapper {
    align-items: flex-end;
}

.bubble-wrapper {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    flex: 1;      /* ÂÖ≥ÈîÆÊîπÂä®(1): ËÆ©ÂÆπÂô®‰º∏Â±ï */
    min-width: 0; /* ÂÖ≥ÈîÆÊîπÂä®(2): ‰øùÁïôÊ≠§È°πÔºåÈò≤Ê≠¢ÂÜÖÂÆπÊ∫¢Âá∫ */
}

.sender-name {
    font-size: 12px;
    color: #8e8e93;
    margin-bottom: 2px;
    margin-left: 10px; /* ÂÖ≥ÈîÆÔºöÂíåÊ∞îÊ≥°padding-left‰∏ÄËá¥ */
    font-weight: normal;
    text-align: left;
    align-self: flex-start;
    line-height: 1.2;
    max-width: 220px;
    word-break: break-all;
}


/* --- Êñ∞Â¢ûÁöÑCSSËßÑÂàôÔºåÁî®‰∫éÂØπÈΩêÁæ§ËÅäÂ§¥ÂÉèÂíåÊ∞îÊ≥°È°∂ÈÉ® --- */
.message-container.group-message-item .message-avatar {
    /* 16px Â§ßÁ∫¶ÊòØÊòµÁß∞ÁöÑÈ´òÂ∫¶ (12px * 1.2 Ë°åÈ´ò + 2px margin) */
    margin-top: 16px; 
}
/* --- ‰∏ñÁïå‰π¶Êñ∞Â∏ÉÂ±ÄÊ†∑Âºè (ÁæéÂåñÁâà) --- */
.worldbook-content-pane {
    height: 100%;
    overflow-y: auto;
}

.worldbook-tabs {
    display: flex;
    justify-content: space-around;
    padding: 10px 0; /* ‰∏échat-tabs‰∏ÄËá¥ */
    border-top: 1px solid var(--color-border-light);
    background-color: var(--color-gray-bg-light); /* ‰∏échat-tabs‰∏ÄËá¥ */
    flex-shrink: 0;
}

.worldbook-tab {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: var(--color-text-light); /* ‰∏échat-tab‰∏ÄËá¥ */
    font-size: 12px; /* ‰∏échat-tab‰∏ÄËá¥ */
    cursor: pointer;
}

.worldbook-tab.active {
    color: var(--color-primary-green);
}

.worldbook-tab i {
    font-size: 24px;
    margin-bottom: 3px;
}

.worldbook-section {
    padding: 0;
    margin-top: 0; /* ÁßªÈô§‰∏äËæπË∑ùÔºåËÆ©ÂÜÖÂÆπË¥¥ÁùÄÈ°∂ÈÉ® */
}

.section-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
    padding: 0 15px; /* ‰∏∫Ê†áÈ¢òÊ∑ªÂä†Â∑¶Âè≥ÂÜÖËæπË∑ù */
}

/* ‰∏∫‰∏ñÁïå‰π¶È°πÁõÆÊ∑ªÂä†ÈÄÇÂΩìÁöÑÂÜÖËæπË∑ù */
.worldbook-item {
    padding: 15px; /* Á°Æ‰øù‰∏ñÁïå‰π¶È°πÁõÆÊúâÂÜÖËæπË∑ù */
    border-bottom: 1px solid var(--color-border);
    cursor: pointer;
}

.worldbook-item:hover {
    background-color: rgba(0, 0, 0, 0.02);
}

        .edit-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: #007AFF;
            font-size: 16px;
            padding: 5px 8px;
            margin-left: 8px;
        }

        /* Êé®ÈÄÅÈÄöÁü•Ê†∑Âºè - üî•„Äê‰øÆÂ§ç„ÄëÊîπ‰∏∫ÁôΩËâ≤iOSÈ£éÊ†ºÔºåÁº©Áü≠È´òÂ∫¶ */
        #notification-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 340px;
            z-index: 10000;
            pointer-events: none;
        }

        .push-notification {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            color: #333;
            border-radius: 14px;
            padding: 8px 10px;
            margin: 3px 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 8px;
            transform: translateY(-60px);
            opacity: 0;
            transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            pointer-events: auto;
            cursor: pointer;
            border: 1px solid rgba(0, 0, 0, 0.05);
            min-height: 50px;
            max-height: 56px;
        }

        .push-notification.show {
            transform: translateY(0px);
            opacity: 1;
        }

        .push-notification.hide {
            transform: translateY(-60px);
            opacity: 0;
        }

        .notification-avatar {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            object-fit: cover;
            flex-shrink: 0;
            position: relative;
        }

        .notification-content {
            flex: 1;
            min-width: 0;
        }

        .notification-title {
            font-size: 13px;
            font-weight: 600;
            margin: 0 0 2px 0;
            color: #333;
            line-height: 1.2;
        }

        .notification-message {
            font-size: 12px;
            color: #666;
            margin: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            line-height: 1.3;
        }

        .notification-time {
            font-size: 9px;
            color: #999;
            margin-left: auto;
            flex-shrink: 0;
        }



        @keyframes notificationSlide {
            from {
                transform: translateY(-60px);
                opacity: 0;
            }
            to {
                transform: translateY(0px);
                opacity: 1;
            }
        }

        .push-notification:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2);
        }

        .push-notification:active {
            transform: translateY(0px) scale(0.98);
        }

        .worldbook-global-info {
            margin-top: 15px;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 8px;
        }

        .global-worldbook-note {
            color: #666;
            font-size: 14px;
            text-align: center;
            margin: 0;
        }

        /* ËßíËâ≤Áä∂ÊÄÅÊòæÁ§∫Ê†∑Âºè */
        .character-status {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 4px;
            font-size: 12px;
            color: #666;
        }

        /* Áä∂ÊÄÅÊåáÁ§∫ÁÅØ */
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            position: relative;
            flex-shrink: 0;
        }

        /* Âú®Á∫øÁä∂ÊÄÅ - Â∞èÁªøÁÅØ */
        .status-indicator.online {
            background-color: #4CAF50;
            box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);
        }

        /* ÂøôÁ¢åÁä∂ÊÄÅ - Â∞èÈªÑÁÅØ */
        .status-indicator.busy {
            background-color: #FF9800;
            box-shadow: 0 0 6px rgba(255, 152, 0, 0.5);
        }

        /* Á¶ªÁ∫ø/ÊãâÈªëÁä∂ÊÄÅ - Â∞èÁÅ∞ÁÅØ */
        .status-indicator.blocked,
        .status-indicator.offline {
            background-color: #9E9E9E;
            box-shadow: 0 0 6px rgba(158, 158, 158, 0.3);
        }

        /* Áä∂ÊÄÅÊñáÊú¨ */
        .status-text {
            font-size: 11px;
            color: #888;
            line-height: 1.2;
            font-weight: 400;
        }

        /* @Áæ§ÊàêÂëòÂäüËÉΩÊ†∑Âºè */
        .mention-dropdown {
            position: absolute;
            bottom: calc(100% + 5px);
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
            max-height: 100px;
            overflow-y: auto;
            z-index: 1001;
            display: none;
            box-sizing: border-box;
        }

        .mention-item {
            display: flex;
            align-items: center;
            padding: 6px 10px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f5f5f5;
            min-height: 32px;
        }

        .mention-item:last-child {
            border-bottom: none;
        }

        .mention-item:hover,
        .mention-item.selected {
            background-color: #f0f8ff;
        }

        .mention-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 6px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            color: white;
            font-weight: 500;
            flex-shrink: 0;
        }

        .mention-name {
            font-size: 12px;
            color: #333;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
        }

        /* @Êüê‰∫∫ÊòæÁ§∫Ê†∑Âºè */
        .mention-text {
            color: #007AFF;
            font-weight: 500;
            text-decoration: none;
        }

        /* Êó•ËÆ∞ÂäüËÉΩÊ†∑Âºè */
        .diary-menu-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 10px 0;
        }

        .diary-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 12px;
            background: var(--bg-white-90);
            border: 1px solid var(--border-black-05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .diary-option:hover {
            background: var(--bg-white-95);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .diary-option-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--theme-button-bg, #4a84c1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 20px;
        }

        .diary-option-content {
            flex: 1;
        }

        .diary-option-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .diary-option-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
        }

        .diary-actions {
            display: flex;
            gap: 8px;
            margin-left: auto;
            margin-right: 10px;
        }

        .diary-action-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            background: var(--theme-button-bg, #4a84c1);
            color: var(--theme-button-color, white);
        }

        .diary-action-btn.secondary {
            background: var(--theme-button-secondary-bg, #f8f9fa);
            color: var(--theme-button-secondary-color, #6c757d);
            border: 1px solid var(--theme-button-secondary-border, #dee2e6);
        }

        .diary-action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            border-radius: 50%;
            z-index: -1;
        }

        .diary-action-btn:hover {
            transform: translateY(-1px) scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .diary-action-btn:active {
            transform: translateY(0) scale(0.98);
            transition: all 0.15s ease;
        }

        .diary-action-btn i {
            transition: transform 0.3s ease;
        }

        .diary-action-btn:hover i {
            transform: rotate(180deg);
        }

        .diary-action-btn.edit-btn:hover i {
            transform: scale(1.1) rotate(0deg);
        }

        .diary-action-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .diary-action-btn:disabled:hover {
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .diary-action-btn:disabled i {
            transform: none;
        }

        /* Êó•ËÆ∞ÁºñËæëÊñáÊú¨Ê°ÜÊ†∑Âºè */
        .diary-edit-textarea {
            width: 100%;
            min-height: 300px;
            max-height: 500px;
            padding: 20px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-family: 'Courier New', 'SimSun', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            background-color: #fefefe;
            color: #2d3748;
            box-sizing: border-box;
        }

        .diary-edit-textarea:focus {
            outline: none;
            border-color: var(--theme-button-bg, #4a84c1);
            box-shadow: 0 0 0 2px rgba(74, 132, 193, 0.2);
        }

        .diary-edit-textarea::placeholder {
            color: #9ca3af;
            font-style: italic;
        }

        /* ‰ø°ÊÅØÊñáÊú¨Ê†∑Âºè */
        .info-text {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 12px;
            font-size: 13px;
            line-height: 1.5;
            color: #6c757d;
        }

        /* Êó•ËÆ∞Á∫∏Âº†ÂÆπÂô® - Áî®‰∫éÂõ∫ÂÆöÊâìÂ≠îÊïàÊûú */
        .diary-paper-container {
            position: relative;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            box-shadow:
                0 1px 3px rgba(0, 0, 0, 0.1),
                inset 0 0 0 1px rgba(255, 255, 255, 0.5);
            background-color: #fefefe;
            overflow: hidden; /* Á°Æ‰øùÂÜÖÂÆπ‰∏ç‰ºöÊ∫¢Âá∫ÂÆπÂô® */
        }

        /* Êó•ËÆ∞Á∫∏Âº†Ê†∑Âºè */
        .diary-paper {
            min-height: 300px;
            max-height: 60vh; /* ‰ΩøÁî®ËßÜÂè£È´òÂ∫¶ÔºåÁ°Æ‰øùÂú®ÊâãÊú∫‰∏ä‰∏ç‰ºöËøáÈ´ò */
            height: 100%; /* Â°´Êª°ÂÆπÂô®È´òÂ∫¶ */
            overflow-y: auto;
            padding: 50px 25px 30px 40px; /* Â∑¶ËæπË∑ù40px‰∏∫ÊâìÂ≠îÁïôÁ©∫Èó¥ÔºåÂè≥ËæπË∑ù25px */
            background: linear-gradient(to bottom,
                #fefefe 0%,
                #fefefe 40px,
                #e8f4fd 40px,
                #e8f4fd 42px,
                transparent 42px
            ),
            repeating-linear-gradient(
                transparent,
                transparent 30px,
                #e1e5e9 30px,
                #e1e5e9 31px
            );
            background-color: #fefefe;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: 'Courier New', 'SimSun', monospace;
            font-size: 14px;
            line-height: 31px;
            word-wrap: break-word;
            word-break: break-word;
            color: #2d3748;
            position: relative;
            box-sizing: border-box; /* Á°Æ‰øùpaddingËÆ°ÁÆóÂú®ÂÜÖ */
        }

        /* Êó•ËÆ∞ÁâπÊÆäÊ†∑ÂºèÊïàÊûú */
        .diary-strikethrough {
            text-decoration: line-through;
            text-decoration-color: #666;
            text-decoration-thickness: 1.5px;
            opacity: 0.7;
        }

        .diary-highlight {
            background: linear-gradient(120deg, #fff3cd 0%, #fff3cd 100%);
            background-size: 100% 0.8em;
            background-repeat: no-repeat;
            background-position: 0 0.2em;
            padding: 0 2px;
            border-radius: 2px;
            position: relative;
        }

        .diary-highlight::before {
            content: '';
            position: absolute;
            top: 0.2em;
            left: 0;
            right: 0;
            height: 0.8em;
            background: rgba(255, 235, 59, 0.3);
            border-radius: 2px;
            z-index: -1;
        }

        /* Á∫¢Á∫øÂ∑≤ÁßªÈô§Ôºå‰øùÁïôÊ≥®Èáä‰ª•Â§áÂêéÁî® */

        /* Êó•ËÆ∞Á∫∏Âº†ÂÆπÂô®ÁöÑÂõ∫ÂÆöÊâìÂ≠îÊïàÊûú */
        .diary-paper-container::after {
            content: '';
            position: absolute;
            left: 8px; /* Êõ¥Èù†Â∑¶ÔºåÂÆåÂÖ®‰∏çÂΩ±ÂìçÊ≠£Êñá */
            top: 80px; /* ‰ªéËìùÁ∫ø‰∏ãÊñπÂºÄÂßãÔºå‰∏éÊ≠£ÊñáÁ¨¨‰∏ÄË°åÂØπÈΩê */
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            box-shadow:
                0 50px 0 #f3f4f6,  /* ‰∏éË°åÈó¥Ë∑ù31pxÂØπÂ∫îÔºåÁ∫¶1.6Ë°åÈó¥Ë∑ù */
                0 50px 0 1px #d1d5db,
                0 100px 0 #f3f4f6, /* 50px * 2 */
                0 100px 0 1px #d1d5db,
                0 150px 0 #f3f4f6, /* 50px * 3 */
                0 150px 0 1px #d1d5db,
                0 200px 0 #f3f4f6, /* 50px * 4 */
                0 200px 0 1px #d1d5db;
            z-index: 10; /* Á°Æ‰øùÊâìÂ≠îÂú®ÂÜÖÂÆπ‰∏äÊñπ */
            pointer-events: none; /* ‰∏çÈòªÊå°Èº†Ê†á‰∫ã‰ª∂ */
        }

        /* --- ËÆ∫ÂùõÂäüËÉΩÊñ∞Â¢ûÊ†∑Âºè --- */

        /* ËÆ∫ÂùõÂ≠òÊ°£ÂàóË°® */
        .forum-archive-list {
            padding: 10px;
        }
        .forum-archive-item {
            background: #fff;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 4px solid var(--accent-color);
        }
        .forum-archive-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }
        .forum-archive-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 8px;
        }
        .forum-archive-meta {
            font-size: 12px;
            color: #888;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .forum-empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #999;
        }
        .forum-empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
        }
        .add-forum-btn {
            position: absolute;
            right: 25px;
            top: 70%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 18px;
        }

        /* ÂàõÂª∫ËÆ∫ÂùõÁïåÈù¢ */
        #create-forum-screen .app-content {
            padding: 20px;
        }
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            max-height: 150px;
            overflow-y: auto;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        .selection-item {
            background: #fff;
            border: 2px solid #eee;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
        }
        .selection-item.selected {
            border-color: var(--accent-color);
            background: #eef7ff;
        }
        .selection-item img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 5px;
        }
        .selection-item-name {
            font-size: 12px;
            font-weight: 500;
        }
        .selection-grid.single-selection .selection-item.selected {
            /* ÂçïÈÄâÊó∂Ê†∑ÂºèÂèØ‰ª•Êõ¥Á™ÅÂá∫ */
            box-shadow: 0 0 10px rgba(0,123,255,0.2);
        }

        /* Â∏ñÂ≠êÂàóË°® */
        .post-list {
            padding: 10px;
        }
        .post-item {
            background: #fff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
            cursor: pointer;
        }
        .post-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 8px;
        }
        .post-meta {
            font-size: 12px;
            color: #999;
            display: flex;
            justify-content: space-between;
        }
        .post-author {
            font-weight: 500;
            color: #555;
        }

        /* Â∏ñÂ≠êËØ¶ÊÉÖ */
        #post-view-content {
            padding: 15px;
            overflow-y: auto;
            flex: 1;
        }
        .post-full-content {
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        .post-full-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .post-full-meta {
            font-size: 13px;
            color: #888;
            margin-bottom: 15px;
        }
        .post-full-body {
            font-size: 15px;
            line-height: 1.7;
            white-space: pre-wrap;
        }
        .replies-section h3 {
            font-size: 16px;
            margin-bottom: 10px;
        }
        .reply-item {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .reply-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f0f0f0;
        }
        .reply-body {
            flex: 1;
        }
        .reply-author {
            font-weight: 600;
            font-size: 13px;
        }
        .reply-content {
            font-size: 14px;
            margin-top: 4px;
        }
        .reply-input-area {
            display: flex;
            align-items: center;
            padding: 10px;
            border-top: 1px solid #eee;
            background: #f9f9f9;
            gap: 8px;
        }
        .reply-input-area input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 18px;
            padding: 8px 12px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .reply-input-area input:focus {
            border-color: rgba(115, 145, 185, 0.6);
            box-shadow: 0 0 0 2px rgba(115, 145, 185, 0.1);
        }
        .reply-input-area button:not(.anonymous-toggle-btn) {
            background: rgba(115, 145, 185, 0.88); /* Êõ¥‰∫ÆÁöÑÈõæÈúæËìùËâ≤Ôºå88%ÈÄèÊòéÂ∫¶ */
            color: white;
            border: none;
            border-radius: 18px;
            padding: 8px 15px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(115, 145, 185, 0.30);
            transition: all 0.2s ease;
            font-weight: 500;
            flex-shrink: 0;
        }

        .reply-input-area button:not(.anonymous-toggle-btn):hover {
            background: rgba(105, 135, 175, 0.94); /* ÊÇ¨ÂÅúÊó∂Á®çÊ∑± */
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(115, 145, 185, 0.40);
        }

        .reply-input-area button:not(.anonymous-toggle-btn):active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(115, 145, 185, 0.30);
        }

        /* --- ÂåøÂêçÂõûÂ§çÊåâÈíÆÊ†∑Âºè --- */
        .anonymous-toggle-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: rgba(108, 117, 125, 0.15);
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            flex-shrink: 0;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .anonymous-toggle-btn:hover {
            background: rgba(108, 117, 125, 0.25);
            color: #495057;
            transform: scale(1.05);
        }

        .anonymous-toggle-btn.active {
            background: rgba(255, 193, 7, 0.2);
            color: #f57c00;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .anonymous-toggle-btn.active:hover {
            background: rgba(255, 193, 7, 0.3);
            color: #e65100;
        }

        /* Êî∂ËóèÊåâÈíÆ */
        #favorite-btn {
            color: #ffc107;
            right: 60px; /* Ë∞ÉÊï¥‰ΩçÁΩÆ */
        }
        #favorite-btn.favorited i {
            font-weight: 900; /* ÂÆûÂøÉÂõæÊ†á */
        }

        /* ËÆ∫Âùõ‰∏™‰∫∫‰∏ªÈ°µ */
        #forum-profile-screen .post-list {
            padding-top: 0;
        }

        /* ËÆ∫ÂùõÂ§¥ÈÉ®Êìç‰ΩúÊåâÈíÆÁªÑ */
        #forum-screen .header-actions,
        #forum-profile-screen .header-actions,
        #forum-view-screen .header-actions {
            position: absolute;
            right: 20px;
            top: 70%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        #forum-screen .header-action-btn,
        #forum-profile-screen .header-action-btn {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: var(--text-primary);
            padding: 5px;
        }

        /* Êó•ËÆ∞Â§¥ÈÉ®‰ø°ÊÅØÊ†∑Âºè */
        .diary-header {
            position: absolute;
            top: 23px; /* Á®çÂæÆÁ¶ªËìùËâ≤Á∫øËøú‰∏ÄÁÇπÁÇπÔºåÊúâËá™ÁÑ∂ÁöÑÁ©∫Èöô */
            left: 40px; /* ‰∏éÊ≠£ÊñáÂ∑¶ËæπË∑ù‰øùÊåÅ‰∏ÄËá¥ */
            right: 25px; /* ‰∏éÊ≠£ÊñáÂè≥ËæπË∑ù‰øùÊåÅ‰∏ÄËá¥ */
            height: 16px; /* Á®çÂæÆÂ¢ûÂä†È´òÂ∫¶ */
            display: flex;
            justify-content: space-between;
            align-items: flex-end; /* ÊñáÂ≠óÂ∫ïÈÉ®ÂØπÈΩê */
            font-size: 13px; /* Á®çÂæÆÊîæÂ§ßÂ≠ó‰ΩìÔºåÊé•ËøëÊ≠£ÊñáÂ§ßÂ∞è */
            color: #6b7280;
            font-family: var(--theme-font-family);
            line-height: 1;
        }

        .diary-date {
            font-weight: 600;
        }

        .diary-weather {
            font-style: italic;
        }

        #today-diary-content {
            position: relative;
        }

        #today-diary-content.empty {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            font-style: italic;
            font-size: 14px;
            font-family: var(--theme-font-family);
        }

        #past-diaries-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .diary-entry {
            padding: 15px;
            margin-bottom: 15px;
            background: var(--bg-white-90);
            border-radius: 12px;
            border: 1px solid var(--border-black-05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .diary-entry:hover {
            background: var(--bg-white-95);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .diary-entry-date {
            font-size: 14px;
            font-weight: 600;
            color: var(--theme-button-bg, #4a84c1);
            margin-bottom: 8px;
        }

        .diary-entry-preview {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .diary-entry-full {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
            white-space: pre-wrap;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
            display: none;
        }

        /* ËøáÂæÄÊó•ËÆ∞ÁöÑÂÆπÂô®Ê†∑Âºè - ÈªòËÆ§ÈöêËóè */
        .diary-entry .diary-paper-container {
            margin-top: 15px;
            min-height: 180px;
            max-height: 300px;
            display: none; /* ÈªòËÆ§ÈöêËóèÊó•ËÆ∞Á∫∏Âº†ÂÆπÂô® */
        }

        /* Â±ïÂºÄÁä∂ÊÄÅ‰∏ãÊòæÁ§∫Êó•ËÆ∞Á∫∏Âº†ÂÆπÂô® */
        .diary-entry.expanded .diary-paper-container {
            display: block;
        }

        /* ËøáÂæÄÊó•ËÆ∞‰∏≠ÁöÑÊó•ËÆ∞Á∫∏Âº†Ê†∑ÂºèË∞ÉÊï¥ */
        .diary-entry-full.diary-paper {
            min-height: 180px;
            max-height: 300px;
            margin-top: 0; /* ÁßªÈô§marginÔºåÁî±ÂÆπÂô®ÊéßÂà∂ */
            border-top: none;
            padding: 45px 30px 25px 30px; /* Â¢ûÂä†Â∑¶Âè≥ËæπË∑ù */
            line-height: 28px;
            font-size: 12px; /* Áº©Â∞èÊ≠£ÊñáÂ≠ó‰Ωì‰ª•ÈÄÇÂ∫îÊúâÈôêÁöÑÂ±ïÁ§∫Âå∫Âüü */
            background: linear-gradient(to bottom,
                #fefefe 0%,
                #fefefe 35px,
                #e8f4fd 35px,
                #e8f4fd 37px,
                transparent 37px
            ),
            repeating-linear-gradient(
                transparent,
                transparent 27px,
                #e1e5e9 27px,
                #e1e5e9 28px
            );
        }

        /* ËøáÂæÄÊó•ËÆ∞Á∫¢Á∫ø‰πüÂ∑≤ÁßªÈô§ */

        /* ËøáÂæÄÊó•ËÆ∞ÂÆπÂô®ÁöÑÂõ∫ÂÆöÊâìÂ≠îÊïàÊûú */
        .diary-entry .diary-paper-container::after {
            content: '';
            position: absolute;
            left: 10px; /* Ë∞ÉÊï¥‰ΩçÁΩÆ */
            top: 65px; /* Ë∞ÉÊï¥Âà∞ÂêàÈÄÇ‰ΩçÁΩÆ */
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            box-shadow:
                0 56px 0 #f3f4f6,  /* Ë∞ÉÊï¥Èó¥Ë∑ùÔºå‰∏é28pxË°åÈ´òÂØπÂ∫î */
                0 56px 0 1px #d1d5db,
                0 112px 0 #f3f4f6, /* 56px * 2 */
                0 112px 0 1px #d1d5db,
                0 168px 0 #f3f4f6, /* 56px * 3 */
                0 168px 0 1px #d1d5db;
            z-index: 10;
            pointer-events: none;
        }

        .diary-entry-full.diary-paper .diary-header {
            left: 30px; /* ‰∏éÊ≠£ÊñáËæπË∑ù‰øùÊåÅ‰∏ÄËá¥ */
            right: 30px; /* ‰∏éÊ≠£ÊñáËæπË∑ù‰øùÊåÅ‰∏ÄËá¥ */
            top: 18px; /* ‰∏é‰ªäÊó•Êó•ËÆ∞‰øùÊåÅ‰∏ÄËá¥ÁöÑÈó¥Ë∑ù */
            height: 16px; /* ‰∏é‰ªäÊó•Êó•ËÆ∞‰øùÊåÅ‰∏ÄËá¥ */
            font-size: 12px; /* Áº©Â∞èÂ≠ó‰Ωì‰ª•ÈÄÇÂ∫îÊúâÈôêÁöÑÂ±ïÁ§∫Âå∫Âüü */
        }

        .diary-entry.expanded .diary-entry-preview {
            display: none;
        }

        /* Á∫™ÂøµÊó•Â∫îÁî®Ê†∑Âºè */
        .anniversary-list {
            padding: 20px;
        }

        .anniversary-empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .anniversary-empty-state i {
            font-size: 48px;
            color: #ff69b4;
            margin-bottom: 20px;
        }

        .anniversary-empty-state p {
            margin: 8px 0;
            font-size: 14px;
            line-height: 1.4;
        }

        .anniversary-item {
            background: var(--bg-white-90);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .anniversary-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .anniversary-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .anniversary-item-name {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .anniversary-item-type {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            color: white;
            font-weight: 500;
        }

        .anniversary-item-type.birthday {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
        }

        .anniversary-item-type.anniversary {
            background: linear-gradient(135deg, #ff69b4, #ff8fa3);
        }

        .anniversary-item-type.holiday {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }

        .anniversary-item-type.other {
            background: linear-gradient(135deg, #a8e6cf, #88d8a3);
        }

        .anniversary-item-date {
            font-size: 16px;
            color: #666;
            margin-bottom: 8px;
        }

        .anniversary-item-countdown {
            font-size: 14px;
            color: #ff69b4;
            font-weight: 600;
        }

        .anniversary-item-description {
            font-size: 13px;
            color: #888;
            line-height: 1.4;
            margin-top: 8px;
        }

        .anniversary-item-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .anniversary-action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .anniversary-edit-btn {
            background: #007AFF;
            color: white;
        }

        .anniversary-delete-btn {
            background: #ff3b30;
            color: white;
        }

        .anniversary-action-btn:hover {
            transform: scale(1.05);
        }

        /* Áü≠‰ø°Â∫îÁî®Ê†∑Âºè */
        .messages-list {
            padding: 20px;
        }

        .messages-empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .messages-empty-state i {
            font-size: 48px;
            color: #007AFF;
            margin-bottom: 20px;
        }

        .messages-empty-state p {
            margin: 8px 0;
            font-size: 14px;
            line-height: 1.4;
        }

        /* Á∫™ÂøµÊó•Ë°®ÂçïÊ†∑Âºè */
        #anniversary-form-modal .form-group {
            margin-bottom: 20px;
        }

        #anniversary-form-modal label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        #anniversary-form-modal input,
        #anniversary-form-modal select,
        #anniversary-form-modal textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        #anniversary-form-modal input:focus,
        #anniversary-form-modal select:focus,
        #anniversary-form-modal textarea:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        #anniversary-form-modal .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: normal;
            cursor: pointer;
        }

        #anniversary-form-modal .checkbox-label input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        /* Â∞èÁªÑ‰ª∂Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
        #photo-widget-modal .form-group,
        #anniversary-widget-modal .form-group {
            margin-bottom: 20px;
        }

        #photo-widget-modal label,
        #anniversary-widget-modal label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        #photo-widget-modal input,
        #photo-widget-modal select,
        #anniversary-widget-modal input,
        #anniversary-widget-modal select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        #photo-widget-modal input:focus,
        #photo-widget-modal select:focus,
        #anniversary-widget-modal input:focus,
        #anniversary-widget-modal select:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        /* Â§ßÂ±èÂπïÈÄÇÈÖç (ÂÆΩÂ∫¶ > 400px) */
        @media (min-width: 401px) {
            #home-grid {
                width: 85%;
                gap: 18px;
            }

            .mini-app-icon {
                width: 65px;
                height: 65px;
                border-radius: 19px;
            }

            .mini-app-icon i {
                font-size: 26px;
            }

            .mini-app {
                font-size: 12px;
            }

            .large-app-icon {
                width: 70px;
                height: 70px;
                border-radius: 21px;
            }

            .large-app-icon i {
                font-size: 30px;
            }

            .large-app {
                font-size: 13px;
            }

            .anniversary-name {
                font-size: 15px;
            }

            .anniversary-countdown {
                font-size: 18px;
            }

            .photo-placeholder i {
                font-size: 28px;
            }

            .photo-placeholder {
                font-size: 13px;
            }

            #dock-bar {
                width: 90%;
                bottom: 25px;
            }

            .dock-container {
                padding: 12px 18px;
            }

            .dock-app-icon {
                width: 60px;
                height: 60px;
                border-radius: 18px;
            }

            .dock-app-icon i {
                font-size: 26px;
            }

            .dock-app {
                font-size: 12px;
            }
        }

        /* ‰∏≠Á≠âÂ±èÂπïÈÄÇÈÖç (ÂÆΩÂ∫¶ 481px - 400px) */
        @media (max-width: 480px) and (min-width: 401px) {
            #home-grid {
                width: 88%;
                gap: 15px;
            }

            .mini-app-icon {
                width: 58px;
                height: 58px;
                border-radius: 17px;
            }

            .mini-app-icon i {
                font-size: 24px;
            }

            .large-app-icon {
                width: 62px;
                height: 62px;
                border-radius: 18px;
            }

            .large-app-icon i {
                font-size: 28px;
            }

            .dock-app-icon {
                width: 53px;
                height: 53px;
                border-radius: 16px;
            }

            .dock-app-icon i {
                font-size: 24px;
            }

            .dock-app {
                font-size: 11px;
            }
        }

        /* Â∞èÂ±èÂπïÈÄÇÈÖç (ÂÆΩÂ∫¶ ‚â§ 400px) */
        @media (max-width: 400px) {
            #home-grid {
                width: 95%;
                gap: 10px;
            }

            .mini-app-icon {
                width: 45px;
                height: 45px;
                border-radius: 12px;
            }

            .mini-app-icon i {
                font-size: 20px;
            }

            .mini-app {
                font-size: 10px;
            }

            .large-app-icon {
                width: 50px;
                height: 50px;
                border-radius: 15px;
            }

            .large-app-icon i {
                font-size: 24px;
            }

            .large-app {
                font-size: 12px;
            }

            .anniversary-name {
                font-size: 14px;
            }

            .anniversary-countdown {
                font-size: 16px;
            }

            .photo-placeholder i {
                font-size: 24px;
            }

            .photo-placeholder {
                font-size: 12px;
            }

            #dock-bar {
                width: 95%;
                bottom: 20px;
            }

            .dock-container {
                padding: 10px 15px;
            }

            .dock-app-icon {
                width: 45px;
                height: 45px;
                border-radius: 12px;
            }

            .dock-app-icon i {
                font-size: 20px;
            }

            .dock-app {
                font-size: 11px;
            }
        }

        @media (max-width: 360px) {
            #home-grid {
                gap: 8px;
            }

            .mini-app-icon {
                width: 40px;
                height: 40px;
                border-radius: 10px;
            }

            .mini-app-icon i {
                font-size: 18px;
            }

            .mini-app {
                font-size: 9px;
            }

            .large-app-icon {
                width: 45px;
                height: 45px;
                border-radius: 12px;
            }

            .large-app-icon i {
                font-size: 20px;
            }

            .anniversary-name {
                font-size: 12px;
            }

            .anniversary-countdown {
                font-size: 14px;
            }

            .dock-container {
                padding: 8px 12px;
            }

            .dock-app-icon {
                width: 40px;
                height: 40px;
                border-radius: 10px;
            }

            .dock-app-icon i {
                font-size: 18px;
            }

            .dock-app {
                font-size: 10px;
            }
        }

        .diary-entry.expanded .diary-entry-full {
            display: block;
        }

        .no-diaries {
            text-align: center;
            padding: 40px 20px;
            color: #999;
            font-style: italic;
        }

        .no-diaries i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁæ§ËÅä‰∏≠ÈöêËóèÊó•ËÆ∞Â∑•ÂÖ∑ */
        .group-chat .tool-item.diary-tool {
            display: none !important;
        }

        /* ËÅäÂ§©Ê†áÈ¢òÂå∫ÂüüÁöÑÁä∂ÊÄÅÊòæÁ§∫Ê†∑Âºè */
        .app-header .character-status {
            margin-top: 2px;
            justify-content: center;
        }

        /* Á°Æ‰øùÁä∂ÊÄÅÊòæÁ§∫Âú®ËÅäÂ§©Â§¥ÈÉ®Ê≠£Á°ÆÂÆö‰Ωç - ÈíàÂØπ.app-header */
        .app-header .app-title {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëËÅäÂ§©ÁïåÈù¢.headerÂÆπÂô®ÁöÑÁä∂ÊÄÅÊòæÁ§∫Ê†∑Âºè */
        #api-chat-screen .header {
            overflow: visible; /* ÂÖÅËÆ∏ÂÜÖÂÆπÊ∫¢Âá∫ */
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÂâßÊÉÖÊ®°ÂºèÊ†∑Âºè */
        .offline-mode-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-header-default);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 999; /* Èôç‰Ωéz-indexÔºåÁ°Æ‰øùÊ®°ÊÄÅÊ°ÜËÉΩÂú®ÂÖ∂‰∏äÊñπÊòæÁ§∫ */
            display: flex;
            flex-direction: column;
        }

        /* ËÆ∫ÂùõÊÇ¨ÊµÆÂèëÂ∏ñÊåâÈíÆÊ†∑Âºè */
        #forum-view-screen .floating-post-btn {
            /* 1. ÂÆö‰Ωç‰∏éÊÇ¨ÊµÆ */
            position: absolute; /* ÁªùÂØπÂÆö‰ΩçÔºåÁõ∏ÂØπ‰∫éÁà∂ÂÆπÂô® .app-screen */
            bottom: 40px;       
            right: 20px;       
            z-index: 1000;     

            /* 2. Â∞∫ÂØ∏‰∏éÂΩ¢Áä∂ - Á®çÂæÆÂ∞è‰∏ÄÁÇπ */
            width: 50px;       
            height: 50px;       
            border-radius: 50%; 

            /* 3. ÊØõÁéªÁíÉÊïàÊûú‰∏éËÉåÊôØ - ‰ΩøÁî®‰∏ªÈ¢òÊåâÈíÆÈ¢úËâ≤‰ΩÜÈôç‰ΩéÈÄèÊòéÂ∫¶ */
            background: rgba(74, 132, 193, 0.35); /* ÁªèÂÖ∏‰∏ªÈ¢òËìùËâ≤Ôºå35%ÈÄèÊòéÂ∫¶ */
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Ê∑ªÂä†Èò¥ÂΩ±‰ª•Â¢ûÂº∫Á´ã‰ΩìÊÑü */

            /* 4. ÂõæÊ†áÊ†∑Âºè */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;    /* Á®çÂæÆÂ∞è‰∏ÄÁÇπÔºå‰ªé24pxÊîπ‰∏∫22px */

            /* 5. ‰∫§‰∫íÊïàÊûú */
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* Èº†Ê†áÊÇ¨ÂÅúÊó∂ÁöÑÊîæÂ§ßÂíåÈò¥ÂΩ±ÊïàÊûú */
        #forum-view-screen .floating-post-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            background: rgba(74, 132, 193, 0.55); /* ÊÇ¨ÂÅúÊó∂55%ÈÄèÊòéÂ∫¶ */
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÊåâÈíÆÈ¢úËâ≤ÈÄÇÈÖç */
        body[data-theme="cute"] #forum-view-screen .floating-post-btn {
            background: rgba(255, 182, 193, 0.35); /* ÂèØÁà±‰∏ªÈ¢òÁ≤âËâ≤Ôºå35%ÈÄèÊòéÂ∫¶ */
        }

        body[data-theme="cute"] #forum-view-screen .floating-post-btn:hover {
            background: rgba(255, 182, 193, 0.55); /* ÂèØÁà±‰∏ªÈ¢òÊÇ¨ÂÅúÊó∂55%ÈÄèÊòéÂ∫¶ */
        }

        /* --- ËÆ∫ÂùõËØÑËÆ∫Âå∫ÁæéÂåñ --- */

        /* 1. ËÆ©ÊØèÊù°ËØÑËÆ∫ÁöÑÂÆπÂô®ÂèØ‰ª•‰Ωú‰∏∫ÊåâÈíÆÂÆö‰ΩçÁöÑÂü∫ÂáÜ */
        .reply-item {
            position: relative;
            padding-bottom: 30px; /* ‰∏∫ÊåâÈíÆÁïôÂá∫Á©∫Èó¥ */
        }

        /* 2. ÁßªÈô§ÊóßÁöÑÊìç‰ΩúÂå∫ËæπË∑ù */
        .reply-body .reply-actions {
            margin-top: 0;
        }

        /* 3. ÂÖ®Êñ∞ËÆæËÆ°ÁöÑÊìç‰ΩúÊåâÈíÆÂÆπÂô®ÔºåÂÆö‰ΩçÂà∞Âè≥‰∏ãËßí */
        .reply-actions {
            position: absolute;
            bottom: 10px;
            right: 15px;
            display: flex;
            align-items: center;
            gap: 18px; /* Â¢ûÂ§ßÊåâÈíÆÈó¥Ë∑ù */
        }

        /* 4. ÂÖ®Êñ∞ËÆæËÆ°ÁöÑÊìç‰ΩúÊåâÈíÆÊ†∑ÂºèÔºàÊó†ËæπÊ°ÜÔºåÁ∫ØÂõæÊ†áÔºâ */
        .reply-action-btn {
            background: none;
            border: none;
            padding: 0;
            color: #888; /* ÂõæÊ†áÂíåÊñáÂ≠óÁöÑÈªòËÆ§È¢úËâ≤ */
            font-size: 13px; /* ÁÇπËµûÊï∞ÊñáÂ≠óÂ§ßÂ∞è */
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px; /* ÂõæÊ†áÂíåÁÇπËµûÊï∞ÁöÑÈó¥Ë∑ù */
            transition: color 0.2s ease;
        }

        /* 5. Èº†Ê†áÊÇ¨ÂÅúÊó∂ÂõæÊ†áÂíåÊñáÂ≠óÂèòËâ≤ */
        .reply-action-btn:hover {
            color: #333;
        }

        /* 6. SVGÂõæÊ†áÁöÑÈÄöÁî®Ê†∑Âºè */
        .reply-action-btn svg {
            width: 20px;
            height: 20px;
            fill: currentColor; /* ËÆ©SVGÂõæÊ†áÈ¢úËâ≤ÁªßÊâøÊåâÈíÆÁöÑcolorÂ±ûÊÄß */
            transition: transform 0.2s ease;
        }

        .reply-action-btn:hover svg {
            transform: scale(1.1);
        }

        /* 7. Áî®Êà∑ÁÇπËµûÂêéÁöÑÈ´ò‰∫ÆÊ†∑Âºè */
        .reply-action-btn.liked {
            color: #007AFF; /* ÁÇπËµûÂêéÂèò‰∏∫ËìùËâ≤ */
        }

        /* --- ËÆ∫ÂùõÊäïÁ•®ÁªÑ‰ª∂Ê†∑Âºè --- */
        .forum-poll {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }

        .forum-poll h4 {
            margin-bottom: 15px;
            font-size: 16px;
            color: #333;
            font-weight: 600;
        }

        .poll-option {
            background-color: #fff;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid #dee2e6;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .poll-option:hover {
            border-color: #007AFF;
            box-shadow: 0 2px 8px rgba(0,123,255,0.1);
            transform: translateY(-1px);
        }

        .poll-option .option-text {
            font-weight: 500;
            color: #495057;
            position: relative;
            z-index: 2;
        }

        .poll-option .vote-count {
            float: right;
            font-size: 13px;
            color: #6c757d;
            position: relative;
            z-index: 2;
        }

        /* ÊäïÁ•®ÁªìÊûúÊù° */
        .result-bar-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #e9ecef;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .result-bar {
            height: 100%;
            width: 0%; /* ÈªòËÆ§ÂÆΩÂ∫¶‰∏∫0 */
            background-color: #cfe2ff;
            border-radius: 8px;
            transition: width 0.5s ease;
        }

        /* Áî®Êà∑ÊäïÁ•®ÂêéÁöÑÊ†∑Âºè */
        .forum-poll.voted .poll-option {
            cursor: default;
            pointer-events: none; /* Á¶ÅÊ≠¢ÂÜçÊ¨°ÁÇπÂáª */
        }

        .forum-poll.voted .result-bar-bg {
            opacity: 1; /* ÊòæÁ§∫ÁªìÊûúÊù°ËÉåÊôØ */
        }

        .forum-poll.voted .option-text,
        .forum-poll.voted .vote-count {
            color: #000;
        }

        /* Áî®Êà∑ÊäïÁ•®ÁöÑÈÄâÈ°πÈ´ò‰∫ÆÊ†∑Âºè */
        .poll-option.user-voted {
            border-color: #007AFF !important;
            background-color: #f0f8ff !important;
            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2) !important;
        }

        .poll-option.user-voted .option-text {
            color: #007AFF !important;
            font-weight: 600 !important;
        }

        .poll-option.user-voted .vote-count {
            color: #007AFF !important;
            font-weight: 600 !important;
        }

        .poll-option.user-voted .result-bar {
            background-color: #007AFF !important;
        }

        /* --- ÊäïÁ•®ÂéÜÂè≤Ê†∑Âºè --- */
        .vote-history-modal {
            max-width: 500px;
            max-height: 70vh;
        }

        .vote-history-list {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px 0;
        }

        .vote-history-item {
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007AFF;
        }

        .vote-post-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .vote-choice {
            color: #007AFF;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .vote-date {
            color: #666;
            font-size: 12px;
        }



        .offline-mode-header {
            position: relative;
            z-index: 15;
            flex-shrink: 0;
            padding: 12px 32px;
            padding-top: 45px;
            height: 84px;
            box-sizing: border-box;
            background-color: var(--theme-header-bg);
            backdrop-filter: var(--theme-header-backdrop);
            -webkit-backdrop-filter: var(--theme-header-backdrop);
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            font-weight: 600;
            transition: var(--transition-normal);
            overflow: hidden;
        }

        .offline-mode-header .back-btn {
            position: absolute;
            left: 20px;
            top: 45px; /* ÂØπÊ†áÊ≠£Â∏∏ËÅäÂ§©ÁïåÈù¢ÁöÑÊåâÈíÆ‰ΩçÁΩÆ */
            background: none;
            border: none;
            font-size: 24px;
            color: var(--color-gray-dark);
            cursor: pointer;
            padding: 0;
            width: 30px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            /* ÁßªÈô§ÊÇ¨ÂÅúÊïàÊûúÂíåËøáÊ∏°Âä®Áîª */
        }

        .offline-mode-header .header-actions {
            position: absolute !important;
            right: 20px !important;
            top: 45px !important; /* ÂØπÊ†áÊ≠£Â∏∏ËÅäÂ§©ÁïåÈù¢ÁöÑÊåâÈíÆ‰ΩçÁΩÆ */
            transform: none !important;
            display: flex;
            gap: 8px;
        }

        .offline-mode-header .action-btn {
            background: none;
            border: none;
            font-size: 18px;
            color: var(--color-gray-dark);
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            /* ÁßªÈô§ÊÇ¨ÂÅúÊïàÊûúÂíåËøáÊ∏°Âä®Áîª */
        }

        .offline-mode-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            height: calc(100vh - 84px); /* ÂáèÂéªheaderÈ´òÂ∫¶ */
            overflow: hidden;
        }

        .offline-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            padding-bottom: 20px; /* ÂáèÂ∞ëÂ∫ïÈÉ®padding */
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
        }

        .offline-input-area {
            background-color: var(--bg-header-default);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--color-gray-border);
            flex-shrink: 0; /* Èò≤Ê≠¢Ë¢´ÂéãÁº© */
            z-index: 100;
            box-sizing: border-box;
            padding: 6px; /* üî•„ÄêËøõ‰∏ÄÊ≠•Èôç‰Ωé„Äë‰ªé8pxÂáèÂ∞ëÂà∞6pxÔºå‰ΩøËæìÂÖ•Ê†èÊõ¥ÁüÆ */
        }

        .offline-input-container {
            display: flex;
            align-items: flex-end;
            gap: 8px;
            background: var(--bg-white-90);
            border-radius: 20px;
            padding: 8px 12px;
            border: 1px solid var(--color-gray-border);
        }

        #offline-input {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            resize: none;
            font-size: 16px;
            line-height: 1.4;
            max-height: 120px;
            min-height: 20px;
            font-family: var(--theme-font-family);
        }

        .offline-button-group {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-shrink: 0;
        }

        .offline-regenerate-btn {
            background: var(--bg-white-80);
            color: var(--color-gray-dark);
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 12px;
            border: 1px solid var(--color-gray-border);
        }

        .offline-regenerate-btn:hover {
            background: var(--bg-white-95);
            transform: scale(1.05);
        }

        .offline-regenerate-btn:active {
            transform: scale(0.95);
        }

        .offline-send-btn {
            background: var(--theme-button-bg);
            color: white;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 12px;
            flex-shrink: 0;
        }

        .offline-send-btn:hover {
            background: var(--theme-button-bg-hover);
            transform: scale(1.05);
        }

        .offline-send-btn:active {
            transform: scale(0.95);
        }



        .offline-message-content {
            display: inline-block;
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 15px;
            line-height: 1.5;
            word-wrap: break-word;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÊ®°ÂºèÊ∂àÊÅØÂÆπÂô®ÊîØÊåÅÂ§¥ÂÉè */
        .offline-message {
            position: relative;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 16px;
            animation: fadeInUp 0.3s ease;
        }

        .offline-message.user {
            flex-direction: row; /* üî•„Äê‰øÆÊ≠£„ÄëÁî®Êà∑ÔºöÂ§¥ÂÉèÂ∑¶ÔºåÊ∞îÊ≥°Âè≥ */
            text-align: left;
        }

        .offline-message.ai {
            flex-direction: row-reverse; /* üî•„Äê‰øÆÊ≠£„ÄëAIÔºöÂ§¥ÂÉèÂè≥ÔºåÊ∞îÊ≥°Â∑¶ */
            text-align: right;
        }

        /* Á∫ø‰∏ãÊ®°ÂºèÂÆûÈôÖÂ§¥ÂÉèÊ†∑Âºè */
        .offline-message .offline-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--color-gray-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
            position: relative;
            background-size: cover;
            background-position: center;
        }

        .offline-message.user .offline-message-content {
            /* ËÉåÊôØËâ≤Áî±JavaScriptÂä®ÊÄÅËÆæÁΩÆÔºåÊîØÊåÅÈÄèÊòéÂ∫¶ */
            color: white;
            border-bottom-right-radius: 6px;
            text-align: left; /* üî•„Äê‰øÆÂ§ç„ÄëÊ∞îÊ≥°ÂÜÖÊñáÂ≠óÂ∑¶ÂØπÈΩê */
        }

        .offline-message.ai .offline-message-content {
            /* ËÉåÊôØËâ≤Áî±JavaScriptÂä®ÊÄÅËÆæÁΩÆÔºåÊîØÊåÅÈÄèÊòéÂ∫¶ */
            color: var(--text-primary);
            border-bottom-left-radius: 6px;
            border: 1px solid var(--color-gray-border);
            text-align: left; /* üî•„ÄêÁ°Æ‰øù„ÄëÊ∞îÊ≥°ÂÜÖÊñáÂ≠óÂ∑¶ÂØπÈΩê */
        }

        /* Á∫ø‰∏ãÈ¢ÑËÆæÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
        #offline-preset-modal {
            z-index: 10001 !important; /* Á°Æ‰øùÂú®Á∫ø‰∏ãÊ®°ÂºèË¶ÜÁõñÂ±Ç‰πã‰∏ä */
            position: fixed !important; /* Á°Æ‰øùÁõ∏ÂØπ‰∫éËßÜÂè£ÂÆö‰Ωç */
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
        }

        #offline-preset-modal .modal-content {
            z-index: 10002 !important; /* Á°Æ‰øùÊ®°ÊÄÅÊ°ÜÂÜÖÂÆπÂú®ÊúÄ‰∏äÂ±Ç */
            position: relative !important;
        }

        .preset-help-text {
            background: rgba(248, 249, 250, 0.8);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 16px;
            font-size: 13px;
            color: var(--color-gray-dark);
            line-height: 1.5;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .preset-help-text p {
            margin: 6px 0;
            display: flex;
            align-items: center;
        }

        .preset-help-text p:before {
            content: "‚Ä¢";
            color: var(--theme-button-bg);
            font-weight: bold;
            margin-right: 8px;
            font-size: 16px;
        }

        .preset-help-text p:first-child {
            margin-top: 0;
        }

        .preset-help-text p:last-child {
            margin-bottom: 0;
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÈ¢ÑËÆæËØ¥ÊòéÊ†∑Âºè */
        body[data-theme="cute"] .preset-help-text {
            background: rgba(255, 240, 245, 0.8);
        }

        body[data-theme="cute"] .preset-help-text p:before {
            color: var(--theme-button-bg);
        }

        /* Â∑≤‰øùÂ≠òÈ¢ÑËÆæÂàóË°®Ê†∑Âºè */
        .saved-presets-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid var(--color-gray-border);
            border-radius: 8px;
            background: var(--bg-white-95);
        }

        .saved-presets-list:empty::before {
            content: "ÊöÇÊó†‰øùÂ≠òÁöÑÈ¢ÑËÆæ";
            display: block;
            text-align: center;
            color: var(--color-gray);
            padding: 20px;
            font-size: 14px;
        }

        .preset-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid var(--color-gray-border);
            transition: background-color 0.2s ease;
        }

        .preset-item:last-child {
            border-bottom: none;
        }

        .preset-item:hover {
            background-color: var(--bg-white-80);
        }

        .preset-item.active {
            background-color: var(--theme-button-bg-light);
            border-left: 3px solid var(--theme-button-bg);
        }

        .preset-info {
            flex: 1;
            min-width: 0;
        }

        .preset-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
            font-size: 14px;
        }

        .preset-preview {
            color: var(--color-gray);
            font-size: 12px;
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .preset-actions {
            display: flex;
            gap: 8px;
            margin-left: 12px;
        }

        .preset-action-btn {
            background: none;
            border: none;
            color: var(--color-gray);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .preset-action-btn:hover {
            background-color: var(--bg-white-50);
            color: var(--text-primary);
        }

        .preset-action-btn.use-btn {
            color: var(--theme-button-bg);
        }

        .preset-action-btn.use-btn:hover {
            background-color: var(--theme-button-bg-light);
        }

        .preset-action-btn.delete-btn {
            color: #dc3545;
        }

        .preset-action-btn.delete-btn:hover {
            background-color: rgba(220, 53, 69, 0.1);
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÈ¢ÑËÆæÊ®°ÊÄÅÊ°ÜÁæéÂåñÊ†∑Âºè */
        #offline-preset-modal .form-group input,
        #offline-preset-modal .form-group textarea {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 14px;
            color: var(--text-primary);
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        #offline-preset-modal .form-group input:focus,
        #offline-preset-modal .form-group textarea:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.9);
            border-color: var(--theme-button-bg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        #offline-preset-modal .form-group textarea {
            resize: vertical;
            min-height: 120px;
            line-height: 1.5;
        }

        #offline-preset-modal .form-group input::placeholder,
        #offline-preset-modal .form-group textarea::placeholder {
            color: rgba(108, 117, 125, 0.7);
        }

        /* Á∫ø‰∏ãÈ¢ÑËÆæÊ®°ÊÄÅÊ°ÜÊåâÈíÆÁæéÂåñ */
        #offline-preset-modal .modal-footer .btn {
            background: rgba(108, 117, 125, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 500;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            min-width: 60px;
        }

        #offline-preset-modal .modal-footer .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            background: rgba(108, 117, 125, 0.9);
        }

        #offline-preset-modal .modal-footer .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }

        #offline-preset-modal .modal-footer .btn-primary {
            background: var(--theme-button-bg);
            border-color: rgba(255, 255, 255, 0.3);
        }

        #offline-preset-modal .modal-footer .btn-primary:hover {
            background: var(--theme-button-bg-hover);
        }

        /* ÁªèÂÖ∏‰∏ªÈ¢ò‰∏ãÁöÑÁ∫ø‰∏ãÈ¢ÑËÆæÊ†∑Âºè */
        body[data-theme="classic"] #offline-preset-modal .modal-footer .btn-primary {
            background: rgba(102, 126, 234, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        body[data-theme="classic"] #offline-preset-modal .modal-footer .btn-primary:hover {
            background: rgba(102, 126, 234, 0.9);
        }

        body[data-theme="classic"] #offline-preset-modal .form-group input:focus,
        body[data-theme="classic"] #offline-preset-modal .form-group textarea:focus {
            border-color: rgba(102, 126, 234, 0.8);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÁ∫ø‰∏ãÈ¢ÑËÆæÊ†∑Âºè */
        body[data-theme="cute"] #offline-preset-modal .modal-footer .btn-primary {
            background: rgba(255, 182, 193, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: #8B4B8C;
        }

        body[data-theme="cute"] #offline-preset-modal .modal-footer .btn-primary:hover {
            background: rgba(255, 182, 193, 0.9);
        }

        body[data-theme="cute"] #offline-preset-modal .form-group input:focus,
        body[data-theme="cute"] #offline-preset-modal .form-group textarea:focus {
            border-color: rgba(255, 182, 193, 0.8);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 0 3px rgba(255, 182, 193, 0.1);
        }

        body[data-theme="cute"] #offline-preset-modal .form-group input,
        body[data-theme="cute"] #offline-preset-modal .form-group textarea {
            background: rgba(255, 240, 245, 0.8);
        }

        body[data-theme="cute"] #offline-preset-modal .form-group input:focus,
        body[data-theme="cute"] #offline-preset-modal .form-group textarea:focus {
            background: rgba(255, 240, 245, 0.9);
        }

        /* Èó®ÂõæÊ†áÂä®Áîª */
        #offline-mode-icon {
            transition: all 0.3s ease;
        }

        .offline-mode-active #offline-mode-icon {
            transform: rotate(15deg);
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÁ∫ø‰∏ãÊ®°ÂºèÊ†∑Âºè */
        body[data-theme="cute"] .offline-mode-overlay {
            background: rgba(255, 230, 240, 0.95);
        }

        body[data-theme="cute"] .offline-message.user .offline-message-content {
            background: var(--theme-button-bg);
        }

        body[data-theme="cute"] .offline-send-btn {
            background: var(--theme-button-bg);
        }

        /* üî•„Äê‰øÆÊîπ„ÄëÁ∫ø‰∏ãÊ®°ÂºèÊ∂àÊÅØËèúÂçïÊ†∑Âºè - ‰∏éÁ∫ø‰∏äÊ®°Âºè‰øùÊåÅ‰∏ÄËá¥ */
        .offline-message-menu {
            position: fixed;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            z-index: 10001;
            overflow: hidden;
            min-width: 140px;
            padding: 8px;
            animation: fadeInScale 0.2s ease;
        }

        .offline-message-menu .menu-item {
            padding: 10px 16px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            border-radius: 8px;
            color: #333;
            display: flex;
            align-items: center;
            background: transparent;
            border: none;
            margin: 2px 0;
        }

        .offline-message-menu .menu-item:hover {
            background: rgba(240, 240, 240, 0.5);
            transform: scale(1.02);
        }

        .offline-message-menu .menu-item.delete {
            color: #ff3b30;
        }

        .offline-message-menu .menu-item.delete:hover {
            background: rgba(255, 59, 48, 0.1);
        }

        .offline-message-menu .menu-item i {
            margin-right: 8px;
            width: 16px;
            text-align: center;
        }

        .offline-message-menu .menu-item span {
            flex: 1;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÁ∫ø‰∏ãÊ∂àÊÅØËèúÂçï */
        body[data-theme="cute"] .offline-message-menu {
            background: rgba(255, 240, 245, 0.95);
            border: 1px solid rgba(255, 182, 193, 0.3);
        }

        body[data-theme="cute"] .offline-message-menu .menu-item:hover {
            background: rgba(255, 182, 193, 0.1);
        }

        body[data-theme="cute"] .offline-send-btn:hover {
            background: var(--theme-button-bg-hover);
        }

        body[data-theme="cute"] .offline-regenerate-btn {
            background: var(--bg-white-80);
            border-color: rgba(255, 182, 193, 0.3);
        }

        body[data-theme="cute"] .offline-regenerate-btn:hover {
            background: var(--bg-white-95);
        }

        /* Á∫ø‰∏ãÊ®°ÂºèÂä®Áîª */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÊ®°ÂºèAIÂõûÂ§çÂä†ËΩΩÂä®Áîª */
        .offline-loading-message {
            margin-bottom: 16px;
            animation: fadeInUp 0.3s ease;
            text-align: left;
        }

        .offline-loading-content {
            display: inline-block;
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            border-bottom-left-radius: 6px;
            background: var(--bg-white-90);
            color: var(--text-primary);
            border: 1px solid var(--color-gray-border);
            position: relative;
        }

        .offline-loading-dots {
            display: flex;
            align-items: center;
            gap: 4px;
            min-height: 20px;
        }

        .offline-loading-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--color-gray-medium);
            animation: loadingPulse 1.4s ease-in-out infinite both;
        }

        .offline-loading-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .offline-loading-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        .offline-loading-dot:nth-child(3) {
            animation-delay: 0s;
        }

        @keyframes loadingPulse {
            0%, 80%, 100% {
                transform: scale(0.6);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÂä†ËΩΩÂä®Áîª */
        body[data-theme="cute"] .offline-loading-content {
            background: rgba(255, 240, 245, 0.95);
            border: 1px solid rgba(255, 182, 193, 0.3);
        }

        body[data-theme="cute"] .offline-loading-dot {
            background: var(--theme-button-bg);
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÊ®°ÂºèÊñáÊú¨Ê†ºÂºèÂåñÊ†∑Âºè */
        .offline-message-content em {
            font-style: italic;
            font-weight: normal; /* Êñú‰Ωì‰∏çÂä†Á≤óÔºå‰øùÊåÅÊ≠£Â∏∏Â≠óÈáç */
            color: inherit;
        }

        .offline-message-content strong {
            font-weight: bold; /* Âä†Á≤óÊñáÊú¨ */
            font-style: normal;
            color: inherit;
        }

        .offline-message-content span[style*="color"] {
            font-weight: 500;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÈÄÄÂá∫Á∫ø‰∏ãÊ®°ÂºèÊåâÈíÆÁöÑÊØõÁéªÁíÉÊ†∑Âºè - ‰ΩøÁî®ÁâπÂÆöÁ±ªÂêç */
        .offline-exit-modal .btn {
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            border-radius: 8px !important;
            color: white !important;
            font-weight: 500 !important;
            transition: all 0.3s ease !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
            padding: 8px 16px !important; /* Êõ¥Â∞èÁöÑÂÜÖËæπË∑ù */
            font-size: 14px !important; /* Êõ¥Â∞èÁöÑÂ≠ó‰Ωì */
            min-height: 36px !important; /* Âõ∫ÂÆöËæÉÂ∞èÁöÑÈ´òÂ∫¶ */
            width: 100% !important;
            margin-bottom: 8px !important; /* Êõ¥Â∞èÁöÑÈó¥Ë∑ù */
        }

        /* ‰∏ªË¶ÅÊåâÈíÆ - ÁîüÊàêÂâßÊÉÖÊÄªÁªì */
        .offline-exit-modal .btn-primary {
            background: rgba(40, 167, 69, 0.8) !important; /* ÁªøËâ≤ */
        }

        .offline-exit-modal .btn-primary:hover {
            background: rgba(40, 167, 69, 0.9) !important;
        }

        /* Ê¨°Ë¶ÅÊåâÈíÆ - ÊöÇÊó∂Á¶ªÂºÄ */
        .offline-exit-modal .btn-secondary {
            background: rgba(108, 117, 125, 0.8) !important; /* ÁÅ∞Ëâ≤ */
        }

        .offline-exit-modal .btn-secondary:hover {
            background: rgba(108, 117, 125, 0.9) !important;
        }

        /* Âç±Èô©ÊåâÈíÆ - ÊîæÂºÉÊÄªÁªì */
        .offline-exit-modal .btn-danger {
            background: rgba(220, 53, 69, 0.8) !important; /* Á∫¢Ëâ≤ */
        }

        .offline-exit-modal .btn-danger:hover {
            background: rgba(220, 53, 69, 0.9) !important;
        }

        /* ÁªèÂÖ∏‰∏ªÈ¢ò‰∏ãÁöÑÁâπÊÆäÊ†∑Âºè */
        body[data-theme="classic"] .offline-exit-modal .btn-primary {
            background: rgba(102, 126, 234, 0.8) !important; /* ÈõæÈúæËìù */
        }

        body[data-theme="classic"] .offline-exit-modal .btn-primary:hover {
            background: rgba(102, 126, 234, 0.9) !important;
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÁâπÊÆäÊ†∑Âºè */
        body[data-theme="cute"] .offline-exit-modal .btn-primary {
            background: rgba(255, 182, 193, 0.8) !important; /* ÈõæÈúæÁ≤â */
            color: #8B4B8C !important;
        }

        body[data-theme="cute"] .offline-exit-modal .btn-primary:hover {
            background: rgba(255, 182, 193, 0.9) !important;
        }

        /* ÊÇ¨ÂÅúÂíåÁÇπÂáªÊïàÊûú */
        .offline-exit-modal .btn:hover {
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
        }

        .offline-exit-modal .btn:active {
            transform: translateY(0) !important;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1) !important;
        }

        /* ÊúÄÂêé‰∏Ä‰∏™ÊåâÈíÆ‰∏çË¶Å‰∏ãËæπË∑ù */
        .offline-exit-modal .btn:last-child {
            margin-bottom: 0 !important;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÂä†ËΩΩÁä∂ÊÄÅÁöÑÊåâÈíÆÊ†∑Âºè */
        .offline-exit-modal .btn:disabled {
            opacity: 0.7 !important;
            cursor: not-allowed !important;
            transform: none !important;
        }

        .offline-exit-modal .btn:disabled:hover {
            transform: none !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
        }

        /* Á°Æ‰øùÊ†ºÂºèÂåñÊñáÊú¨Âú®‰∏çÂêå‰∏ªÈ¢ò‰∏ãÈÉΩÊúâËâØÂ•ΩÁöÑÂèØËØªÊÄß */
        body[data-theme="cute"] .offline-message-content em {
            color: var(--theme-button-bg);
        }

        #api-chat-screen .header .character-status {
            position: absolute;
            top: 64px; /* Á¥ßË¥¥Âú®ÊòµÁß∞‰∏ãÊñπ */
            left: 50%;
            transform: translateX(-50%);
            justify-content: center;
            white-space: nowrap;
            z-index: 10;
            /* ÁßªÈô§ÊâÄÊúâËÉåÊôØË£ÖÈ•∞Ôºå‰øùÊåÅÂπ≤ÂáÄ */
        }



        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ°Æ‰øùËÅäÂ§©ÁïåÈù¢Ê†áÈ¢òÂ±Ö‰∏≠ÊòæÁ§∫ */
        .header .header-title {
            text-align: center;
            flex: 1;
            color: #000000;
            position: relative; /* ‰∏∫Áä∂ÊÄÅÂÆö‰ΩçÊèê‰æõÂèÇËÄÉ */
        }

        /* üî•„ÄêÁæéÂåñ„ÄëÊãâÈªëÁä∂ÊÄÅÊèêÁ§∫Ê†∑Âºè - Áé∞‰ª£Á§æ‰∫§ËΩØ‰ª∂È£éÊ†º */
        .blocked-input-notice {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 100%; /* ‰Ωç‰∫éËæìÂÖ•Ê°Ü‰∏äÊñπ */
            background: rgba(248, 249, 250, 0.85); /* Ê∑°Ê∑°ÁöÑÈõæÈúæÁÅ∞ÔºåÊé•ËøëÁôΩËâ≤ */
            backdrop-filter: blur(8px); /* ÂáèÂ∞ëÊ®°Á≥äÂ∫¶ÔºåËÉΩÁúãÂà∞‰∏ãÈù¢ÁöÑÂÜÖÂÆπ */
            -webkit-backdrop-filter: blur(8px);
            border-top: 1px solid rgba(200, 200, 200, 0.3);
            border-bottom: 1px solid rgba(200, 200, 200, 0.2);
            padding: 12px 20px;
            text-align: center;
            z-index: 101;
            font-size: 13px;
            color: #666;
            display: none;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
        }

        .blocked-input-notice.show {
            display: block;
        }

        .blocked-input-notice .notice-text {
            margin-bottom: 8px;
            font-weight: 500;
            color: #6B4423;
        }

        .blocked-input-notice .notice-button {
            background: linear-gradient(135deg, #1890ff, #40a9ff);
            color: white;
            border: none;
            padding: 6px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(24, 144, 255, 0.2);
        }

        .blocked-input-notice .notice-button:hover {
            background: linear-gradient(135deg, #096dd9, #1890ff);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(24, 144, 255, 0.3);
        }

        .blocked-input-notice .notice-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(24, 144, 255, 0.2);
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÊ∂àÊÅØÊãâÈªëÁä∂ÊÄÅÊåáÁ§∫Âô®Ê†∑Âºè */
        .message-blocked-indicator {
            position: absolute;
            bottom: 4px;
            width: 16px;
            height: 16px;
            background: #dc3545;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
            font-weight: bold;
            z-index: 10;
        }

        /* AIÊ∂àÊÅØÁöÑÊãâÈªëÊåáÁ§∫Âô®‰ΩçÁΩÆÁî±JavaScriptÂä®ÊÄÅËÆæÁΩÆ */

        /* Áî®Êà∑Ê∂àÊÅØÁöÑÊãâÈªëÊåáÁ§∫Âô®‰ΩçÁΩÆÁî±JavaScriptÂä®ÊÄÅËÆæÁΩÆ */

        /* üî•„ÄêÊñ∞Â¢û„ÄëÂ•ΩÂèãÊ∑ªÂä†ÊàêÂäüÁ≥ªÁªüÊèêÁ§∫Ê†∑Âºè - ÈÄèÊòéËÉåÊôØÂÉèÊà≥‰∏ÄÊà≥ */
        .friend-added-system-message {
            text-align: center;
            color: #999;
            font-size: 12px;
            padding: 6px 12px;
            margin: 4px auto;
            background: transparent; /* ÈÄèÊòéËÉåÊôØ */
            border-radius: 12px;
            max-width: 280px;
            line-height: 1.4;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëAI‰∏ªÂä®ÂèëÈÄÅÁöÑÂ•ΩÂèãÁî≥ËØ∑Âç°ÁâáÊ†∑Âºè */
        .friend-request-container {
            display: flex;
            justify-content: center;
            margin: 8px 0;
        }

        .friend-request-card {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 16px;
            max-width: 280px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .friend-request-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .friend-request-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .friend-request-message {
            font-size: 14px;
            color: #666;
            margin-bottom: 16px;
            line-height: 1.4;
        }

        .friend-request-actions {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .friend-request-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .friend-request-btn.accept {
            background: #4CAF50;
            color: white;
        }

        .friend-request-btn.accept:hover {
            background: #45a049;
        }

        .friend-request-btn.reject {
            background: #f44336;
            color: white;
        }

        .friend-request-btn.reject:hover {
            background: #da190b;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëËÅîÁ≥ª‰∫∫Áä∂ÊÄÅÊåáÁ§∫Âô®Ê†∑Âºè */
        .contact-status-indicator {
            position: absolute;
            top: 50%;
            right: 12px;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
        }

        .contact-status-indicator.muted {
            background: #ff9800; /* Ê©ôËâ≤Ë°®Á§∫Â±èËîΩ */
        }

        .contact-status-indicator.blocked {
            background: #f44336; /* Á∫¢Ëâ≤Ë°®Á§∫Â∑≤ÊãâÈªë */
        }

        .contact-status-indicator.blocked-by {
            background: #ff5722; /* Ê∑±Ê©ôËâ≤Ë°®Á§∫Ë¢´ÊãâÈªë */
        }

        /* Á°Æ‰øùËÅîÁ≥ª‰∫∫È°πÊúâÁõ∏ÂØπÂÆö‰Ωç */
        .contact-item {
            position: relative;
        }

        /* üî•„ÄêÂà†Èô§„ÄëÊ∂àÊÅØÊãâÈªëÁä∂ÊÄÅÊèêÁ§∫ÊñáÂ≠óÊ†∑Âºè - Áé∞Âú®‰ΩøÁî®Á≥ªÁªüÊ∂àÊÅØ */

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÊ®°ÂºèËÅäÂ§©ËÆ∞ÂΩïÊ†∑Âºè */
        .offline-history-list {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px 0;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÊ®°ÂºèÁïåÈù¢ËÆæÁΩÆÊ†∑Âºè */
        #offline-ui-settings-modal {
            z-index: 10001 !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
        }

        #offline-ui-settings-modal .modal-content {
            z-index: 10002 !important;
            position: relative !important;
            max-height: 90vh;
            overflow-y: auto;
        }

        .color-setting-group {
            margin-bottom: 15px;
        }

        .flex-gap-15 {
            display: flex;
            gap: 15px;
        }

        .flex-1 {
            flex: 1;
        }

        .label-small {
            font-size: 12px;
            color: #666;
            font-weight: 500;
            display: block;
            margin-bottom: 5px;
        }

        .wallpaper-setting,
        .font-setting {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .wallpaper-setting input,
        .font-setting input {
            flex: 1;
            min-width: 200px;
        }

        .text-color-setting {
            margin-top: 10px;
        }

        .color-section {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .section-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
            display: block;
        }

        .saved-colors {
            display: flex;
            gap: 5px;
            margin-top: 5px;
            flex-wrap: wrap;
        }

        .saved-color-item {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .saved-color-item:hover {
            transform: scale(1.1);
            border-color: #007AFF;
        }

        .color-management {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .offline-preview-area {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border-radius: 12px;
            padding: 15px;
            margin-top: 10px;
            min-height: 120px;
        }

        .offline-preview-message {
            margin-bottom: 12px;
            animation: fadeInUp 0.3s ease;
        }

        .offline-preview-message.user {
            text-align: right;
        }

        .offline-preview-message.ai {
            text-align: left;
        }

        .offline-preview-content {
            display: inline-block;
            max-width: 80%;
            padding: 10px 14px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.4;
            word-wrap: break-word;
        }

        .offline-preview-message.user .offline-preview-content {
            background: var(--offline-my-bubble-color, #007AFF);
            color: var(--offline-user-normal-text-color, #ffffff);
            border-bottom-right-radius: 6px;
            text-align: left;
        }

        .offline-preview-message.ai .offline-preview-content {
            background: var(--offline-ai-bubble-color, #f0f0f0);
            color: var(--offline-ai-normal-text-color, #000000);
            border-bottom-left-radius: 6px;
            border: 1px solid var(--color-gray-border);
            text-align: left;
        }

        .offline-preview-message.user .offline-preview-content em {
            font-style: italic;
            color: var(--offline-user-italic-text-color, #f0f0f0);
        }

        .offline-preview-message.user .offline-preview-content strong {
            font-weight: bold;
            color: var(--offline-user-bold-text-color, #ffffff);
        }

        .offline-preview-message.ai .offline-preview-content em {
            font-style: italic;
            color: var(--offline-ai-italic-text-color, #666666);
        }

        .offline-preview-message.ai .offline-preview-content strong {
            font-weight: bold;
            color: var(--offline-ai-bold-text-color, #333333);
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÊ®°ÂºèÁïåÈù¢ËÆæÁΩÆË°®ÂçïÊ†∑Âºè */
        #offline-ui-settings-modal .form-group {
            margin-bottom: 20px;
        }

        #offline-ui-settings-modal .form-group label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 14px;
        }

        #offline-ui-settings-modal .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--color-gray-border);
            border-radius: 8px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
        }

        #offline-ui-settings-modal .form-input:focus {
            outline: none;
            border-color: var(--theme-button-bg);
            box-shadow: 0 0 0 2px rgba(var(--theme-button-bg-rgb), 0.2);
        }

        #offline-ui-settings-modal .theme-button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--theme-button-bg);
            color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #offline-ui-settings-modal .theme-button:hover {
            background: var(--theme-button-bg-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        #offline-ui-settings-modal .theme-button-secondary {
            background: rgba(255, 255, 255, 0.8);
            color: #333;
            border: 1px solid rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        }

        #offline-ui-settings-modal .theme-button-secondary:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12);
        }

        /* Á∫ø‰∏ãÊ®°ÂºèÁïåÈù¢ËÆæÁΩÆÁöÑÊØõÁéªÁíÉÊåâÈíÆÊ†∑Âºè */
        #offline-ui-settings-modal .modal-footer .btn {
            background: rgba(255, 255, 255, 0.8) !important;
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
            border: 1px solid rgba(0, 0, 0, 0.1) !important;
            border-radius: 10px !important;
            color: #333 !important;
            font-weight: 500 !important;
            transition: all 0.3s ease !important;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08) !important;
            padding: 6px 14px !important;
            font-size: 13px !important;
            min-height: 32px !important;
            margin-left: 6px !important;
        }

        #offline-ui-settings-modal .modal-footer .btn:hover {
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12) !important;
            background: rgba(255, 255, 255, 0.95) !important;
        }

        #offline-ui-settings-modal .modal-footer .btn-primary {
            background: var(--theme-button-bg, rgba(0, 122, 255, 0.8)) !important;
            border-color: rgba(255, 255, 255, 0.3) !important;
            color: white !important;
        }

        #offline-ui-settings-modal .modal-footer .btn-primary:hover {
            background: var(--theme-button-bg-hover, rgba(0, 122, 255, 0.9)) !important;
        }

        /* ÁªèÂÖ∏‰∏ªÈ¢ò‰∏ãÁöÑÁ∫ø‰∏ãÁïåÈù¢ËÆæÁΩÆÊ†∑Âºè */
        body[data-theme="classic"] #offline-ui-settings-modal .modal-footer .btn-primary {
            background: rgba(102, 126, 234, 0.8) !important;
        }

        body[data-theme="classic"] #offline-ui-settings-modal .modal-footer .btn-primary:hover {
            background: rgba(102, 126, 234, 0.9) !important;
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÁ∫ø‰∏ãÁïåÈù¢ËÆæÁΩÆÊ†∑Âºè */
        body[data-theme="cute"] #offline-ui-settings-modal .modal-footer .btn-primary {
            background: rgba(255, 182, 193, 0.8) !important;
        }

        body[data-theme="cute"] #offline-ui-settings-modal .modal-footer .btn-primary:hover {
            background: rgba(255, 182, 193, 0.9) !important;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁ∫ø‰∏ãÊ®°ÂºèÁïåÈù¢ËÆæÁΩÆÊñ∞ÂäüËÉΩÊ†∑Âºè */
        .setting-row {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 12px;
        }

        .setting-row .radio-label {
            margin-bottom: 4px;
            margin-right: 0;
        }

        .setting-row .radio-options {
            display: flex;
            flex-direction: column;
            gap: 6px;
            width: 100%;
        }

        .checkbox-label,
        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            cursor: pointer;
            padding: 2px 0;
        }

        .radio-label {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        /* ÊÅ¢Â§çÂéüÁîüÁöÑcheckboxÂíåradioÊòæÁ§∫ */
        .checkbox-label input[type="checkbox"],
        .radio-option input[type="radio"] {
            width: 16px;
            height: 16px;
            margin: 0;
            cursor: pointer;
            accent-color: var(--theme-button-bg, #007AFF);
        }

        /* ÈÄâÈ°πÊåâÈíÆÊ†∑Âºè - ÊÅ¢Â§çÊ≠£Â∏∏ÊåâÈíÆÂ§ñËßÇ */
        .radio-option-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            margin-bottom: 6px;
            width: fit-content;
        }

        .radio-option-button:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .radio-option-button.selected {
            background: var(--theme-button-bg, rgba(0, 122, 255, 0.8));
            color: white;
            border-color: var(--theme-button-bg, #007AFF);
        }

        /* Áã¨Á´ãÁöÑÂ∞èÂúÜÂúàÊåáÁ§∫Âô® */
        .radio-indicator {
            width: 16px;
            height: 16px;
            border: 2px solid #ddd;
            border-radius: 50%;
            background: white;
            position: relative;
            transition: all 0.2s ease;
            flex-shrink: 0;
            margin-right: 4px;
        }

        .radio-option-button.selected .radio-indicator {
            border-color: white;
            background: white;
        }

        .radio-option-button.selected .radio-indicator::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--theme-button-bg, #007AFF);
            font-size: 10px;
            font-weight: bold;
        }

        .radio-option-button:not(.selected) .radio-indicator {
            border-color: var(--theme-button-bg, #007AFF);
        }

        .radio-option-button:not(.selected) .radio-indicator::after {
            content: '';
        }

        .avatar-setting,
        .bubble-style-setting {
            padding: 12px;
            background: transparent;
            border-radius: 8px;
            border: none;
        }

        .custom-css-setting {
            margin-top: 10px;
        }

        .css-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        /* Á∫ø‰∏ãÊ®°ÂºèÂ§¥ÂÉèÊ†∑Âºè */
        .offline-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--color-gray-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
            position: relative;
        }

        .offline-preview-message {
            position: relative;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 16px;
        }

        .offline-preview-message.user {
            flex-direction: row-reverse;
            text-align: right;
        }

        .offline-preview-message.ai {
            flex-direction: row;
            text-align: left;
        }

        /* üî•„ÄêÁúüÊ≠£‰øÆÂ§ç„ÄëÈªòËÆ§Â§¥ÂÉè‰ΩçÁΩÆÔºà‰æßËæπÊòæÁ§∫Ôºâ */
        .offline-avatar.user-avatar {
            order: 1; /* üî•„Äê‰øÆÊ≠£„ÄëÁî®Êà∑Â§¥ÂÉèÂú®Â∑¶‰æß */
        }

        .offline-avatar.ai-avatar {
            order: 2; /* üî•„Äê‰øÆÊ≠£„ÄëAIÂ§¥ÂÉèÂú®Âè≥‰æß */
        }

        /* ÈªòËÆ§Ê∞îÊ≥°ÂÆΩÂ∫¶80% */
        .offline-preview-content {
            max-width: 80% !important;
        }

        /* ÈöêËóèÂ§¥ÂÉèÁöÑÊ†∑Âºè */
        .offline-avatar.hidden {
            display: none !important;
        }

        /* üî•„Äê‰øÆÊ≠£„ÄëÂΩìÂ§¥ÂÉèÈöêËóèÊó∂ÁöÑÊ∂àÊÅØÂØπÈΩêÈÄªËæëÂíåÊ∞îÊ≥°ÂÆΩÂ∫¶ */
        /* Áî®Êà∑Ê∂àÊÅØÔºöÈöêËóèÁî®Êà∑Â§¥ÂÉèÊó∂Â±Ö‰∏≠ÊòæÁ§∫ÔºåÊ∞îÊ≥°ÂÆΩÂ∫¶90% */
        .offline-message.user.no-user-avatar,
        .offline-preview-message.user.no-user-avatar {
            justify-content: center;
        }

        .offline-message.user.no-user-avatar .offline-message-content,
        .offline-preview-message.user.no-user-avatar .offline-preview-content {
            max-width: 90% !important;
        }

        .offline-message.user.no-ai-avatar,
        .offline-preview-message.user.no-ai-avatar {
            justify-content: flex-end; /* ‰øùÊåÅÂè≥ÂØπÈΩê */
        }

        .offline-message.user.no-ai-avatar .offline-message-content,
        .offline-preview-message.user.no-ai-avatar .offline-preview-content {
            max-width: 90% !important;
        }

        /* AIÊ∂àÊÅØÔºöÈöêËóèAIÂ§¥ÂÉèÊó∂Â±Ö‰∏≠ÊòæÁ§∫ÔºåÊ∞îÊ≥°ÂÆΩÂ∫¶90% */
        .offline-message.ai.no-ai-avatar,
        .offline-preview-message.ai.no-ai-avatar {
            justify-content: center;
        }

        .offline-message.ai.no-ai-avatar .offline-message-content,
        .offline-preview-message.ai.no-ai-avatar .offline-preview-content {
            max-width: 90% !important;
        }

        .offline-message.ai.no-user-avatar,
        .offline-preview-message.ai.no-user-avatar {
            justify-content: flex-start; /* ‰øùÊåÅÂ∑¶ÂØπÈΩê */
        }

        .offline-message.ai.no-user-avatar .offline-message-content,
        .offline-preview-message.ai.no-user-avatar .offline-preview-content {
            max-width: 90% !important;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÂΩìÂèåÊñπÂ§¥ÂÉèÈÉΩÈöêËóèÊó∂ÔºåÊâÄÊúâÊ∂àÊÅØÂ±Ö‰∏≠ÊòæÁ§∫ÔºåÊ∞îÊ≥°ÂÆΩÂ∫¶90% */
        .offline-message.no-user-avatar.no-ai-avatar,
        .offline-preview-message.no-user-avatar.no-ai-avatar {
            justify-content: center;
        }

        .offline-message.no-user-avatar.no-ai-avatar .offline-message-content,
        .offline-preview-message.no-user-avatar.no-ai-avatar .offline-preview-content {
            max-width: 90% !important;
        }

        /* üî•„ÄêÁé∞‰ª£ÊµèËßàÂô®ÊîØÊåÅ„Äë‰ΩøÁî®:has()ÈÄâÊã©Âô®ÁöÑÁâàÊú¨ */
        .offline-message.user:has(.user-avatar[style*="display: none"]),
        .offline-preview-message.user:has(.user-avatar[style*="display: none"]) {
            justify-content: center;
        }

        .offline-message.ai:has(.ai-avatar[style*="display: none"]),
        .offline-preview-message.ai:has(.ai-avatar[style*="display: none"]) {
            justify-content: center;
        }

        .empty-history {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .history-record-item {
            background: var(--bg-white-90);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid var(--border-black-05);
            transition: all 0.2s ease;
        }

        .history-record-item:hover {
            background: var(--bg-white-95);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .history-record-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .history-record-info {
            flex: 1;
        }

        .history-record-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 4px;
        }

        .history-record-meta {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .history-record-actions {
            display: flex;
            gap: 8px;
        }

        .history-action-btn {
            width: 32px;
            height: 32px;
            border: 1px solid var(--border-black-10);
            border-radius: 8px;
            background: var(--bg-white-90);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .history-action-btn:hover {
            background: var(--theme-button-bg, #4a84c1);
            color: white;
            border-color: var(--theme-button-bg, #4a84c1);
        }

        .history-action-btn.delete:hover {
            background: #e74c3c;
            border-color: #e74c3c;
        }

        .history-record-summary {
            font-size: 13px;
            line-height: 1.4;
            color: var(--text-primary);
            background: var(--bg-white-95);
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid var(--theme-button-bg, #4a84c1);
        }

        /* ËÅäÂ§©ËÆ∞ÂΩïËØ¶ÊÉÖÊ†∑Âºè */
        .history-detail-info {
            background: var(--bg-white-95);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .history-summary-text {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid var(--theme-button-bg, #4a84c1);
            margin-top: 8px;
            line-height: 1.5;
            font-size: 14px;
        }

        .history-messages-container {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border-black-05);
            border-radius: 8px;
            padding: 10px;
            background: var(--bg-white-95);
        }

        .history-message {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            background: white;
        }

        .history-message.user {
            border-left: 3px solid #3498db;
        }

        .history-message.ai {
            border-left: 3px solid #e74c3c;
        }

        .history-message .message-sender {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .history-message .message-content {
            font-size: 14px;
            line-height: 1.4;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .history-message .message-time {
            font-size: 11px;
            color: var(--text-secondary);
            text-align: right;
        }

        /* ËÆ∞ÂøÜÊü•ÁúãÂô®Ê†∑Âºè */
        .memory-character-selector {
            padding: 15px;
            background: var(--bg-white-90);
            border-radius: 12px;
            margin: 15px;
            border: 1px solid var(--border-black-05);
        }

        .memory-character-selector label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 14px;
        }

        #memory-character-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-black-10);
            border-radius: 8px;
            background: white;
            font-size: 14px;
            color: var(--text-primary);
        }

        .memory-search-section {
            padding: 0 15px;
            margin-bottom: 15px;
        }

        .memory-search-bar {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        #memory-search-input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid var(--border-black-10);
            border-radius: 8px;
            font-size: 14px;
            background: white;
        }

        .search-btn {
            padding: 10px 15px;
            background: var(--theme-button-bg, #4a84c1);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .search-btn:hover {
            background: var(--theme-button-bg-hover, #3a74b1);
        }

        .memory-filter-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            padding-bottom: 5px;
            max-width: 100%;
            overflow: hidden;
        }

        .memory-filter-tab {
            padding: 6px 12px;
            background: var(--bg-white-90);
            border: 1px solid var(--border-black-05);
            border-radius: 16px;
            font-size: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .memory-filter-tab.active {
            background: var(--theme-button-bg, #4a84c1);
            color: white;
            border-color: var(--theme-button-bg, #4a84c1);
        }

        .memory-filter-tab:hover:not(.active) {
            background: var(--bg-white-95);
            border-color: var(--border-black-10);
        }

        .memory-content-area {
            flex: 1;
            overflow: hidden;
        }

        .memory-list {
            height: 100%;
            overflow-y: auto;
            padding: 0 15px 15px;
        }

        .memory-empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 200px;
            color: var(--color-gray);
            text-align: center;
        }

        .memory-empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .memory-item {
            background: var(--bg-white-90);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid var(--border-black-05);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .memory-item:hover {
            background: var(--bg-white-95);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .memory-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .memory-item-type {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            background: var(--theme-button-bg, #4a84c1);
            color: white;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .memory-item-type.core {
            background: #e74c3c;
        }

        .memory-item-type.episodic {
            background: #f39c12;
        }

        .memory-item-type.timeline {
            background: #9b59b6;
        }

        /* ËÆ∞ÂøÜËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
        #memorySettingsModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        #memorySettingsModal .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        #memorySettingsModal .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #memorySettingsModal .modal-header h3 {
            margin: 0;
            color: #333;
        }

        #memorySettingsModal .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        #memorySettingsModal .modal-close:hover {
            background: #f5f5f5;
            color: #333;
        }

        #memorySettingsModal .modal-body {
            padding: 20px;
        }

        #memorySettingsModal .setting-group {
            margin-bottom: 25px;
        }

        #memorySettingsModal .setting-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        #memorySettingsModal .setting-group input[type="number"] {
            width: 120px;
            max-width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
        }

        #memorySettingsModal .setting-group input[type="number"]:focus {
            outline: none;
            border-color: #007AFF;
        }

        #memorySettingsModal .setting-group input[type="range"] {
            width: calc(100% - 60px);
            margin-right: 10px;
        }

        #memorySettingsModal .setting-group span {
            display: inline-block;
            width: 50px;
            text-align: center;
            font-weight: 600;
            color: #007AFF;
        }

        #memorySettingsModal .setting-group small {
            display: block;
            margin-top: 5px;
            color: #666;
            font-size: 14px;
        }

        #memorySettingsModal .modal-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        #memorySettingsModal .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 80px;
            flex: 0 0 auto;
        }

        #memorySettingsModal .btn-secondary {
            background: #f5f5f5;
            color: #333;
        }

        #memorySettingsModal .btn-secondary:hover {
            background: #e5e5e5;
        }

        #memorySettingsModal .btn-primary {
            background: var(--theme-button-bg, #007AFF);
            color: var(--theme-button-color, white);
        }

        #memorySettingsModal .btn-primary:hover {
            background: var(--theme-button-bg-hover, #0056CC);
        }

        /* ÂÖ®Â±ÄËÆ∞ÂøÜËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
        #global-memory-modal.modal {
            display: flex !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background-color: rgba(0, 0, 0, 0.5) !important;
            z-index: 10000 !important;
            justify-content: center !important;
            align-items: center !important;
        }

        #global-memory-modal.modal .modal-content {
            background: white !important;
            border-radius: 12px !important;
            width: 90% !important;
            max-width: 400px !important;
            max-height: 80vh !important;
            overflow-y: auto !important;
        }




        /* ÂÖ®Â±ÄËÆ∞ÂøÜËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÁöÑÁ¥ßÂáëÊ†∑Âºè */
        #global-memory-modal .modal-header {
            padding: 16px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #global-memory-modal .modal-header h3 {
            margin: 0;
            color: #333;
            font-size: 16px;
        }

        #global-memory-modal .modal-close {
            background: none;
            border: none;
            font-size: 18px;
            color: #999;
            cursor: pointer;
            padding: 4px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        #global-memory-modal .modal-close:hover {
            background: #f5f5f5;
            color: #333;
        }

        #global-memory-modal .modal-body {
            padding: 16px 20px;
        }

        #global-memory-modal .setting-section {
            margin-bottom: 20px;
        }

        #global-memory-modal .setting-section h4 {
            margin: 0 0 12px 0;
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        #global-memory-modal .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        #global-memory-modal .radio-option {
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        #global-memory-modal .radio-option:hover {
            border-color: var(--theme-button-bg, #007AFF);
            background: rgba(var(--theme-button-bg-rgb, 0, 122, 255), 0.05);
        }

        #global-memory-modal .radio-custom {
            width: 16px;
            height: 16px;
            margin-right: 10px;
        }

        #global-memory-modal .radio-content {
            flex: 1;
        }

        #global-memory-modal .radio-title {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 2px;
        }

        #global-memory-modal .radio-desc {
            font-size: 12px;
            color: #666;
        }

        #global-memory-modal .modal-actions {
            padding: 12px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            gap: 12px;
        }

        #global-memory-modal .modal-button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 70px;
            flex: 0 0 auto;
        }

        #global-memory-modal .modal-secondary {
            background: #f5f5f5;
            color: #333;
        }

        #global-memory-modal .modal-secondary:hover {
            background: #e5e5e5;
        }

        #global-memory-modal .modal-primary {
            background: var(--theme-button-bg, #007AFF);
            color: var(--theme-button-color, white);
        }

        #global-memory-modal .modal-primary:hover {
            background: var(--theme-button-bg-hover, #0056CC);
        }

        .memory-item-date {
            font-size: 12px;
            color: var(--color-gray);
        }

        .memory-item-content {
            font-size: 14px;
            line-height: 1.4;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .memory-item-importance {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            color: var(--color-gray);
        }

        .importance-stars {
            color: #f39c12;
        }

        .memory-item-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .memory-item:hover .memory-item-actions {
            opacity: 1;
        }

        .memory-action-btn {
            padding: 5px 10px;
            background: var(--bg-white-95);
            border: 1px solid var(--border-black-10);
            border-radius: 6px;
            font-size: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .memory-action-btn:hover {
            background: var(--theme-button-bg, #4a84c1);
            color: white;
            border-color: var(--theme-button-bg, #4a84c1);
        }

        .memory-action-btn.delete:hover {
            background: #e74c3c;
            border-color: #e74c3c;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëËÆ∞ÂøÜÁÆ°ÁêÜÊåâÈíÆÁΩëÊ†ºÂ∏ÉÂ±Ä */
        .memory-management-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 15px;
        }

        .memory-management-grid .memory-action-btn:last-child {
            grid-column: 1 / -1; /* ËÆ©ÊúÄÂêé‰∏Ä‰∏™ÊåâÈíÆÂç†Êª°Êï¥Ë°å */
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÁæéÂåñËÆ∞ÂøÜÊìç‰ΩúÊåâÈíÆ */
        .memory-action-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            border: 1px solid var(--border-black-10);
            border-radius: 12px;
            background: var(--bg-white-90);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 14px;
            color: var(--text-primary);
            min-height: 70px;
        }

        .memory-action-btn:hover {
            background: var(--bg-white-95);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .memory-action-btn.primary {
            border-color: #e74c3c;
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(231, 76, 60, 0.05));
        }

        .memory-action-btn.primary:hover {
            border-color: #e74c3c;
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.15), rgba(231, 76, 60, 0.08));
        }

        .memory-action-btn.secondary {
            border-color: #f39c12;
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.1), rgba(243, 156, 18, 0.05));
        }

        .memory-action-btn.secondary:hover {
            border-color: #f39c12;
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.15), rgba(243, 156, 18, 0.08));
        }

        .memory-action-btn.accent {
            border-color: var(--theme-button-bg, #4a84c1);
            background: linear-gradient(135deg, rgba(74, 132, 193, 0.1), rgba(74, 132, 193, 0.05));
        }

        .memory-action-btn.accent:hover {
            border-color: var(--theme-button-bg, #4a84c1);
            background: linear-gradient(135deg, rgba(74, 132, 193, 0.15), rgba(74, 132, 193, 0.08));
        }

        .memory-action-btn .btn-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .memory-action-btn .btn-content {
            flex: 1;
        }

        .memory-action-btn .btn-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .memory-action-btn .btn-desc {
            font-size: 12px;
            color: var(--text-secondary);
            opacity: 0.8;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÊ∏ÖÁ©∫ÂéÜÂè≤ËÆ∞ÂΩïÈÄâÈ°πÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-option {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: background-color 0.2s ease;
        }

        .checkbox-option:hover {
            background-color: var(--bg-white-95);
        }

        .checkbox-custom {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-black-20);
            border-radius: 4px;
            position: relative;
            flex-shrink: 0;
            margin-top: 2px;
            transition: all 0.2s ease;
        }

        .checkbox-option input[type="checkbox"] {
            display: none;
        }

        .checkbox-option input[type="checkbox"]:checked + .checkbox-custom {
            background-color: var(--theme-button-bg, #4a84c1);
            border-color: var(--theme-button-bg, #4a84c1);
        }

        .checkbox-option input[type="checkbox"]:checked + .checkbox-custom::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .checkbox-content {
            flex: 1;
        }

        .checkbox-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
            font-size: 14px;
        }

        .checkbox-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëËÆ∞ÂøÜÊü•ÁúãÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
        .memory-modal-item {
            background: var(--bg-white-90);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid var(--border-black-05);
            transition: all 0.2s ease;
        }

        .memory-modal-item:hover {
            background: var(--bg-white-95);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .memory-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .memory-modal-index {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--theme-button-bg, #4a84c1);
            color: white;
            border-radius: 50%;
            font-size: 12px;
            font-weight: 600;
        }

        .memory-modal-date {
            font-size: 12px;
            color: var(--text-secondary);
            background: var(--bg-white-95);
            padding: 4px 8px;
            border-radius: 8px;
        }

        .memory-modal-content {
            font-size: 14px;
            line-height: 1.5;
            color: var(--text-primary);
            margin-bottom: 8px;
            word-wrap: break-word;
        }

        .memory-importance {
            display: flex;
            align-items: center;
            gap: 2px;
            font-size: 14px;
            color: #f39c12;
        }

        .memory-empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
            font-style: italic;
            background: var(--bg-white-90);
            border-radius: 12px;
            border: 2px dashed var(--border-black-05);
        }



        /* ËÆ∞ÂøÜÂÖ±‰∫´ËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
        #memory-share-modal.modal {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: rgba(0, 0, 0, 0.5) !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            z-index: 10000 !important;
        }

        /* üî•„ÄêÁßªÂä®Á´Ø‰øÆÂ§ç„Äë‰∏ìÈó®Â§ÑÁêÜÁßªÂä®Á´ØËôöÊãüÈîÆÁõòÈóÆÈ¢ò */
        @media screen and (max-width: 768px) {
            body {
                /* ‰ΩøÁî®Âõ∫ÂÆöÂÆö‰ΩçÔºåÈò≤Ê≠¢ËôöÊãüÈîÆÁõòÂΩ±Âìç */
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                width: 100% !important;
                height: 100% !important;
                overflow: hidden !important;
            }

            #phone-screen {
                /* Á°Æ‰øùËôöÊãüÊâãÊú∫Âú®ÁßªÂä®Á´ØÂßãÁªàÂ±Ö‰∏≠ */
                position: relative !important;
                margin: auto !important;
                flex-shrink: 0 !important;
                transform: translateZ(0) !important;
            }

            /* üî•„ÄêÊñ∞Â¢û„Äë‰øÆÂ§çÁßªÂä®Á´ØÁ∫ø‰∏ãÊ®°ÂºèÁïåÈù¢ËÆæÁΩÆÊåâÈíÆÊòæÁ§∫ÈóÆÈ¢ò */
            .radio-option-button {
                display: flex !important;
                align-items: center !important;
                gap: 8px !important;
                padding: 8px 12px !important;
                background: rgba(255, 255, 255, 0.8) !important;
                border: 1px solid rgba(0, 0, 0, 0.1) !important;
                border-radius: 8px !important;
                cursor: pointer !important;
                font-size: 13px !important;
                transition: all 0.2s ease !important;
                backdrop-filter: blur(10px) !important;
                -webkit-backdrop-filter: blur(10px) !important;
                margin-bottom: 6px !important;
                width: fit-content !important;
                visibility: visible !important;
                opacity: 1 !important;
            }

            .radio-option-button.selected {
                background: var(--theme-button-bg, rgba(0, 122, 255, 0.8)) !important;
                color: white !important;
                border-color: var(--theme-button-bg, #007AFF) !important;
            }

            .radio-indicator {
                width: 16px !important;
                height: 16px !important;
                border: 2px solid #ddd !important;
                border-radius: 50% !important;
                background: white !important;
                position: relative !important;
                transition: all 0.2s ease !important;
                flex-shrink: 0 !important;
                margin-right: 4px !important;
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
            }

            .radio-option-button.selected .radio-indicator {
                border-color: white !important;
                background: white !important;
            }

            .radio-option-button.selected .radio-indicator::after {
                content: '‚úì' !important;
                position: absolute !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                color: var(--theme-button-bg, #007AFF) !important;
                font-size: 10px !important;
                font-weight: bold !important;
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
            }

            .radio-option-button:not(.selected) .radio-indicator {
                border-color: var(--theme-button-bg, #007AFF) !important;
            }

            .radio-option-button:not(.selected) .radio-indicator::after {
                content: '' !important;
            }
        }

        /* üî•„ÄêÁßªÂä®Á´Ø‰øÆÂ§ç„ÄëÂ§ÑÁêÜiOS SafariÁöÑÁâπÊÆäÊÉÖÂÜµ */
        @supports (-webkit-touch-callout: none) {
            body {
                /* iOS Safari‰∏ìÁî®‰øÆÂ§ç */
                position: fixed !important;
                /* üî•„ÄêÂ¢ûÂº∫„ÄëÂÖ®Èù¢Á¶ÅÁî®SafariÈïøÊåâËèúÂçï */
                -webkit-touch-callout: none !important;
                -webkit-user-select: none !important;
                user-select: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }

            /* üî•„ÄêÊñ∞Â¢û„ÄëÈíàÂØπÊâÄÊúâÂèØËÉΩËß¶ÂèëÈïøÊåâÁöÑÂÖÉÁ¥† */
            .message-bubble, .offline-message-content, .message-item, .contact-item {
                -webkit-touch-callout: none !important;
                -webkit-user-select: none !important;
                user-select: none !important;
                -webkit-context-menu: none !important;
                -webkit-user-drag: none !important;
                /* üî•„Äê‰øÆÂ§ç„ÄëÁßªÈô§Âº∫Âà∂ÂÆΩÈ´ò100%Ôºå‰øùÊåÅÂéüÊúâÁöÑmax-widthÈôêÂà∂ */
                overflow: hidden !important;
            }
        }

        #memory-share-modal.modal .modal-content {
            background: white !important;
            border-radius: 12px !important;
            width: 90% !important;
            max-width: 400px !important;
            max-height: 80vh !important;
            overflow-y: auto !important;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
        }

        #memory-share-modal .modal-header {
            padding: 16px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #memory-share-modal .modal-header h3 {
            margin: 0;
            color: #333;
            font-size: 16px;
        }

        #memory-share-modal .modal-close {
            background: none;
            border: none;
            font-size: 18px;
            color: #999;
            cursor: pointer;
            padding: 4px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        #memory-share-modal .modal-close:hover {
            background: #f5f5f5;
            color: #333;
        }

        #memory-share-modal .modal-body {
            padding: 16px 20px;
        }

        #memory-share-modal .setting-section {
            margin-bottom: 20px;
        }

        #memory-share-modal .setting-section h4 {
            margin: 0 0 12px 0;
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        #memory-share-modal .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        #memory-share-modal .radio-option {
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        #memory-share-modal .radio-option:hover {
            border-color: var(--theme-button-bg, #007AFF);
            background: rgba(var(--theme-button-bg-rgb, 0, 122, 255), 0.05);
        }

        #memory-share-modal .radio-custom {
            width: 16px;
            height: 16px;
            margin-right: 10px;
        }

        #memory-share-modal .radio-content {
            flex: 1;
        }

        #memory-share-modal .radio-title {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 2px;
        }

        #memory-share-modal .radio-desc {
            font-size: 12px;
            color: #666;
        }

        #memory-share-modal .info-text {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
        }

        #memory-share-modal .modal-actions {
            padding: 12px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            gap: 12px;
        }

        #memory-share-modal .modal-button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 70px;
            flex: 0 0 auto;
        }

        #memory-share-modal .modal-secondary {
            background: #f5f5f5;
            color: #333;
        }

        #memory-share-modal .modal-secondary:hover {
            background: #e5e5e5;
        }

        #memory-share-modal .modal-primary {
            background: var(--theme-button-bg, #007AFF);
            color: var(--theme-button-color, white);
        }

        #memory-share-modal .modal-primary:hover {
            background: var(--theme-button-bg-hover, #0056CC);
        }

        /* Â§çÈÄâÊ°ÜÁªÑÊ†∑Âºè */
        #memory-share-modal .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        #memory-share-modal .checkbox-option {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        #memory-share-modal .checkbox-option:hover {
            border-color: var(--theme-button-bg, #007AFF);
            background: rgba(var(--theme-button-bg-rgb, 0, 122, 255), 0.05);
        }

        #memory-share-modal .checkbox-option input[type="checkbox"] {
            display: none;
        }

        #memory-share-modal .checkbox-custom {
            width: 16px;
            height: 16px;
            border: 2px solid #ddd;
            border-radius: 3px;
            margin-right: 10px;
            position: relative;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        #memory-share-modal .checkbox-option input[type="checkbox"]:checked + .checkbox-custom {
            border-color: var(--theme-button-bg, #007AFF);
            background-color: var(--theme-button-bg, #007AFF);
        }

        #memory-share-modal .checkbox-option input[type="checkbox"]:checked + .checkbox-custom::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 10px;
            font-weight: bold;
        }

        #memory-share-modal .checkbox-content {
            flex: 1;
        }

        #memory-share-modal .checkbox-title {
            font-size: 14px;
        }

        /* üî•„ÄêÊñ∞Â¢û„ÄëÂøÉÂ£∞Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
        #inner-thoughts-modal .modal-content {
            max-width: 500px;
            width: 90%;
        }

        .inner-thoughts-content {
            min-height: 150px;
            padding: 20px;
            background: rgba(248, 249, 250, 0.8);
            border-radius: 12px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            font-size: 14px;
            line-height: 1.6;
            color: #333;
        }

        .inner-thoughts-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px;
            color: #666;
        }

        .inner-thoughts-loading p {
            margin: 15px 0 0 0;
            font-size: 14px;
        }

        .loading-spinner {
            width: 24px;
            height: 24px;
            border: 2px solid #e0e0e0;
            border-top: 2px solid #007AFF;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .inner-thoughts-text {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* ÂøÉÂ£∞Âà∑Êñ∞ÊåâÈíÆ - ‰Ωç‰∫éÊ®°ÊÄÅÊ°ÜÂ∫ïÈÉ® */
        .inner-thoughts-refresh-btn {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .inner-thoughts-refresh-btn i {
            transition: transform 0.3s ease;
        }

        .inner-thoughts-refresh-btn:hover i {
            transform: rotate(180deg);
        }

        /* ÂèØÁà±‰∏ªÈ¢ò‰∏ãÁöÑÂøÉÂ£∞Ê®°ÊÄÅÊ°Ü */
        body[data-theme="cute"] .inner-thoughts-content {
            background: rgba(255, 240, 245, 0.9);
            border-color: rgba(255, 182, 193, 0.3);
        }

        body[data-theme="cute"] .loading-spinner {
            border-top-color: var(--theme-button-bg);
        }

        body[data-theme="cute"] .inner-thoughts-refresh-btn:hover {
            color: var(--theme-button-bg);
        }

        /* ËÄ≥ÊúµÂõæÊ†áÊ†∑Âºè */
        .ear-icon {
            margin-right: 8px;
            opacity: 0.8;
            font-weight: 500;
            color: #333;
            margin-bottom: 2px;
        }

        #memory-share-modal .checkbox-desc {
            font-size: 12px;
            color: #666;
        }